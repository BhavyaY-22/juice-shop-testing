(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[380],{1167:(di,pt,ge)=>{!function(Q){"use strict";Q.defineMode("markdown",function(Ke,U){var ue=Q.getMode(Ke,"text/html"),te="null"==ue.name;void 0===U.highlightFormatting&&(U.highlightFormatting=!1),void 0===U.maxBlockquoteDepth&&(U.maxBlockquoteDepth=0),void 0===U.taskLists&&(U.taskLists=!1),void 0===U.strikethrough&&(U.strikethrough=!1),void 0===U.emoji&&(U.emoji=!1),void 0===U.fencedCodeBlockHighlighting&&(U.fencedCodeBlockHighlighting=!0),void 0===U.fencedCodeBlockDefaultMode&&(U.fencedCodeBlockDefaultMode="text/plain"),void 0===U.xml&&(U.xml=!0),void 0===U.tokenTypeOverrides&&(U.tokenTypeOverrides={});var P={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var Te in P)P.hasOwnProperty(Te)&&U.tokenTypeOverrides[Te]&&(P[Te]=U.tokenTypeOverrides[Te]);var ce=/^([*\-_])(?:\s*\1){2,}\s*$/,Ge=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,Ce=/^\[(x| )\](?=\s)/i,pe=U.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,ke=/^ {0,3}(?:\={1,}|-{2,})\s*$/,qe=/^[^#!\[\]*_\\<>` "'(~:]+/,ft=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,ut=/^\s*\[[^\]]+?\]:.*$/,de=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function Jt(S,v,ee){return v.f=v.inline=ee,ee(S,v)}function Qt(S,v,ee){return v.f=v.block=ee,ee(S,v)}function Kt(S){if(S.linkTitle=!1,S.linkHref=!1,S.linkText=!1,S.em=!1,S.strong=!1,S.strikethrough=!1,S.quote=0,S.indentedCode=!1,S.f==m){var v=te;if(!v){var ee=Q.innerMode(ue,S.htmlState);v="xml"==ee.mode.name&&null===ee.state.tagStart&&!ee.state.context&&ee.state.tokenize.isInText}v&&(S.f=T,S.block=ot,S.htmlState=null)}return S.trailingSpace=0,S.trailingSpaceNewLine=!1,S.prevLine=S.thisLine,S.thisLine={stream:null},null}function ot(S,v){var ee=S.column()===v.indentation,xe=function tt(S){return!S||!/\S/.test(S.string)}(v.prevLine.stream),G=v.indentedCode,$=v.prevLine.hr,N=!1!==v.list,A=(v.listStack[v.listStack.length-1]||0)+3;v.indentedCode=!1;var ae=v.indentation;if(null===v.indentationDiff&&(v.indentationDiff=v.indentation,N)){for(v.list=null;ae<v.listStack[v.listStack.length-1];)v.listStack.pop(),v.listStack.length?v.indentation=v.listStack[v.listStack.length-1]:v.list=!1;!1!==v.list&&(v.indentationDiff=ae-v.listStack[v.listStack.length-1])}var B=!(xe||$||v.prevLine.header||N&&G||v.prevLine.fencedCodeEnd),se=(!1===v.list||$||xe)&&v.indentation<=A&&S.match(ce),Se=null;if(v.indentationDiff>=4&&(G||v.prevLine.fencedCodeEnd||v.prevLine.header||xe))return S.skipToEnd(),v.indentedCode=!0,P.code;if(S.eatSpace())return null;if(ee&&v.indentation<=A&&(Se=S.match(pe))&&Se[1].length<=6)return v.quote=0,v.header=Se[1].length,v.thisLine.header=!0,U.highlightFormatting&&(v.formatting="header"),v.f=v.inline,V(v);if(v.indentation<=A&&S.eat(">"))return v.quote=ee?1:v.quote+1,U.highlightFormatting&&(v.formatting="quote"),S.eatSpace(),V(v);if(!se&&!v.setext&&ee&&v.indentation<=A&&(Se=S.match(Ge))){var yt=Se[1]?"ol":"ul";return v.indentation=ae+S.current().length,v.list=!0,v.quote=0,v.listStack.push(v.indentation),v.em=!1,v.strong=!1,v.code=!1,v.strikethrough=!1,U.taskLists&&S.match(Ce,!1)&&(v.taskList=!0),v.f=v.inline,U.highlightFormatting&&(v.formatting=["list","list-"+yt]),V(v)}return ee&&v.indentation<=A&&(Se=S.match(ft,!0))?(v.quote=0,v.fencedEndRE=new RegExp(Se[1]+"+ *$"),v.localMode=U.fencedCodeBlockHighlighting&&function j(S){if(Q.findModeByName){var v=Q.findModeByName(S);v&&(S=v.mime||v.mimes[0])}var ee=Q.getMode(Ke,S);return"null"==ee.name?null:ee}(Se[2]||U.fencedCodeBlockDefaultMode),v.localMode&&(v.localState=Q.startState(v.localMode)),v.f=v.block=Nt,U.highlightFormatting&&(v.formatting="code-block"),v.code=-1,V(v)):v.setext||!(B&&N||v.quote||!1!==v.list||v.code||se||ut.test(S.string))&&(Se=S.lookAhead(1))&&(Se=Se.match(ke))?(v.setext?(v.header=v.setext,v.setext=0,S.skipToEnd(),U.highlightFormatting&&(v.formatting="header")):(v.header="="==Se[0].charAt(0)?1:2,v.setext=v.header),v.thisLine.header=!0,v.f=v.inline,V(v)):se?(S.skipToEnd(),v.hr=!0,v.thisLine.hr=!0,P.hr):"["===S.peek()?Jt(S,v,re):Jt(S,v,v.inline)}function m(S,v){var ee=ue.token(S,v.htmlState);if(!te){var xe=Q.innerMode(ue,v.htmlState);("xml"==xe.mode.name&&null===xe.state.tagStart&&!xe.state.context&&xe.state.tokenize.isInText||v.md_inside&&S.current().indexOf(">")>-1)&&(v.f=T,v.block=ot,v.htmlState=null)}return ee}function Nt(S,v){var $,ee=v.listStack[v.listStack.length-1]||0,xe=v.indentation<ee;return v.fencedEndRE&&v.indentation<=ee+3&&(xe||S.match(v.fencedEndRE))?(U.highlightFormatting&&(v.formatting="code-block"),xe||($=V(v)),v.localMode=v.localState=null,v.block=ot,v.f=T,v.fencedEndRE=null,v.code=0,v.thisLine.fencedCodeEnd=!0,xe?Qt(S,v,v.block):$):v.localMode?v.localMode.token(S,v.localState):(S.skipToEnd(),P.code)}function V(S){var v=[];if(S.formatting){v.push(P.formatting),"string"==typeof S.formatting&&(S.formatting=[S.formatting]);for(var ee=0;ee<S.formatting.length;ee++)v.push(P.formatting+"-"+S.formatting[ee]),"header"===S.formatting[ee]&&v.push(P.formatting+"-"+S.formatting[ee]+"-"+S.header),"quote"===S.formatting[ee]&&v.push(!U.maxBlockquoteDepth||U.maxBlockquoteDepth>=S.quote?P.formatting+"-"+S.formatting[ee]+"-"+S.quote:"error")}if(S.taskOpen)return v.push("meta"),v.length?v.join(" "):null;if(S.taskClosed)return v.push("property"),v.length?v.join(" "):null;if(S.linkHref?v.push(P.linkHref,"url"):(S.strong&&v.push(P.strong),S.em&&v.push(P.em),S.strikethrough&&v.push(P.strikethrough),S.emoji&&v.push(P.emoji),S.linkText&&v.push(P.linkText),S.code&&v.push(P.code),S.image&&v.push(P.image),S.imageAltText&&v.push(P.imageAltText,"link"),S.imageMarker&&v.push(P.imageMarker)),S.header&&v.push(P.header,P.header+"-"+S.header),S.quote&&(v.push(P.quote),v.push(!U.maxBlockquoteDepth||U.maxBlockquoteDepth>=S.quote?P.quote+"-"+S.quote:P.quote+"-"+U.maxBlockquoteDepth)),!1!==S.list){var xe=(S.listStack.length-1)%3;v.push(xe?1===xe?P.list2:P.list3:P.list1)}return S.trailingSpaceNewLine?v.push("trailing-space-new-line"):S.trailingSpace&&v.push("trailing-space-"+(S.trailingSpace%2?"a":"b")),v.length?v.join(" "):null}function Ze(S,v){if(S.match(qe,!0))return V(v)}function T(S,v){var ee=v.text(S,v);if(typeof ee<"u")return ee;if(v.list)return v.list=null,V(v);if(v.taskList)return" "===S.match(Ce,!0)[1]?v.taskOpen=!0:v.taskClosed=!0,U.highlightFormatting&&(v.formatting="task"),v.taskList=!1,V(v);if(v.taskOpen=!1,v.taskClosed=!1,v.header&&S.match(/^#+$/,!0))return U.highlightFormatting&&(v.formatting="header"),V(v);var G=S.next();if(v.linkTitle){v.linkTitle=!1;var $=G;if("("===G&&($=")"),$=($+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"),S.match(new RegExp("^\\s*(?:[^"+$+"\\\\]+|\\\\\\\\|\\\\.)"+$),!0))return P.linkHref}if("`"===G){var A=v.formatting;U.highlightFormatting&&(v.formatting="code"),S.eatWhile("`");var ae=S.current().length;if(0==v.code&&(!v.quote||1==ae))return v.code=ae,V(v);if(ae==v.code){var B=V(v);return v.code=0,B}return v.formatting=A,V(v)}if(v.code)return V(v);if("\\"===G&&(S.next(),U.highlightFormatting)){var se=V(v),Se=P.formatting+"-escape";return se?se+" "+Se:Se}if("!"===G&&S.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return v.imageMarker=!0,v.image=!0,U.highlightFormatting&&(v.formatting="image"),V(v);if("["===G&&v.imageMarker&&S.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return v.imageMarker=!1,v.imageAltText=!0,U.highlightFormatting&&(v.formatting="image"),V(v);if("]"===G&&v.imageAltText){U.highlightFormatting&&(v.formatting="image");se=V(v);return v.imageAltText=!1,v.image=!1,v.inline=v.f=x,se}if("["===G&&!v.image)return v.linkText&&S.match(/^.*?\]/)||(v.linkText=!0,U.highlightFormatting&&(v.formatting="link")),V(v);if("]"===G&&v.linkText){U.highlightFormatting&&(v.formatting="link");se=V(v);return v.linkText=!1,v.inline=v.f=S.match(/\(.*?\)| ?\[.*?\]/,!1)?x:T,se}if("<"===G&&S.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return v.f=v.inline=ne,U.highlightFormatting&&(v.formatting="link"),(se=V(v))?se+=" ":se="",se+P.linkInline;if("<"===G&&S.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return v.f=v.inline=ne,U.highlightFormatting&&(v.formatting="link"),(se=V(v))?se+=" ":se="",se+P.linkEmail;if(U.xml&&"<"===G&&S.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var yt=S.string.indexOf(">",S.pos);if(-1!=yt){var Vt=S.string.substring(S.start,yt);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(Vt)&&(v.md_inside=!0)}return S.backUp(1),v.htmlState=Q.startState(ue),Qt(S,v,m)}if(U.xml&&"<"===G&&S.match(/^\/\w*?>/))return v.md_inside=!1,"tag";if("*"===G||"_"===G){for(var gt=1,bt=1==S.pos?" ":S.string.charAt(S.pos-2);gt<3&&S.eat(G);)gt++;var be=S.peek()||" ",or=!/\s/.test(be)&&(!de.test(be)||/\s/.test(bt)||de.test(bt)),Me=!/\s/.test(bt)&&(!de.test(bt)||/\s/.test(be)||de.test(be)),jt=null,fr=null;if(gt%2&&(v.em||!or||"*"!==G&&Me&&!de.test(bt)?v.em==G&&Me&&("*"===G||!or||de.test(be))&&(jt=!1):jt=!0),gt>1&&(v.strong||!or||"*"!==G&&Me&&!de.test(bt)?v.strong==G&&Me&&("*"===G||!or||de.test(be))&&(fr=!1):fr=!0),null!=fr||null!=jt)return U.highlightFormatting&&(v.formatting=null==jt?"strong":null==fr?"em":"strong em"),!0===jt&&(v.em=G),!0===fr&&(v.strong=G),B=V(v),!1===jt&&(v.em=!1),!1===fr&&(v.strong=!1),B}else if(" "===G&&(S.eat("*")||S.eat("_"))){if(" "===S.peek())return V(v);S.backUp(1)}if(U.strikethrough)if("~"===G&&S.eatWhile(G)){if(v.strikethrough)return U.highlightFormatting&&(v.formatting="strikethrough"),B=V(v),v.strikethrough=!1,B;if(S.match(/^[^\s]/,!1))return v.strikethrough=!0,U.highlightFormatting&&(v.formatting="strikethrough"),V(v)}else if(" "===G&&S.match("~~",!0)){if(" "===S.peek())return V(v);S.backUp(2)}if(U.emoji&&":"===G&&S.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){v.emoji=!0,U.highlightFormatting&&(v.formatting="emoji");var mn=V(v);return v.emoji=!1,mn}return" "===G&&(S.match(/^ +$/,!1)?v.trailingSpace++:v.trailingSpace&&(v.trailingSpaceNewLine=!0)),V(v)}function ne(S,v){if(">"===S.next()){v.f=v.inline=T,U.highlightFormatting&&(v.formatting="link");var xe=V(v);return xe?xe+=" ":xe="",xe+P.linkInline}return S.match(/^[^>]+/,!0),P.linkInline}function x(S,v){if(S.eatSpace())return null;var ee=S.next();return"("===ee||"["===ee?(v.f=v.inline=function H(S){return function(v,ee){if(v.next()===S){ee.f=ee.inline=T,U.highlightFormatting&&(ee.formatting="link-string");var G=V(ee);return ee.linkHref=!1,G}return v.match(K[S]),ee.linkHref=!0,V(ee)}}("("===ee?")":"]"),U.highlightFormatting&&(v.formatting="link-string"),v.linkHref=!0,V(v)):"error"}var K={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function re(S,v){return S.match(/^([^\]\\]|\\.)*\]:/,!1)?(v.f=J,S.next(),U.highlightFormatting&&(v.formatting="link"),v.linkText=!0,V(v)):Jt(S,v,T)}function J(S,v){if(S.match("]:",!0)){v.f=v.inline=rt,U.highlightFormatting&&(v.formatting="link");var ee=V(v);return v.linkText=!1,ee}return S.match(/^([^\]\\]|\\.)+/,!0),P.linkText}function rt(S,v){return S.eatSpace()?null:(S.match(/^[^\s]+/,!0),void 0===S.peek()?v.linkTitle=!0:S.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),v.f=v.inline=T,P.linkHref+" url")}var vt={startState:function(){return{f:ot,prevLine:{stream:null},thisLine:{stream:null},block:ot,htmlState:null,indentation:0,inline:T,text:Ze,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(S){return{f:S.f,prevLine:S.prevLine,thisLine:S.thisLine,block:S.block,htmlState:S.htmlState&&Q.copyState(ue,S.htmlState),indentation:S.indentation,localMode:S.localMode,localState:S.localMode?Q.copyState(S.localMode,S.localState):null,inline:S.inline,text:S.text,formatting:!1,linkText:S.linkText,linkTitle:S.linkTitle,linkHref:S.linkHref,code:S.code,em:S.em,strong:S.strong,strikethrough:S.strikethrough,emoji:S.emoji,header:S.header,setext:S.setext,hr:S.hr,taskList:S.taskList,list:S.list,listStack:S.listStack.slice(0),quote:S.quote,indentedCode:S.indentedCode,trailingSpace:S.trailingSpace,trailingSpaceNewLine:S.trailingSpaceNewLine,md_inside:S.md_inside,fencedEndRE:S.fencedEndRE}},token:function(S,v){if(v.formatting=!1,S!=v.thisLine.stream){if(v.header=0,v.hr=!1,S.match(/^\s*$/,!0))return Kt(v),null;if(v.prevLine=v.thisLine,v.thisLine={stream:S},v.taskList=!1,v.trailingSpace=0,v.trailingSpaceNewLine=!1,!v.localState&&(v.f=v.block,v.f!=m)){var ee=S.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(v.indentation=ee,v.indentationDiff=null,ee>0)return null}}return v.f(S,v)},innerMode:function(S){return S.block==m?{state:S.htmlState,mode:ue}:S.localState?{state:S.localState,mode:S.localMode}:{state:S,mode:vt}},indent:function(S,v,ee){return S.block==m&&ue.indent?ue.indent(S.htmlState,v,ee):S.localState&&S.localMode.indent?S.localMode.indent(S.localState,v,ee):Q.Pass},blankLine:Kt,getType:V,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return vt},"xml"),Q.defineMIME("text/markdown","markdown"),Q.defineMIME("text/x-markdown","markdown")}(ge(1382),ge(8775),ge(8039))},1382:function(di){di.exports=function(){"use strict";var pt=navigator.userAgent,ge=navigator.platform,Q=/gecko\/\d/i.test(pt),Ke=/MSIE \d/.test(pt),U=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pt),ue=/Edge\/(\d+)/.exec(pt),te=Ke||U||ue,j=te&&(Ke?document.documentMode||6:+(ue||U)[1]),P=!ue&&/WebKit\//.test(pt),Te=P&&/Qt\/\d+\.\d+/.test(pt),ce=!ue&&/Chrome\/(\d+)/.exec(pt),Ge=ce&&+ce[1],Ce=/Opera\//.test(pt),pe=/Apple Computer/.test(navigator.vendor),ke=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(pt),qe=/PhantomJS/.test(pt),ft=pe&&(/Mobile\/\w+/.test(pt)||navigator.maxTouchPoints>2),ut=/Android/.test(pt),de=ft||ut||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(pt),Ye=ft||/Mac/.test(ge),Jt=/\bCrOS\b/.test(pt),Qt=/win/i.test(ge),tt=Ce&&pt.match(/Version\/(\d*\.\d*)/);tt&&(tt=Number(tt[1])),tt&&tt>=15&&(Ce=!1,P=!0);var Kt=Ye&&(Te||Ce&&(null==tt||tt<12.11)),ot=Q||te&&j>=9;function m(r){return new RegExp("(^|\\s)"+r+"(?:$|\\s)\\s*")}var x,Nt=function(r,o){var e=r.className,t=m(o).exec(e);if(t){var n=e.slice(t.index+t[0].length);r.className=e.slice(0,t.index)+(n?t[1]+n:"")}};function V(r){for(var o=r.childNodes.length;o>0;--o)r.removeChild(r.firstChild);return r}function Ze(r,o){return V(r).appendChild(o)}function T(r,o,e,t){var n=document.createElement(r);if(e&&(n.className=e),t&&(n.style.cssText=t),"string"==typeof o)n.appendChild(document.createTextNode(o));else if(o)for(var i=0;i<o.length;++i)n.appendChild(o[i]);return n}function ne(r,o,e,t){var n=T(r,o,e,t);return n.setAttribute("role","presentation"),n}function K(r,o){if(3==o.nodeType&&(o=o.parentNode),r.contains)return r.contains(o);do{if(11==o.nodeType&&(o=o.host),o==r)return!0}while(o=o.parentNode)}function H(r){var e,o=r.ownerDocument||r;try{e=r.activeElement}catch{e=o.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function re(r,o){var e=r.className;m(o).test(e)||(r.className+=(e?" ":"")+o)}function J(r,o){for(var e=r.split(" "),t=0;t<e.length;t++)e[t]&&!m(e[t]).test(o)&&(o+=" "+e[t]);return o}x=document.createRange?function(r,o,e,t){var n=document.createRange();return n.setEnd(t||r,e),n.setStart(r,o),n}:function(r,o,e){var t=document.body.createTextRange();try{t.moveToElementText(r.parentNode)}catch{return t}return t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",o),t};var rt=function(r){r.select()};function vt(r){return r.display.wrapper.ownerDocument}function S(r){return v(r.display.wrapper)}function v(r){return r.getRootNode?r.getRootNode():r.ownerDocument}function ee(r){return vt(r).defaultView}function xe(r){var o=Array.prototype.slice.call(arguments,1);return function(){return r.apply(null,o)}}function G(r,o,e){for(var t in o||(o={}),r)r.hasOwnProperty(t)&&(!1!==e||!o.hasOwnProperty(t))&&(o[t]=r[t]);return o}function $(r,o,e,t,n){null==o&&-1==(o=r.search(/[^\s\u00a0]/))&&(o=r.length);for(var i=t||0,l=n||0;;){var a=r.indexOf("\t",i);if(a<0||a>=o)return l+(o-i);l+=a-i,l+=e-l%e,i=a+1}}ft?rt=function(r){r.selectionStart=0,r.selectionEnd=r.value.length}:te&&(rt=function(r){try{r.select()}catch{}});var N=function(){this.id=null,this.f=null,this.time=0,this.handler=xe(this.onTimeout,this)};function A(r,o){for(var e=0;e<r.length;++e)if(r[e]==o)return e;return-1}N.prototype.onTimeout=function(r){r.id=0,r.time<=+new Date?r.f():setTimeout(r.handler,r.time-+new Date)},N.prototype.set=function(r,o){this.f=o;var e=+new Date+r;(!this.id||e<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,r),this.time=e)};var B={toString:function(){return"CodeMirror.Pass"}},se={scroll:!1},Se={origin:"*mouse"},yt={origin:"+move"};function Vt(r,o,e){for(var t=0,n=0;;){var i=r.indexOf("\t",t);-1==i&&(i=r.length);var l=i-t;if(i==r.length||n+l>=o)return t+Math.min(l,o-n);if(n+=i-t,t=i+1,(n+=e-n%e)>=o)return t}}var gt=[""];function bt(r){for(;gt.length<=r;)gt.push(be(gt)+" ");return gt[r]}function be(r){return r[r.length-1]}function or(r,o){for(var e=[],t=0;t<r.length;t++)e[t]=o(r[t],t);return e}function jt(){}function fr(r,o){var e;return Object.create?e=Object.create(r):(jt.prototype=r,e=new jt),o&&G(o,e),e}var mn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Y(r){return/\w/.test(r)||r>"\x80"&&(r.toUpperCase()!=r.toLowerCase()||mn.test(r))}function Ae(r,o){return o?!!(o.source.indexOf("\\w")>-1&&Y(r))||o.test(r):Y(r)}function L(r){for(var o in r)if(r.hasOwnProperty(o)&&r[o])return!1;return!0}var z=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function X(r){return r.charCodeAt(0)>=768&&z.test(r)}function we(r,o,e){for(;(e<0?o>0:o<r.length)&&X(r.charAt(o));)o+=e;return o}function fe(r,o,e){for(var t=o>e?-1:1;;){if(o==e)return o;var n=(o+e)/2,i=t<0?Math.ceil(n):Math.floor(n);if(i==o)return r(i)?o:e;r(i)?e=i:o=i+t}}var wt=null;function Ct(r,o,e){var t;wt=null;for(var n=0;n<r.length;++n){var i=r[n];if(i.from<o&&i.to>o)return n;i.to==o&&(i.from!=i.to&&"before"==e?t=n:wt=n),i.from==o&&(i.from!=i.to&&"before"!=e?t=n:wt=n)}return t??wt}var Bt=function(){function e(u){return u<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L"}var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,i=/[LRr]/,l=/[Lb1n]/,a=/[1n]/;function s(u,f,h){this.level=u,this.from=f,this.to=h}return function(u,f){var h="ltr"==f?"L":"R";if(0==u.length||"ltr"==f&&!t.test(u))return!1;for(var c=u.length,d=[],g=0;g<c;++g)d.push(e(u.charCodeAt(g)));for(var y=0,w=h;y<c;++y){var k=d[y];"m"==k?d[y]=w:w=k}for(var M=0,D=h;M<c;++M){var E=d[M];"1"==E&&"r"==D?d[M]="n":i.test(E)&&(D=E,"r"==E&&(d[M]="R"))}for(var W=1,I=d[0];W<c-1;++W){var _=d[W];"+"==_&&"1"==I&&"1"==d[W+1]?d[W]="1":","==_&&I==d[W+1]&&("1"==I||"n"==I)&&(d[W]=I),I=_}for(var q=0;q<c;++q){var he=d[q];if(","==he)d[q]="N";else if("%"==he){var me=void 0;for(me=q+1;me<c&&"%"==d[me];++me);for(var Xe=q&&"!"==d[q-1]||me<c&&"1"==d[me]?"1":"N",Ne=q;Ne<me;++Ne)d[Ne]=Xe;q=me-1}}for(var ze=0,et=h;ze<c;++ze){var Fe=d[ze];"L"==et&&"1"==Fe?d[ze]="L":i.test(Fe)&&(et=Fe)}for(var _e=0;_e<c;++_e)if(n.test(d[_e])){var Ee=void 0;for(Ee=_e+1;Ee<c&&n.test(d[Ee]);++Ee);for(var Le="L"==(_e?d[_e-1]:h),it=Le==("L"==(Ee<c?d[Ee]:h))?Le?"L":"R":h,Tt=_e;Tt<Ee;++Tt)d[Tt]=it;_e=Ee-1}for(var Zt,Mt=[],Pe=0;Pe<c;)if(l.test(d[Pe])){var Dr=Pe;for(++Pe;Pe<c&&l.test(d[Pe]);++Pe);Mt.push(new s(0,Dr,Pe))}else{var st=Pe,gn=Mt.length,ir="rtl"==f?1:0;for(++Pe;Pe<c&&"L"!=d[Pe];++Pe);for(var Dt=st;Dt<Pe;)if(a.test(d[Dt])){st<Dt&&(Mt.splice(gn,0,new s(1,st,Dt)),gn+=ir);var Ar=Dt;for(++Dt;Dt<Pe&&a.test(d[Dt]);++Dt);Mt.splice(gn,0,new s(2,Ar,Dt)),gn+=ir,st=Dt}else++Dt;st<Pe&&Mt.splice(gn,0,new s(1,st,Pe))}return"ltr"==f&&(1==Mt[0].level&&(Zt=u.match(/^\s+/))&&(Mt[0].from=Zt[0].length,Mt.unshift(new s(0,0,Zt[0].length))),1==be(Mt).level&&(Zt=u.match(/\s+$/))&&(be(Mt).to-=Zt[0].length,Mt.push(new s(0,c-Zt[0].length,c)))),"rtl"==f?Mt.reverse():Mt}}();function lt(r,o){var e=r.order;return null==e&&(e=r.order=Bt(r.text,o)),e}var Rt=[],R=function(r,o,e){if(r.addEventListener)r.addEventListener(o,e,!1);else if(r.attachEvent)r.attachEvent("on"+o,e);else{var t=r._handlers||(r._handlers={});t[o]=(t[o]||Rt).concat(e)}};function pi(r,o){return r._handlers&&r._handlers[o]||Rt}function ie(r,o,e){if(r.removeEventListener)r.removeEventListener(o,e,!1);else if(r.detachEvent)r.detachEvent("on"+o,e);else{var t=r._handlers,n=t&&t[o];if(n){var i=A(n,e);i>-1&&(t[o]=n.slice(0,i).concat(n.slice(i+1)))}}}function Qe(r,o){var e=pi(r,o);if(e.length)for(var t=Array.prototype.slice.call(arguments,2),n=0;n<e.length;++n)e[n].apply(null,t)}function We(r,o,e){return"string"==typeof o&&(o={type:o,preventDefault:function(){this.defaultPrevented=!0}}),Qe(r,e||o.type,r,o),Ot(o)||o.codemirrorIgnore}function mt(r){var o=r._handlers&&r._handlers.cursorActivity;if(o)for(var e=r.curOp.cursorActivityHandlers||(r.curOp.cursorActivityHandlers=[]),t=0;t<o.length;++t)-1==A(e,o[t])&&e.push(o[t])}function Be(r,o){return pi(r,o).length>0}function Xt(r){r.prototype.on=function(o,e){R(this,o,e)},r.prototype.off=function(o,e){ie(this,o,e)}}function nt(r){r.preventDefault?r.preventDefault():r.returnValue=!1}function yr(r){r.stopPropagation?r.stopPropagation():r.cancelBubble=!0}function Ot(r){return null!=r.defaultPrevented?r.defaultPrevented:0==r.returnValue}function Gr(r){nt(r),yr(r)}function qt(r){return r.target||r.srcElement}function Yr(r){var o=r.which;return null==o&&(1&r.button?o=1:2&r.button?o=3:4&r.button&&(o=2)),Ye&&r.ctrlKey&&1==o&&(o=3),o}var hr,yn,ji=function(){if(te&&j<9)return!1;var r=T("div");return"draggable"in r||"dragDrop"in r}();function Sl(r){if(null==hr){var o=T("span","\u200b");Ze(r,T("span",[o,document.createTextNode("x")])),0!=r.firstChild.offsetHeight&&(hr=o.offsetWidth<=1&&o.offsetHeight>2&&!(te&&j<8))}var e=hr?T("span","\u200b"):T("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return e.setAttribute("cm-text",""),e}function Wo(r){if(null!=yn)return yn;var o=Ze(r,document.createTextNode("A\u062eA")),e=x(o,0,1).getBoundingClientRect(),t=x(o,1,2).getBoundingClientRect();return V(r),!(!e||e.left==e.right)&&(yn=t.right-e.right<3)}var r,zn=3!="\n\nb".split(/\n/).length?function(r){for(var o=0,e=[],t=r.length;o<=t;){var n=r.indexOf("\n",o);-1==n&&(n=r.length);var i=r.slice(o,"\r"==r.charAt(n-1)?n-1:n),l=i.indexOf("\r");-1!=l?(e.push(i.slice(0,l)),o+=l+1):(e.push(i),o=n+1)}return e}:function(r){return r.split(/\r\n?|\n/)},xn=window.getSelection?function(r){try{return r.selectionStart!=r.selectionEnd}catch{return!1}}:function(r){var o;try{o=r.ownerDocument.selection.createRange()}catch{}return!(!o||o.parentElement()!=r)&&0!=o.compareEndPoints("StartToEnd",o)},xr="oncopy"in(r=T("div"))||(r.setAttribute("oncopy","return;"),"function"==typeof r.oncopy),Ur=null;var cr={},bn={};function vi(r,o){arguments.length>2&&(o.dependencies=Array.prototype.slice.call(arguments,2)),cr[r]=o}function lr(r){if("string"==typeof r&&bn.hasOwnProperty(r))r=bn[r];else if(r&&"string"==typeof r.name&&bn.hasOwnProperty(r.name)){var o=bn[r.name];"string"==typeof o&&(o={name:o}),(r=fr(o,r)).name=o.name}else{if("string"==typeof r&&/^[\w\-]+\/[\w\-]+\+xml$/.test(r))return lr("application/xml");if("string"==typeof r&&/^[\w\-]+\/[\w\-]+\+json$/.test(r))return lr("application/json")}return"string"==typeof r?{name:r}:r||{name:"null"}}function Zr(r,o){o=lr(o);var e=cr[o.name];if(!e)return Zr(r,"text/plain");var t=e(r,o);if(Fr.hasOwnProperty(o.name)){var n=Fr[o.name];for(var i in n)n.hasOwnProperty(i)&&(t.hasOwnProperty(i)&&(t["_"+i]=t[i]),t[i]=n[i])}if(t.name=o.name,o.helperType&&(t.helperType=o.helperType),o.modeProps)for(var l in o.modeProps)t[l]=o.modeProps[l];return t}var Fr={};function gi(r,o){G(o,Fr.hasOwnProperty(r)?Fr[r]:Fr[r]={})}function ar(r,o){if(!0===o)return o;if(r.copyState)return r.copyState(o);var e={};for(var t in o){var n=o[t];n instanceof Array&&(n=n.concat([])),e[t]=n}return e}function wn(r,o){for(var e;r.innerMode&&(e=r.innerMode(o))&&e.mode!=r;)o=e.state,r=e.mode;return e||{mode:r,state:o}}function Er(r,o,e){return!r.startState||r.startState(o,e)}var ht=function(r,o,e){this.pos=this.start=0,this.string=r,this.tabSize=o||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=e};function oe(r,o){if((o-=r.first)<0||o>=r.size)throw new Error("There is no line "+(o+r.first)+" in the document.");for(var e=r;!e.lines;)for(var t=0;;++t){var n=e.children[t],i=n.chunkSize();if(o<i){e=n;break}o-=i}return e.lines[o]}function Ve(r,o,e){var t=[],n=o.line;return r.iter(o.line,e.line+1,function(i){var l=i.text;n==e.line&&(l=l.slice(0,e.ch)),n==o.line&&(l=l.slice(o.ch)),t.push(l),++n}),t}function le(r,o,e){var t=[];return r.iter(o,e,function(n){t.push(n.text)}),t}function zt(r,o){var e=o-r.height;if(e)for(var t=r;t;t=t.parent)t.height+=e}function Re(r){if(null==r.parent)return null;for(var o=r.parent,e=A(o.lines,r),t=o.parent;t;o=t,t=t.parent)for(var n=0;t.children[n]!=o;++n)e+=t.children[n].chunkSize();return e+o.first}function Wt(r,o){var e=r.first;e:do{for(var t=0;t<r.children.length;++t){var n=r.children[t],i=n.height;if(o<i){r=n;continue e}o-=i,e+=n.chunkSize()}return e}while(!r.lines);for(var l=0;l<r.lines.length;++l){var s=r.lines[l].height;if(o<s)break;o-=s}return e+l}function p(r,o){return o>=r.first&&o<r.first+r.size}function b(r,o){return String(r.lineNumberFormatter(o+r.firstLineNumber))}function C(r,o,e){if(void 0===e&&(e=null),!(this instanceof C))return new C(r,o,e);this.line=r,this.ch=o,this.sticky=e}function O(r,o){return r.line-o.line||r.ch-o.ch}function F(r,o){return r.sticky==o.sticky&&0==O(r,o)}function Z(r){return C(r.line,r.ch)}function Ie(r,o){return O(r,o)<0?o:r}function St(r,o){return O(r,o)<0?r:o}function er(r,o){return Math.max(r.first,Math.min(o,r.first+r.size-1))}function ve(r,o){if(o.line<r.first)return C(r.first,0);var e=r.first+r.size-1;return o.line>e?C(e,oe(r,e).text.length):function Ca(r,o){var e=r.ch;return null==e||e>o?C(r.line,o):e<0?C(r.line,0):r}(o,oe(r,o.line).text.length)}function ye(r,o){for(var e=[],t=0;t<o.length;t++)e[t]=ve(r,o[t]);return e}ht.prototype.eol=function(){return this.pos>=this.string.length},ht.prototype.sol=function(){return this.pos==this.lineStart},ht.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ht.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ht.prototype.eat=function(r){var o=this.string.charAt(this.pos);if("string"==typeof r?o==r:o&&(r.test?r.test(o):r(o)))return++this.pos,o},ht.prototype.eatWhile=function(r){for(var o=this.pos;this.eat(r););return this.pos>o},ht.prototype.eatSpace=function(){for(var r=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>r},ht.prototype.skipToEnd=function(){this.pos=this.string.length},ht.prototype.skipTo=function(r){var o=this.string.indexOf(r,this.pos);if(o>-1)return this.pos=o,!0},ht.prototype.backUp=function(r){this.pos-=r},ht.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=$(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?$(this.string,this.lineStart,this.tabSize):0)},ht.prototype.indentation=function(){return $(this.string,null,this.tabSize)-(this.lineStart?$(this.string,this.lineStart,this.tabSize):0)},ht.prototype.match=function(r,o,e){if("string"!=typeof r){var i=this.string.slice(this.pos).match(r);return i&&i.index>0?null:(i&&!1!==o&&(this.pos+=i[0].length),i)}var t=function(l){return e?l.toLowerCase():l};if(t(this.string.substr(this.pos,r.length))==t(r))return!1!==o&&(this.pos+=r.length),!0},ht.prototype.current=function(){return this.string.slice(this.start,this.pos)},ht.prototype.hideFirstChars=function(r,o){this.lineStart+=r;try{return o()}finally{this.lineStart-=r}},ht.prototype.lookAhead=function(r){var o=this.lineOracle;return o&&o.lookAhead(r)},ht.prototype.baseToken=function(){var r=this.lineOracle;return r&&r.baseToken(this.pos)};var Ho=function(r,o){this.state=r,this.lookAhead=o},Or=function(r,o,e,t){this.state=o,this.doc=r,this.line=e,this.maxLookAhead=t||0,this.baseTokens=null,this.baseTokenPos=1};function Xi(r,o,e,t){var n=[r.state.modeGen],i={};Tl(r,o.text,r.doc.mode,e,function(u,f){return n.push(u,f)},i,t);for(var l=e.state,a=function(u){e.baseTokens=n;var f=r.state.overlays[u],h=1,c=0;e.state=!0,Tl(r,o.text,f.mode,e,function(d,g){for(var y=h;c<d;){var w=n[h];w>d&&n.splice(h,1,d,n[h+1],w),h+=2,c=Math.min(d,w)}if(g)if(f.opaque)n.splice(y,h-y,d,"overlay "+g),h=y+2;else for(;y<h;y+=2){var k=n[y+1];n[y+1]=(k?k+" ":"")+"overlay "+g}},i),e.state=l,e.baseTokens=null,e.baseTokenPos=1},s=0;s<r.state.overlays.length;++s)a(s);return{styles:n,classes:i.bgClass||i.textClass?i:null}}function Wr(r,o,e){if(!o.styles||o.styles[0]!=r.state.modeGen){var t=mi(r,Re(o)),n=o.text.length>r.options.maxHighlightLength&&ar(r.doc.mode,t.state),i=Xi(r,o,t);n&&(t.state=n),o.stateAfter=t.save(!n),o.styles=i.styles,i.classes?o.styleClasses=i.classes:o.styleClasses&&(o.styleClasses=null),e===r.doc.highlightFrontier&&(r.doc.modeFrontier=Math.max(r.doc.modeFrontier,++r.doc.highlightFrontier))}return o.styles}function mi(r,o,e){var t=r.doc,n=r.display;if(!t.mode.startState)return new Or(t,!0,o);var i=function Sa(r,o,e){for(var t,n,i=r.doc,l=e?-1:o-(r.doc.mode.innerMode?1e3:100),a=o;a>l;--a){if(a<=i.first)return i.first;var s=oe(i,a-1),u=s.stateAfter;if(u&&(!e||a+(u instanceof Ho?u.lookAhead:0)<=i.modeFrontier))return a;var f=$(s.text,null,r.options.tabSize);(null==n||t>f)&&(n=a-1,t=f)}return n}(r,o,e),l=i>t.first&&oe(t,i-1).stateAfter,a=l?Or.fromSaved(t,l,i):new Or(t,Er(t.mode),i);return t.iter(i,o,function(s){Po(r,s.text,a);var u=a.line;s.stateAfter=u==o-1||u%5==0||u>=n.viewFrom&&u<n.viewTo?a.save():null,a.nextLine()}),e&&(t.modeFrontier=a.line),a}function Po(r,o,e,t){var n=r.doc.mode,i=new ht(o,r.options.tabSize,e);for(i.start=i.pos=t||0,""==o&&yi(n,e.state);!i.eol();)qi(n,i,e.state),i.start=i.pos}function yi(r,o){if(r.blankLine)return r.blankLine(o);if(r.innerMode){var e=wn(r,o);if(e.mode.blankLine)return e.mode.blankLine(e.state)}}function qi(r,o,e,t){for(var n=0;n<10;n++){t&&(t[0]=wn(r,e).mode);var i=r.token(o,e);if(o.pos>o.start)return i}throw new Error("Mode "+r.name+" failed to advance stream.")}Or.prototype.lookAhead=function(r){var o=this.doc.getLine(this.line+r);return null!=o&&r>this.maxLookAhead&&(this.maxLookAhead=r),o},Or.prototype.baseToken=function(r){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=r;)this.baseTokenPos+=2;var o=this.baseTokens[this.baseTokenPos+1];return{type:o&&o.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-r}},Or.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Or.fromSaved=function(r,o,e){return o instanceof Ho?new Or(r,ar(r.mode,o.state),e,o.lookAhead):new Or(r,ar(r.mode,o),e)},Or.prototype.save=function(r){var o=!1!==r?ar(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ho(o,this.maxLookAhead):o};var kl=function(r,o,e){this.start=r.start,this.end=r.pos,this.string=r.current(),this.type=o||null,this.state=e};function Bo(r,o,e,t){var l,f,n=r.doc,i=n.mode,a=oe(n,(o=ve(n,o)).line),s=mi(r,o.line,e),u=new ht(a.text,r.options.tabSize,s);for(t&&(f=[]);(t||u.pos<o.ch)&&!u.eol();)u.start=u.pos,l=qi(i,u,s.state),t&&f.push(new kl(u,l,ar(n.mode,s.state)));return t?f:new kl(u,l,s.state)}function Ll(r,o){if(r)for(;;){var e=r.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!e)break;r=r.slice(0,e.index)+r.slice(e.index+e[0].length);var t=e[1]?"bgClass":"textClass";null==o[t]?o[t]=e[2]:new RegExp("(?:^|\\s)"+e[2]+"(?:$|\\s)").test(o[t])||(o[t]+=" "+e[2])}return r}function Tl(r,o,e,t,n,i,l){var a=e.flattenSpans;null==a&&(a=r.options.flattenSpans);var h,s=0,u=null,f=new ht(o,r.options.tabSize,t),c=r.options.addModeClass&&[null];for(""==o&&Ll(yi(e,t.state),i);!f.eol();){if(f.pos>r.options.maxHighlightLength?(a=!1,l&&Po(r,o,t,f.pos),f.pos=o.length,h=null):h=Ll(qi(e,f,t.state,c),i),c){var d=c[0].name;d&&(h="m-"+(h?d+" "+h:d))}if(!a||u!=h){for(;s<f.start;)n(s=Math.min(f.start,s+5e3),u);u=h}f.start=f.pos}for(;s<f.pos;){var g=Math.min(f.pos,s+5e3);n(g,u),s=g}}var La=!1,Jr=!1;function Ro(r,o,e){this.marker=r,this.from=o,this.to=e}function Yi(r,o){if(r)for(var e=0;e<r.length;++e){var t=r[e];if(t.marker==o)return t}}function zo(r,o){for(var e,t=0;t<r.length;++t)r[t]!=o&&(e||(e=[])).push(r[t]);return e}function Ml(r,o){if(o.full)return null;var e=p(r,o.from.line)&&oe(r,o.from.line).markedSpans,t=p(r,o.to.line)&&oe(r,o.to.line).markedSpans;if(!e&&!t)return null;var n=o.from.ch,i=o.to.ch,l=0==O(o.from,o.to),a=function Ns(r,o,e){var t;if(r)for(var n=0;n<r.length;++n){var i=r[n],l=i.marker;null!=i.from&&!(l.inclusiveLeft?i.from<=o:i.from<o)&&(i.from!=o||"bookmark"!=l.type||e&&i.marker.insertLeft)||(t||(t=[])).push(new Ro(l,i.from,null==i.to||(l.inclusiveRight?i.to>=o:i.to>o)?null:i.to))}return t}(e,n,l),s=function Fs(r,o,e){var t;if(r)for(var n=0;n<r.length;++n){var i=r[n],l=i.marker;(null==i.to||(l.inclusiveRight?i.to>=o:i.to>o)||i.from==o&&"bookmark"==l.type&&(!e||i.marker.insertLeft))&&(t||(t=[])).push(new Ro(l,null==i.from||(l.inclusiveLeft?i.from<=o:i.from<o)?null:i.from-o,null==i.to?null:i.to-o))}return t}(t,i,l),u=1==o.text.length,f=be(o.text).length+(u?n:0);if(a)for(var h=0;h<a.length;++h){var c=a[h];if(null==c.to){var d=Yi(s,c.marker);d?u&&(c.to=null==d.to?null:d.to+f):c.to=n}}if(s)for(var g=0;g<s.length;++g){var y=s[g];null!=y.to&&(y.to+=f),null==y.from?Yi(a,y.marker)||(y.from=f,u&&(a||(a=[])).push(y)):(y.from+=f,u&&(a||(a=[])).push(y))}a&&(a=Ma(a)),s&&s!=a&&(s=Ma(s));var k=[a];if(!u){var D,M=o.text.length-2;if(M>0&&a)for(var E=0;E<a.length;++E)null==a[E].to&&(D||(D=[])).push(new Ro(a[E].marker,null,null));for(var W=0;W<M;++W)k.push(D);k.push(s)}return k}function Ma(r){for(var o=0;o<r.length;++o){var e=r[o];null!=e.from&&e.from==e.to&&!1!==e.marker.clearWhenEmpty&&r.splice(o--,1)}return r.length?r:null}function Al(r){var o=r.markedSpans;if(o){for(var e=0;e<o.length;++e)o[e].marker.detachLine(r);r.markedSpans=null}}function Da(r,o){if(o){for(var e=0;e<o.length;++e)o[e].marker.attachLine(r);r.markedSpans=o}}function Ji(r){return r.inclusiveLeft?-1:0}function Qi(r){return r.inclusiveRight?1:0}function xi(r,o){var e=r.lines.length-o.lines.length;if(0!=e)return e;var t=r.find(),n=o.find(),i=O(t.from,n.from)||Ji(r)-Ji(o);return i?-i:O(t.to,n.to)||Qi(r)-Qi(o)||o.id-r.id}function Vi(r,o){var t,e=Jr&&r.markedSpans;if(e)for(var n=void 0,i=0;i<e.length;++i)(n=e[i]).marker.collapsed&&null==(o?n.from:n.to)&&(!t||xi(t,n.marker)<0)&&(t=n.marker);return t}function _o(r){return Vi(r,!0)}function $i(r){return Vi(r,!1)}function Aa(r,o){var t,e=Jr&&r.markedSpans;if(e)for(var n=0;n<e.length;++n){var i=e[n];i.marker.collapsed&&(null==i.from||i.from<o)&&(null==i.to||i.to>o)&&(!t||xi(t,i.marker)<0)&&(t=i.marker)}return t}function eo(r,o,e,t,n){var i=oe(r,o),l=Jr&&i.markedSpans;if(l)for(var a=0;a<l.length;++a){var s=l[a];if(s.marker.collapsed){var u=s.marker.find(0),f=O(u.from,e)||Ji(s.marker)-Ji(n),h=O(u.to,t)||Qi(s.marker)-Qi(n);if(!(f>=0&&h<=0||f<=0&&h>=0)&&(f<=0&&(s.marker.inclusiveRight&&n.inclusiveLeft?O(u.to,e)>=0:O(u.to,e)>0)||f>=0&&(s.marker.inclusiveRight&&n.inclusiveLeft?O(u.from,t)<=0:O(u.from,t)<0)))return!0}}}function Ir(r){for(var o;o=_o(r);)r=o.find(-1,!0).line;return r}function Nl(r,o){var e=oe(r,o),t=Ir(e);return e==t?o:Re(t)}function Fa(r,o){if(o>r.lastLine())return o;var t,e=oe(r,o);if(!jr(r,e))return o;for(;t=$i(e);)e=t.find(1,!0).line;return Re(e)+1}function jr(r,o){var e=Jr&&o.markedSpans;if(e)for(var t=void 0,n=0;n<e.length;++n)if((t=e[n]).marker.collapsed){if(null==t.from)return!0;if(!t.marker.widgetNode&&0==t.from&&t.marker.inclusiveLeft&&Go(r,o,t))return!0}}function Go(r,o,e){if(null==e.to){var t=e.marker.find(1,!0);return Go(r,t.line,Yi(t.line.markedSpans,e.marker))}if(e.marker.inclusiveRight&&e.to==o.text.length)return!0;for(var n=void 0,i=0;i<o.markedSpans.length;++i)if((n=o.markedSpans[i]).marker.collapsed&&!n.marker.widgetNode&&n.from==e.to&&(null==n.to||n.to!=e.from)&&(n.marker.inclusiveLeft||e.marker.inclusiveRight)&&Go(r,o,n))return!0}function tr(r){for(var o=0,e=(r=Ir(r)).parent,t=0;t<e.lines.length;++t){var n=e.lines[t];if(n==r)break;o+=n.height}for(var i=e.parent;i;i=(e=i).parent)for(var l=0;l<i.children.length;++l){var a=i.children[l];if(a==e)break;o+=a.height}return o}function bi(r){if(0==r.height)return 0;for(var e,o=r.text.length,t=r;e=_o(t);){var n=e.find(0,!0);t=n.from.line,o+=n.from.ch-n.to.ch}for(t=r;e=$i(t);){var i=e.find(0,!0);o-=t.text.length-i.from.ch,o+=(t=i.to.line).text.length-i.to.ch}return o}function Hr(r){var o=r.display,e=r.doc;o.maxLine=oe(e,e.first),o.maxLineLength=bi(o.maxLine),o.maxLineChanged=!0,e.iter(function(t){var n=bi(t);n>o.maxLineLength&&(o.maxLineLength=n,o.maxLine=t)})}var Vr=function(r,o,e){this.text=r,Da(this,o),this.height=e?e(this):1};function wi(r){r.parent=null,Al(r)}Vr.prototype.lineNo=function(){return Re(this)},Xt(Vr);var Es={},Os={};function Ea(r,o){if(!r||/^\s*$/.test(r))return null;var e=o.addModeClass?Os:Es;return e[r]||(e[r]=r.replace(/\S+/g,"cm-$&"))}function Oa(r,o){var e=ne("span",null,null,P?"padding-right: .1px":null),t={pre:ne("pre",[e],"CodeMirror-line"),content:e,col:0,pos:0,cm:r,trailingSpace:!1,splitSpaces:r.getOption("lineWrapping")};o.measure={};for(var n=0;n<=(o.rest?o.rest.length:0);n++){var i=n?o.rest[n-1]:o.line,l=void 0;t.pos=0,t.addToken=Ia,Wo(r.display.measure)&&(l=lt(i,r.doc.direction))&&(t.addToken=Is(t.addToken,l)),t.map=[],Hs(i,t,Wr(r,i,o!=r.display.externalMeasured&&Re(i))),i.styleClasses&&(i.styleClasses.bgClass&&(t.bgClass=J(i.styleClasses.bgClass,t.bgClass||"")),i.styleClasses.textClass&&(t.textClass=J(i.styleClasses.textClass,t.textClass||""))),0==t.map.length&&t.map.push(0,0,t.content.appendChild(Sl(r.display.measure))),0==n?(o.measure.map=t.map,o.measure.cache={}):((o.measure.maps||(o.measure.maps=[])).push(t.map),(o.measure.caches||(o.measure.caches=[])).push({}))}if(P){var s=t.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(t.content.className="cm-tab-wrap-hack")}return Qe(r,"renderLine",r,o.line,t.pre),t.pre.className&&(t.textClass=J(t.pre.className,t.textClass||"")),t}function Wa(r){var o=T("span","\u2022","cm-invalidchar");return o.title="\\u"+r.charCodeAt(0).toString(16),o.setAttribute("aria-label",o.title),o}function Ia(r,o,e,t,n,i,l){if(o){var f,a=r.splitSpaces?function Ws(r,o){if(r.length>1&&!/  /.test(r))return r;for(var e=o,t="",n=0;n<r.length;n++){var i=r.charAt(n);" "==i&&e&&(n==r.length-1||32==r.charCodeAt(n+1))&&(i="\xa0"),t+=i,e=" "==i}return t}(o,r.trailingSpace):o,s=r.cm.state.specialChars,u=!1;if(s.test(o)){f=document.createDocumentFragment();for(var h=0;;){s.lastIndex=h;var c=s.exec(o),d=c?c.index-h:o.length-h;if(d){var g=document.createTextNode(a.slice(h,h+d));f.appendChild(te&&j<9?T("span",[g]):g),r.map.push(r.pos,r.pos+d,g),r.col+=d,r.pos+=d}if(!c)break;h+=d+1;var y=void 0;if("\t"==c[0]){var w=r.cm.options.tabSize,k=w-r.col%w;(y=f.appendChild(T("span",bt(k),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","\t"),r.col+=k}else"\r"==c[0]||"\n"==c[0]?((y=f.appendChild(T("span","\r"==c[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",c[0]),r.col+=1):((y=r.cm.options.specialCharPlaceholder(c[0])).setAttribute("cm-text",c[0]),f.appendChild(te&&j<9?T("span",[y]):y),r.col+=1);r.map.push(r.pos,r.pos+1,y),r.pos++}}else r.col+=o.length,f=document.createTextNode(a),r.map.push(r.pos,r.pos+o.length,f),te&&j<9&&(u=!0),r.pos+=o.length;if(r.trailingSpace=32==a.charCodeAt(o.length-1),e||t||n||u||i||l){var M=e||"";t&&(M+=t),n&&(M+=n);var D=T("span",[f],M,i);if(l)for(var E in l)l.hasOwnProperty(E)&&"style"!=E&&"class"!=E&&D.setAttribute(E,l[E]);return r.content.appendChild(D)}r.content.appendChild(f)}}function Is(r,o){return function(e,t,n,i,l,a,s){n=n?n+" cm-force-border":"cm-force-border";for(var u=e.pos,f=u+t.length;;){for(var h=void 0,c=0;c<o.length&&!((h=o[c]).to>u&&h.from<=u);c++);if(h.to>=f)return r(e,t,n,i,l,a,s);r(e,t.slice(0,h.to-u),n,i,null,a,s),i=null,t=t.slice(h.to-u),u=h.to}}}function Ha(r,o,e,t){var n=!t&&e.widgetNode;n&&r.map.push(r.pos,r.pos+o,n),!t&&r.cm.display.input.needsContentAttribute&&(n||(n=r.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",e.id)),n&&(r.cm.display.input.setUneditable(n),r.content.appendChild(n)),r.pos+=o,r.trailingSpace=!1}function Hs(r,o,e){var t=r.markedSpans,n=r.text,i=0;if(t)for(var h,c,g,y,w,k,M,a=n.length,s=0,u=1,f="",d=0;;){if(d==s){g=y=w=c="",M=null,k=null,d=1/0;for(var D=[],E=void 0,W=0;W<t.length;++W){var I=t[W],_=I.marker;if("bookmark"==_.type&&I.from==s&&_.widgetNode)D.push(_);else if(I.from<=s&&(null==I.to||I.to>s||_.collapsed&&I.to==s&&I.from==s)){if(null!=I.to&&I.to!=s&&d>I.to&&(d=I.to,y=""),_.className&&(g+=" "+_.className),_.css&&(c=(c?c+";":"")+_.css),_.startStyle&&I.from==s&&(w+=" "+_.startStyle),_.endStyle&&I.to==d&&(E||(E=[])).push(_.endStyle,I.to),_.title&&((M||(M={})).title=_.title),_.attributes)for(var q in _.attributes)(M||(M={}))[q]=_.attributes[q];_.collapsed&&(!k||xi(k.marker,_)<0)&&(k=I)}else I.from>s&&d>I.from&&(d=I.from)}if(E)for(var he=0;he<E.length;he+=2)E[he+1]==d&&(y+=" "+E[he]);if(!k||k.from==s)for(var me=0;me<D.length;++me)Ha(o,0,D[me]);if(k&&(k.from||0)==s){if(Ha(o,(null==k.to?a+1:k.to)-s,k.marker,null==k.from),null==k.to)return;k.to==s&&(k=!1)}}if(s>=a)break;for(var Xe=Math.min(a,d);;){if(f){var Ne=s+f.length;if(!k){var ze=Ne>Xe?f.slice(0,Xe-s):f;o.addToken(o,ze,h?h+g:g,w,s+ze.length==d?y:"",c,M)}if(Ne>=Xe){f=f.slice(Xe-s),s=Xe;break}s=Ne,w=""}f=n.slice(i,i=e[u++]),h=Ea(e[u++],o.cm.options)}}else for(var l=1;l<e.length;l+=2)o.addToken(o,n.slice(i,i=e[l]),Ea(e[l+1],o.cm.options))}function El(r,o,e){this.line=o,this.rest=function Kr(r){for(var o,e;o=$i(r);)r=o.find(1,!0).line,(e||(e=[])).push(r);return e}(o),this.size=this.rest?Re(be(this.rest))-e+1:1,this.node=this.text=null,this.hidden=jr(r,o)}function Uo(r,o,e){for(var n,t=[],i=o;i<e;i=n){var l=new El(r.doc,oe(r.doc,i),i);n=i+l.size,t.push(l)}return t}var _n=null;var to=null;function It(r,o){var e=pi(r,o);if(e.length){var n,t=Array.prototype.slice.call(arguments,2);_n?n=_n.delayedCallbacks:to?n=to:(n=to=[],setTimeout(ro,0));for(var i=function(a){n.push(function(){return e[a].apply(null,t)})},l=0;l<e.length;++l)i(l)}}function ro(){var r=to;to=null;for(var o=0;o<r.length;++o)r[o]()}function Ft(r,o,e,t){for(var n=0;n<o.changes.length;n++){var i=o.changes[n];"text"==i?Bs(r,o):"gutter"==i?Ba(r,o,e,t):"class"==i?jo(r,o):"widget"==i&&Ol(r,o,t)}o.changes=null}function no(r){return r.node==r.text&&(r.node=T("div",null,null,"position: relative"),r.text.parentNode&&r.text.parentNode.replaceChild(r.node,r.text),r.node.appendChild(r.text),te&&j<8&&(r.node.style.zIndex=2)),r.node}function Si(r,o){var e=r.display.externalMeasured;return e&&e.line==o.line?(r.display.externalMeasured=null,o.measure=e.measure,e.built):Oa(r,o)}function Bs(r,o){var e=o.text.className,t=Si(r,o);o.text==o.node&&(o.node=t.pre),o.text.parentNode.replaceChild(t.pre,o.text),o.text=t.pre,t.bgClass!=o.bgClass||t.textClass!=o.textClass?(o.bgClass=t.bgClass,o.textClass=t.textClass,jo(r,o)):e&&(o.text.className=e)}function jo(r,o){(function Pa(r,o){var e=o.bgClass?o.bgClass+" "+(o.line.bgClass||""):o.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),o.background)e?o.background.className=e:(o.background.parentNode.removeChild(o.background),o.background=null);else if(e){var t=no(o);o.background=t.insertBefore(T("div",null,e),t.firstChild),r.display.input.setUneditable(o.background)}})(r,o),o.line.wrapClass?no(o).className=o.line.wrapClass:o.node!=o.text&&(o.node.className=""),o.text.className=(o.textClass?o.textClass+" "+(o.line.textClass||""):o.line.textClass)||""}function Ba(r,o,e,t){if(o.gutter&&(o.node.removeChild(o.gutter),o.gutter=null),o.gutterBackground&&(o.node.removeChild(o.gutterBackground),o.gutterBackground=null),o.line.gutterClass){var n=no(o);o.gutterBackground=T("div",null,"CodeMirror-gutter-background "+o.line.gutterClass,"left: "+(r.options.fixedGutter?t.fixedPos:-t.gutterTotalWidth)+"px; width: "+t.gutterTotalWidth+"px"),r.display.input.setUneditable(o.gutterBackground),n.insertBefore(o.gutterBackground,o.text)}var i=o.line.gutterMarkers;if(r.options.lineNumbers||i){var l=no(o),a=o.gutter=T("div",null,"CodeMirror-gutter-wrapper","left: "+(r.options.fixedGutter?t.fixedPos:-t.gutterTotalWidth)+"px");if(a.setAttribute("aria-hidden","true"),r.display.input.setUneditable(a),l.insertBefore(a,o.text),o.line.gutterClass&&(a.className+=" "+o.line.gutterClass),r.options.lineNumbers&&(!i||!i["CodeMirror-linenumbers"])&&(o.lineNumber=a.appendChild(T("div",b(r.options,e),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+t.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+r.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<r.display.gutterSpecs.length;++s){var u=r.display.gutterSpecs[s].className,f=i.hasOwnProperty(u)&&i[u];f&&a.appendChild(T("div",[f],"CodeMirror-gutter-elt","left: "+t.gutterLeft[u]+"px; width: "+t.gutterWidth[u]+"px"))}}}function Ol(r,o,e){o.alignable&&(o.alignable=null);for(var t=m("CodeMirror-linewidget"),n=o.node.firstChild,i=void 0;n;n=i)i=n.nextSibling,t.test(n.className)&&o.node.removeChild(n);za(r,o,e)}function Ra(r,o,e,t){var n=Si(r,o);return o.text=o.node=n.pre,n.bgClass&&(o.bgClass=n.bgClass),n.textClass&&(o.textClass=n.textClass),jo(r,o),Ba(r,o,e,t),za(r,o,t),o.node}function za(r,o,e){if(_a(r,o.line,o,e,!0),o.rest)for(var t=0;t<o.rest.length;t++)_a(r,o.rest[t],o,e,!1)}function _a(r,o,e,t,n){if(o.widgets)for(var i=no(e),l=0,a=o.widgets;l<a.length;++l){var s=a[l],u=T("div",[s.node],"CodeMirror-linewidget"+(s.className?" "+s.className:""));s.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),Ga(s,u,e,t),r.display.input.setUneditable(u),n&&s.above?i.insertBefore(u,e.gutter||e.text):i.appendChild(u),It(s,"redraw")}}function Ga(r,o,e,t){if(r.noHScroll){(e.alignable||(e.alignable=[])).push(o);var n=t.wrapperWidth;o.style.left=t.fixedPos+"px",r.coverGutter||(n-=t.gutterTotalWidth,o.style.paddingLeft=t.gutterTotalWidth+"px"),o.style.width=n+"px"}r.coverGutter&&(o.style.zIndex=5,o.style.position="relative",r.noHScroll||(o.style.marginLeft=-t.gutterTotalWidth+"px"))}function ki(r){if(null!=r.height)return r.height;var o=r.doc.cm;if(!o)return 0;if(!K(document.body,r.node)){var e="position: relative;";r.coverGutter&&(e+="margin-left: -"+o.display.gutters.offsetWidth+"px;"),r.noHScroll&&(e+="width: "+o.display.wrapper.clientWidth+"px;"),Ze(o.display.measure,T("div",[r.node],null,e))}return r.height=r.node.parentNode.offsetHeight}function $r(r,o){for(var e=qt(o);e!=r.wrapper;e=e.parentNode)if(!e||1==e.nodeType&&"true"==e.getAttribute("cm-ignore-events")||e.parentNode==r.sizer&&e!=r.mover)return!0}function Cn(r){return r.lineSpace.offsetTop}function Pr(r){return r.mover.offsetHeight-r.lineSpace.offsetHeight}function io(r){if(r.cachedPaddingH)return r.cachedPaddingH;var o=Ze(r.measure,T("pre","x","CodeMirror-line-like")),e=window.getComputedStyle?window.getComputedStyle(o):o.currentStyle,t={left:parseInt(e.paddingLeft),right:parseInt(e.paddingRight)};return!isNaN(t.left)&&!isNaN(t.right)&&(r.cachedPaddingH=t),t}function br(r){return 50-r.display.nativeBarWidth}function Sn(r){return r.display.scroller.clientWidth-br(r)-r.display.barWidth}function wr(r){return r.display.scroller.clientHeight-br(r)-r.display.barHeight}function Xo(r,o,e){if(r.line==o)return{map:r.measure.map,cache:r.measure.cache};if(r.rest){for(var t=0;t<r.rest.length;t++)if(r.rest[t]==o)return{map:r.measure.maps[t],cache:r.measure.caches[t]};for(var n=0;n<r.rest.length;n++)if(Re(r.rest[n])>e)return{map:r.measure.maps[n],cache:r.measure.caches[n],before:!0}}}function Wl(r,o,e,t){return Cr(r,Un(r,o),e,t)}function Il(r,o){if(o>=r.display.viewFrom&&o<r.display.viewTo)return r.display.view[en(r,o)];var e=r.display.externalMeasured;return e&&o>=e.lineN&&o<e.lineN+e.size?e:void 0}function Un(r,o){var e=Re(o),t=Il(r,e);t&&!t.text?t=null:t&&t.changes&&(Ft(r,t,e,kn(r)),r.curOp.forceUpdate=!0),t||(t=function Rs(r,o){var e=Re(o=Ir(o)),t=r.display.externalMeasured=new El(r.doc,o,e);t.lineN=e;var n=t.built=Oa(r,t);return t.text=n.pre,Ze(r.display.lineMeasure,n.pre),t}(r,o));var n=Xo(t,o,e);return{line:o,view:t,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Cr(r,o,e,t,n){o.before&&(e=-1);var l,i=e+(t||"");return o.cache.hasOwnProperty(i)?l=o.cache[i]:(o.rect||(o.rect=o.view.text.getBoundingClientRect()),o.hasHeights||(function Gn(r,o,e){var t=r.options.lineWrapping,n=t&&Sn(r);if(!o.measure.heights||t&&o.measure.width!=n){var i=o.measure.heights=[];if(t){o.measure.width=n;for(var l=o.text.firstChild.getClientRects(),a=0;a<l.length-1;a++){var s=l[a],u=l[a+1];Math.abs(s.bottom-u.bottom)>2&&i.push((s.bottom+u.top)/2-e.top)}}i.push(e.bottom-e.top)}}(r,o.view,o.rect),o.hasHeights=!0),(l=function Ka(r,o,e,t){var u,n=Br(o.map,e,t),i=n.node,l=n.start,a=n.end,s=n.collapse;if(3==i.nodeType){for(var f=0;f<4;f++){for(;l&&X(o.line.text.charAt(n.coverStart+l));)--l;for(;n.coverStart+a<n.coverEnd&&X(o.line.text.charAt(n.coverStart+a));)++a;if((u=te&&j<9&&0==l&&a==n.coverEnd-n.coverStart?i.parentNode.getBoundingClientRect():Ua(x(i,l,a).getClientRects(),t)).left||u.right||0==l)break;a=l,l-=1,s="right"}te&&j<11&&(u=function zs(r,o){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function Io(r){if(null!=Ur)return Ur;var o=Ze(r,T("span","x")),e=o.getBoundingClientRect(),t=x(o,0,1).getBoundingClientRect();return Ur=Math.abs(e.left-t.left)>1}(r))return o;var e=screen.logicalXDPI/screen.deviceXDPI,t=screen.logicalYDPI/screen.deviceYDPI;return{left:o.left*e,right:o.right*e,top:o.top*t,bottom:o.bottom*t}}(r.display.measure,u))}else{var h;l>0&&(s=t="right"),u=r.options.lineWrapping&&(h=i.getClientRects()).length>1?h["right"==t?h.length-1:0]:i.getBoundingClientRect()}if(te&&j<9&&!l&&(!u||!u.left&&!u.right)){var c=i.parentNode.getClientRects()[0];u=c?{left:c.left,right:c.left+kr(r.display),top:c.top,bottom:c.bottom}:Kn}for(var d=u.top-o.rect.top,g=u.bottom-o.rect.top,y=(d+g)/2,w=o.view.measure.heights,k=0;k<w.length-1&&!(y<w[k]);k++);var E={left:("right"==s?u.right:u.left)-o.rect.left,right:("left"==s?u.left:u.right)-o.rect.left,top:k?w[k-1]:0,bottom:w[k]};return!u.left&&!u.right&&(E.bogus=!0),r.options.singleCursorHeightPerLine||(E.rtop=d,E.rbottom=g),E}(r,o,e,t)).bogus||(o.cache[i]=l)),{left:l.left,right:l.right,top:n?l.rtop:l.top,bottom:n?l.rbottom:l.bottom}}var Xn,Kn={left:0,right:0,top:0,bottom:0};function Br(r,o,e){for(var t,n,i,l,a,s,u=0;u<r.length;u+=3)if(s=r[u+1],o<(a=r[u])?(n=0,i=1,l="left"):o<s?i=1+(n=o-a):(u==r.length-3||o==s&&r[u+3]>o)&&(n=(i=s-a)-1,o>=s&&(l="right")),null!=n){if(t=r[u+2],a==s&&e==(t.insertLeft?"left":"right")&&(l=e),"left"==e&&0==n)for(;u&&r[u-2]==r[u-3]&&r[u-1].insertLeft;)t=r[2+(u-=3)],l="left";if("right"==e&&n==s-a)for(;u<r.length-3&&r[u+3]==r[u+4]&&!r[u+5].insertLeft;)t=r[(u+=3)+2],l="right";break}return{node:t,start:n,end:i,collapse:l,coverStart:a,coverEnd:s}}function Ua(r,o){var e=Kn;if("left"==o)for(var t=0;t<r.length&&(e=r[t]).left==e.right;t++);else for(var n=r.length-1;n>=0&&(e=r[n]).left==e.right;n--);return e}function ja(r){if(r.measure&&(r.measure.cache={},r.measure.heights=null,r.rest))for(var o=0;o<r.rest.length;o++)r.measure.caches[o]={}}function Xa(r){r.display.externalMeasure=null,V(r.display.lineMeasure);for(var o=0;o<r.display.view.length;o++)ja(r.display.view[o])}function Li(r){Xa(r),r.display.cachedCharWidth=r.display.cachedTextHeight=r.display.cachedPaddingH=null,r.options.lineWrapping||(r.display.maxLineChanged=!0),r.display.lineNumChars=null}function Hl(r){return ce&&ut?-(r.body.getBoundingClientRect().left-parseInt(getComputedStyle(r.body).marginLeft)):r.defaultView.pageXOffset||(r.documentElement||r.body).scrollLeft}function Ti(r){return ce&&ut?-(r.body.getBoundingClientRect().top-parseInt(getComputedStyle(r.body).marginTop)):r.defaultView.pageYOffset||(r.documentElement||r.body).scrollTop}function qo(r){var e=Ir(r).widgets,t=0;if(e)for(var n=0;n<e.length;++n)e[n].above&&(t+=ki(e[n]));return t}function oo(r,o,e,t,n){if(!n){var i=qo(o);e.top+=i,e.bottom+=i}if("line"==t)return e;t||(t="local");var l=tr(o);if("local"==t?l+=Cn(r.display):l-=r.display.viewOffset,"page"==t||"window"==t){var a=r.display.lineSpace.getBoundingClientRect();l+=a.top+("window"==t?0:Ti(vt(r)));var s=a.left+("window"==t?0:Hl(vt(r)));e.left+=s,e.right+=s}return e.top+=l,e.bottom+=l,e}function Yo(r,o,e){if("div"==e)return o;var t=o.left,n=o.top;if("page"==e)t-=Hl(vt(r)),n-=Ti(vt(r));else if("local"==e||!e){var i=r.display.sizer.getBoundingClientRect();t+=i.left,n+=i.top}var l=r.display.lineSpace.getBoundingClientRect();return{left:t-l.left,top:n-l.top}}function jn(r,o,e,t,n){return t||(t=oe(r.doc,o.line)),oo(r,t,Wl(r,t,o.ch,n),e)}function Sr(r,o,e,t,n,i){function l(g,y){var w=Cr(r,n,g,y?"right":"left",i);return y?w.left=w.right:w.right=w.left,oo(r,t,w,e)}t=t||oe(r.doc,o.line),n||(n=Un(r,t));var a=lt(t,r.doc.direction),s=o.ch,u=o.sticky;if(s>=t.text.length?(s=t.text.length,u="before"):s<=0&&(s=0,u="after"),!a)return l("before"==u?s-1:s,"before"==u);function f(g,y,w){return l(w?g-1:g,1==a[y].level!=w)}var h=Ct(a,s,u),c=wt,d=f(s,h,"before"==u);return null!=c&&(d.other=f(s,c,"before"!=u)),d}function lo(r,o){var e=0;o=ve(r.doc,o),r.options.lineWrapping||(e=kr(r.display)*o.ch);var t=oe(r.doc,o.line),n=tr(t)+Cn(r.display);return{left:e,right:e,top:n,bottom:n+t.height}}function dr(r,o,e,t,n){var i=C(r,o,e);return i.xRel=n,t&&(i.outside=t),i}function Zo(r,o,e){var t=r.doc;if((e+=r.display.viewOffset)<0)return dr(t.first,0,null,-1,-1);var n=Wt(t,e),i=t.first+t.size-1;if(n>i)return dr(t.first+t.size-1,oe(t,i).text.length,null,1,1);o<0&&(o=0);for(var l=oe(t,n);;){var a=qa(r,l,n,o,e),s=Aa(l,a.ch+(a.xRel>0||a.outside>0?1:0));if(!s)return a;var u=s.find(1);if(u.line==n)return u;l=oe(t,n=u.line)}}function Jo(r,o,e,t){t-=qo(o);var n=o.text.length,i=fe(function(l){return Cr(r,e,l-1).bottom<=t},n,0);return{begin:i,end:n=fe(function(l){return Cr(r,e,l).top>t},i,n)}}function Qo(r,o,e,t){return e||(e=Un(r,o)),Jo(r,o,e,oo(r,o,Cr(r,e,t),"line").top)}function Vo(r,o,e,t){return!(r.bottom<=e)&&(r.top>e||(t?r.left:r.right)>o)}function qa(r,o,e,t,n){n-=tr(o);var i=Un(r,o),l=qo(o),a=0,s=o.text.length,u=!0,f=lt(o,r.doc.direction);if(f){var h=(r.options.lineWrapping?_s:Pl)(r,o,e,i,f,t,n);a=(u=1!=h.level)?h.from:h.to-1,s=u?h.to:h.from-1}var y,w,c=null,d=null,g=fe(function(W){var I=Cr(r,i,W);return I.top+=l,I.bottom+=l,!!Vo(I,t,n,!1)&&(I.top<=n&&I.left<=t&&(c=W,d=I),!0)},a,s),k=!1;if(d){var M=t-d.left<d.right-t,D=M==u;g=c+(D?0:1),w=D?"after":"before",y=M?d.left:d.right}else{!u&&(g==s||g==a)&&g++,w=0==g?"after":g==o.text.length?"before":Cr(r,i,g-(u?1:0)).bottom+l<=n==u?"after":"before";var E=Sr(r,C(e,g,w),"line",o,i);y=E.left,k=n<E.top?-1:n>=E.bottom?1:0}return dr(e,g=we(o.text,g,1),w,k,t-y)}function Pl(r,o,e,t,n,i,l){var a=fe(function(h){var c=n[h],d=1!=c.level;return Vo(Sr(r,C(e,d?c.to:c.from,d?"before":"after"),"line",o,t),i,l,!0)},0,n.length-1),s=n[a];if(a>0){var u=1!=s.level,f=Sr(r,C(e,u?s.from:s.to,u?"after":"before"),"line",o,t);Vo(f,i,l,!0)&&f.top>l&&(s=n[a-1])}return s}function _s(r,o,e,t,n,i,l){var a=Jo(r,o,t,l),s=a.begin,u=a.end;/\s/.test(o.text.charAt(u-1))&&u--;for(var f=null,h=null,c=0;c<n.length;c++){var d=n[c];if(!(d.from>=u||d.to<=s)){var y=Cr(r,t,1!=d.level?Math.min(u,d.to)-1:Math.max(s,d.from)).right,w=y<i?i-y+1e9:y-i;(!f||h>w)&&(f=d,h=w)}}return f||(f=n[n.length-1]),f.from<s&&(f={from:s,to:f.to,level:f.level}),f.to>u&&(f={from:f.from,to:u,level:f.level}),f}function Mi(r){if(null!=r.cachedTextHeight)return r.cachedTextHeight;if(null==Xn){Xn=T("pre",null,"CodeMirror-line-like");for(var o=0;o<49;++o)Xn.appendChild(document.createTextNode("x")),Xn.appendChild(T("br"));Xn.appendChild(document.createTextNode("x"))}Ze(r.measure,Xn);var e=Xn.offsetHeight/50;return e>3&&(r.cachedTextHeight=e),V(r.measure),e||1}function kr(r){if(null!=r.cachedCharWidth)return r.cachedCharWidth;var o=T("span","xxxxxxxxxx"),e=T("pre",[o],"CodeMirror-line-like");Ze(r.measure,e);var t=o.getBoundingClientRect(),n=(t.right-t.left)/10;return n>2&&(r.cachedCharWidth=n),n||10}function kn(r){for(var o=r.display,e={},t={},n=o.gutters.clientLeft,i=o.gutters.firstChild,l=0;i;i=i.nextSibling,++l){var a=r.display.gutterSpecs[l].className;e[a]=i.offsetLeft+i.clientLeft+n,t[a]=i.clientWidth}return{fixedPos:Ln(o),gutterTotalWidth:o.gutters.offsetWidth,gutterLeft:e,gutterWidth:t,wrapperWidth:o.wrapper.clientWidth}}function Ln(r){return r.scroller.getBoundingClientRect().left-r.sizer.getBoundingClientRect().left}function $o(r){var o=Mi(r.display),e=r.options.lineWrapping,t=e&&Math.max(5,r.display.scroller.clientWidth/kr(r.display)-3);return function(n){if(jr(r.doc,n))return 0;var i=0;if(n.widgets)for(var l=0;l<n.widgets.length;l++)n.widgets[l].height&&(i+=n.widgets[l].height);return e?i+(Math.ceil(n.text.length/t)||1)*o:i+o}}function ao(r){var o=r.doc,e=$o(r);o.iter(function(t){var n=e(t);n!=t.height&&zt(t,n)})}function Tn(r,o,e,t){var n=r.display;if(!e&&"true"==qt(o).getAttribute("cm-not-content"))return null;var i,l,a=n.lineSpace.getBoundingClientRect();try{i=o.clientX-a.left,l=o.clientY-a.top}catch{return null}var u,s=Zo(r,i,l);if(t&&s.xRel>0&&(u=oe(r.doc,s.line).text).length==s.ch){var f=$(u,u.length,r.options.tabSize)-u.length;s=C(s.line,Math.max(0,Math.round((i-io(r.display).left)/kr(r.display))-f))}return s}function en(r,o){if(o>=r.display.viewTo||(o-=r.display.viewFrom)<0)return null;for(var e=r.display.view,t=0;t<e.length;t++)if((o-=e[t].size)<0)return t}function At(r,o,e,t){null==o&&(o=r.doc.first),null==e&&(e=r.doc.first+r.doc.size),t||(t=0);var n=r.display;if(t&&e<n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>o)&&(n.updateLineNumbers=o),r.curOp.viewChanged=!0,o>=n.viewTo)Jr&&Nl(r.doc,o)<n.viewTo&&kt(r);else if(e<=n.viewFrom)Jr&&Fa(r.doc,e+t)>n.viewFrom?kt(r):(n.viewFrom+=t,n.viewTo+=t);else if(o<=n.viewFrom&&e>=n.viewTo)kt(r);else if(o<=n.viewFrom){var i=Rr(r,e,e+t,1);i?(n.view=n.view.slice(i.index),n.viewFrom=i.lineN,n.viewTo+=t):kt(r)}else if(e>=n.viewTo){var l=Rr(r,o,o,-1);l?(n.view=n.view.slice(0,l.index),n.viewTo=l.lineN):kt(r)}else{var a=Rr(r,o,o,-1),s=Rr(r,e,e+t,1);a&&s?(n.view=n.view.slice(0,a.index).concat(Uo(r,a.lineN,s.lineN)).concat(n.view.slice(s.index)),n.viewTo+=t):kt(r)}var u=n.externalMeasured;u&&(e<u.lineN?u.lineN+=t:o<u.lineN+u.size&&(n.externalMeasured=null))}function sr(r,o,e){r.curOp.viewChanged=!0;var t=r.display,n=r.display.externalMeasured;if(n&&o>=n.lineN&&o<n.lineN+n.size&&(t.externalMeasured=null),!(o<t.viewFrom||o>=t.viewTo)){var i=t.view[en(r,o)];if(null!=i.node){var l=i.changes||(i.changes=[]);-1==A(l,e)&&l.push(e)}}}function kt(r){r.display.viewFrom=r.display.viewTo=r.doc.first,r.display.view=[],r.display.viewOffset=0}function Rr(r,o,e,t){var i,n=en(r,o),l=r.display.view;if(!Jr||e==r.doc.first+r.doc.size)return{index:n,lineN:e};for(var a=r.display.viewFrom,s=0;s<n;s++)a+=l[s].size;if(a!=o){if(t>0){if(n==l.length-1)return null;i=a+l[n].size-o,n++}else i=a-o;o+=i,e+=i}for(;Nl(r.doc,e)!=e;){if(n==(t<0?0:l.length-1))return null;e+=t*l[n-(t<0?1:0)].size,n+=t}return{index:n,lineN:e}}function so(r){for(var o=r.display.view,e=0,t=0;t<o.length;t++){var n=o[t];!n.hidden&&(!n.node||n.changes)&&++e}return e}function uo(r){r.display.input.showSelection(r.display.input.prepareSelection())}function Bl(r,o){void 0===o&&(o=!0);var e=r.doc,t={},n=t.cursors=document.createDocumentFragment(),i=t.selection=document.createDocumentFragment(),l=r.options.$customCursor;l&&(o=!0);for(var a=0;a<e.sel.ranges.length;a++)if(o||a!=e.sel.primIndex){var s=e.sel.ranges[a];if(!(s.from().line>=r.display.viewTo||s.to().line<r.display.viewFrom)){var u=s.empty();if(l){var f=l(r,s);f&&qn(r,f,n)}else(u||r.options.showCursorWhenSelecting)&&qn(r,s.head,n);u||Rl(r,s,i)}}return t}function qn(r,o,e){var t=Sr(r,o,"div",null,null,!r.options.singleCursorHeightPerLine),n=e.appendChild(T("div","\xa0","CodeMirror-cursor"));if(n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.height=Math.max(0,t.bottom-t.top)*r.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(r.getWrapperElement().className)){var i=jn(r,o,"div",null,null),l=i.right-i.left;n.style.width=(l>0?l:r.defaultCharWidth())+"px"}if(t.other){var a=e.appendChild(T("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=t.other.left+"px",a.style.top=t.other.top+"px",a.style.height=.85*(t.other.bottom-t.other.top)+"px"}}function fo(r,o){return r.top-o.top||r.left-o.left}function Rl(r,o,e){var t=r.display,n=r.doc,i=document.createDocumentFragment(),l=io(r.display),a=l.left,s=Math.max(t.sizerWidth,Sn(r)-t.sizer.offsetLeft)-l.right,u="ltr"==n.direction;function f(D,E,W,I){E<0&&(E=0),E=Math.round(E),I=Math.round(I),i.appendChild(T("div",null,"CodeMirror-selected","position: absolute; left: "+D+"px;\n                             top: "+E+"px; width: "+(W??s-D)+"px;\n                             height: "+(I-E)+"px"))}function h(D,E,W){var q,he,I=oe(n,D),_=I.text.length;function me(ze,et){return jn(r,C(D,ze),"div",I,et)}function Xe(ze,et,Fe){var _e=Qo(r,I,null,ze),Ee="ltr"==et==("after"==Fe)?"left":"right";return me("after"==Fe?_e.begin:_e.end-(/\s/.test(I.text.charAt(_e.end-1))?2:1),Ee)[Ee]}var Ne=lt(I,n.direction);return function $t(r,o,e,t){if(!r)return t(o,e,"ltr",0);for(var n=!1,i=0;i<r.length;++i){var l=r[i];(l.from<e&&l.to>o||o==e&&l.to==o)&&(t(Math.max(l.from,o),Math.min(l.to,e),1==l.level?"rtl":"ltr",i),n=!0)}n||t(o,e,"ltr")}(Ne,E||0,W??_,function(ze,et,Fe,_e){var Ee="ltr"==Fe,Le=me(ze,Ee?"left":"right"),He=me(et-1,Ee?"right":"left"),it=null==E&&0==ze,Tt=null==W&&et==_,Mt=0==_e,Zt=!Ne||_e==Ne.length-1;if(He.top-Le.top<=3){var st=(u?it:Tt)&&Mt?a:(Ee?Le:He).left;f(st,Le.top,((u?Tt:it)&&Zt?s:(Ee?He:Le).right)-st,Le.bottom)}else{var ir,Dt,Ar,Ut;Ee?(ir=u&&it&&Mt?a:Le.left,Dt=u?s:Xe(ze,Fe,"before"),Ar=u?a:Xe(et,Fe,"after"),Ut=u&&Tt&&Zt?s:He.right):(ir=u?Xe(ze,Fe,"before"):a,Dt=!u&&it&&Mt?s:Le.right,Ar=!u&&Tt&&Zt?a:He.left,Ut=u?Xe(et,Fe,"after"):s),f(ir,Le.top,Dt-ir,Le.bottom),Le.bottom<He.top&&f(a,Le.bottom,null,He.top),f(Ar,He.top,Ut-Ar,He.bottom)}(!q||fo(Le,q)<0)&&(q=Le),fo(He,q)<0&&(q=He),(!he||fo(Le,he)<0)&&(he=Le),fo(He,he)<0&&(he=He)}),{start:q,end:he}}var c=o.from(),d=o.to();if(c.line==d.line)h(c.line,c.ch,d.ch);else{var g=oe(n,c.line),y=oe(n,d.line),w=Ir(g)==Ir(y),k=h(c.line,c.ch,w?g.text.length+1:null).end,M=h(d.line,w?0:null,d.ch).start;w&&(k.top<M.top-2?(f(k.right,k.top,null,k.bottom),f(a,M.top,M.left,M.bottom)):f(k.right,k.top,M.left-k.right,k.bottom)),k.bottom<M.top&&f(a,k.bottom,null,M.top)}e.appendChild(i)}function Di(r){if(r.state.focused){var o=r.display;clearInterval(o.blinker);var e=!0;o.cursorDiv.style.visibility="",r.options.cursorBlinkRate>0?o.blinker=setInterval(function(){r.hasFocus()||Dn(r),o.cursorDiv.style.visibility=(e=!e)?"":"hidden"},r.options.cursorBlinkRate):r.options.cursorBlinkRate<0&&(o.cursorDiv.style.visibility="hidden")}}function Ya(r){r.hasFocus()||(r.display.input.focus(),r.state.focused||el(r))}function ho(r){r.state.delayingBlurEvent=!0,setTimeout(function(){r.state.delayingBlurEvent&&(r.state.delayingBlurEvent=!1,r.state.focused&&Dn(r))},100)}function el(r,o){r.state.delayingBlurEvent&&!r.state.draggingText&&(r.state.delayingBlurEvent=!1),"nocursor"!=r.options.readOnly&&(r.state.focused||(Qe(r,"focus",r,o),r.state.focused=!0,re(r.display.wrapper,"CodeMirror-focused"),!r.curOp&&r.display.selForContextMenu!=r.doc.sel&&(r.display.input.reset(),P&&setTimeout(function(){return r.display.input.reset(!0)},20)),r.display.input.receivedFocus()),Di(r))}function Dn(r,o){r.state.delayingBlurEvent||(r.state.focused&&(Qe(r,"blur",r,o),r.state.focused=!1,Nt(r.display.wrapper,"CodeMirror-focused")),clearInterval(r.display.blinker),setTimeout(function(){r.state.focused||(r.display.shift=!1)},150))}function Ai(r){for(var o=r.display,e=o.lineDiv.offsetTop,t=Math.max(0,o.scroller.getBoundingClientRect().top),n=o.lineDiv.getBoundingClientRect().top,i=0,l=0;l<o.view.length;l++){var a=o.view[l],s=r.options.lineWrapping,u=void 0,f=0;if(!a.hidden){if(n+=a.line.height,te&&j<8){var h=a.node.offsetTop+a.node.offsetHeight;u=h-e,e=h}else{var c=a.node.getBoundingClientRect();u=c.bottom-c.top,!s&&a.text.firstChild&&(f=a.text.firstChild.getBoundingClientRect().right-c.left-1)}var d=a.line.height-u;if((d>.005||d<-.005)&&(n<t&&(i-=d),zt(a.line,u),Yn(a.line),a.rest))for(var g=0;g<a.rest.length;g++)Yn(a.rest[g]);if(f>r.display.sizerWidth){var y=Math.ceil(f/kr(r.display));y>r.display.maxLineLength&&(r.display.maxLineLength=y,r.display.maxLine=a.line,r.display.maxLineChanged=!0)}}}Math.abs(i)>2&&(o.scroller.scrollTop+=i)}function Yn(r){if(r.widgets)for(var o=0;o<r.widgets.length;++o){var e=r.widgets[o],t=e.node.parentNode;t&&(e.height=t.offsetHeight)}}function Zn(r,o,e){var t=e&&null!=e.top?Math.max(0,e.top):r.scroller.scrollTop;t=Math.floor(t-Cn(r));var n=e&&null!=e.bottom?e.bottom:t+r.wrapper.clientHeight,i=Wt(o,t),l=Wt(o,n);if(e&&e.ensure){var a=e.ensure.from.line,s=e.ensure.to.line;a<i?(i=a,l=Wt(o,tr(oe(o,a))+r.wrapper.clientHeight)):Math.min(s,o.lastLine())>=l&&(i=Wt(o,tr(oe(o,s))-r.wrapper.clientHeight),l=s)}return{from:i,to:Math.max(l,i+1)}}function zl(r,o){var e=r.display,t=Mi(r.display);o.top<0&&(o.top=0);var n=r.curOp&&null!=r.curOp.scrollTop?r.curOp.scrollTop:e.scroller.scrollTop,i=wr(r),l={};o.bottom-o.top>i&&(o.bottom=o.top+i);var a=r.doc.height+Pr(e),u=o.bottom>a-t;if(o.top<n)l.scrollTop=o.top<t?0:o.top;else if(o.bottom>n+i){var f=Math.min(o.top,(u?a:o.bottom)-i);f!=n&&(l.scrollTop=f)}var h=r.options.fixedGutter?0:e.gutters.offsetWidth,c=r.curOp&&null!=r.curOp.scrollLeft?r.curOp.scrollLeft:e.scroller.scrollLeft-h,d=Sn(r)-e.gutters.offsetWidth,g=o.right-o.left>d;return g&&(o.right=o.left+d),o.left<10?l.scrollLeft=0:o.left<c?l.scrollLeft=Math.max(0,o.left+h-(g?0:10)):o.right>d+c-3&&(l.scrollLeft=o.right+(g?0:10)-d),l}function _l(r,o){null!=o&&(Nn(r),r.curOp.scrollTop=(null==r.curOp.scrollTop?r.doc.scrollTop:r.curOp.scrollTop)+o)}function An(r){Nn(r);var o=r.getCursor();r.curOp.scrollToPos={from:o,to:o,margin:r.options.cursorScrollMargin}}function Jn(r,o,e){(null!=o||null!=e)&&Nn(r),null!=o&&(r.curOp.scrollLeft=o),null!=e&&(r.curOp.scrollTop=e)}function Nn(r){var o=r.curOp.scrollToPos;o&&(r.curOp.scrollToPos=null,Ja(r,lo(r,o.from),lo(r,o.to),o.margin))}function Ja(r,o,e,t){var n=zl(r,{left:Math.min(o.left,e.left),top:Math.min(o.top,e.top)-t,right:Math.max(o.right,e.right),bottom:Math.max(o.bottom,e.bottom)+t});Jn(r,n.scrollLeft,n.scrollTop)}function Fn(r,o){Math.abs(r.doc.scrollTop-o)<2||(Q||co(r,{top:o}),Gl(r,o,!0),Q&&co(r),Et(r,100))}function Gl(r,o,e){o=Math.max(0,Math.min(r.display.scroller.scrollHeight-r.display.scroller.clientHeight,o)),(r.display.scroller.scrollTop!=o||e)&&(r.doc.scrollTop=o,r.display.scrollbars.setScrollTop(o),r.display.scroller.scrollTop!=o&&(r.display.scroller.scrollTop=o))}function zr(r,o,e,t){o=Math.max(0,Math.min(o,r.display.scroller.scrollWidth-r.display.scroller.clientWidth)),(!(e?o==r.doc.scrollLeft:Math.abs(r.doc.scrollLeft-o)<2)||t)&&(r.doc.scrollLeft=o,nl(r),r.display.scroller.scrollLeft!=o&&(r.display.scroller.scrollLeft=o),r.display.scrollbars.setScrollLeft(o))}function Fi(r){var o=r.display,e=o.gutters.offsetWidth,t=Math.round(r.doc.height+Pr(r.display));return{clientHeight:o.scroller.clientHeight,viewHeight:o.wrapper.clientHeight,scrollWidth:o.scroller.scrollWidth,clientWidth:o.scroller.clientWidth,viewWidth:o.wrapper.clientWidth,barLeft:r.options.fixedGutter?e:0,docHeight:t,scrollHeight:t+br(r)+o.barHeight,nativeBarWidth:o.nativeBarWidth,gutterWidth:e}}var pr=function(r,o,e){this.cm=e;var t=this.vert=T("div",[T("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=T("div",[T("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");t.tabIndex=n.tabIndex=-1,r(t),r(n),R(t,"scroll",function(){t.clientHeight&&o(t.scrollTop,"vertical")}),R(n,"scroll",function(){n.clientWidth&&o(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,te&&j<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};pr.prototype.update=function(r){var o=r.scrollWidth>r.clientWidth+1,e=r.scrollHeight>r.clientHeight+1,t=r.nativeBarWidth;return e?(this.vert.style.display="block",this.vert.style.bottom=o?t+"px":"0",this.vert.firstChild.style.height=Math.max(0,r.scrollHeight-r.clientHeight+(r.viewHeight-(o?t:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),o?(this.horiz.style.display="block",this.horiz.style.right=e?t+"px":"0",this.horiz.style.left=r.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,r.scrollWidth-r.clientWidth+(r.viewWidth-r.barLeft-(e?t:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&r.clientHeight>0&&(0==t&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:e?t:0,bottom:o?t:0}},pr.prototype.setScrollLeft=function(r){this.horiz.scrollLeft!=r&&(this.horiz.scrollLeft=r),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},pr.prototype.setScrollTop=function(r){this.vert.scrollTop!=r&&(this.vert.scrollTop=r),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},pr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=Ye&&!ke?"12px":"18px",this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new N,this.disableVert=new N},pr.prototype.enableZeroWidthBar=function(r,o,e){r.style.visibility="",o.set(1e3,function t(){var n=r.getBoundingClientRect();("vert"==e?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1))!=r?r.style.visibility="hidden":o.set(1e3,t)})},pr.prototype.clear=function(){var r=this.horiz.parentNode;r.removeChild(this.horiz),r.removeChild(this.vert)};var tn=function(){};function Lr(r,o){o||(o=Fi(r));var e=r.display.barWidth,t=r.display.barHeight;Ei(r,o);for(var n=0;n<4&&e!=r.display.barWidth||t!=r.display.barHeight;n++)e!=r.display.barWidth&&r.options.lineWrapping&&Ai(r),Ei(r,Fi(r)),e=r.display.barWidth,t=r.display.barHeight}function Ei(r,o){var e=r.display,t=e.scrollbars.update(o);e.sizer.style.paddingRight=(e.barWidth=t.right)+"px",e.sizer.style.paddingBottom=(e.barHeight=t.bottom)+"px",e.heightForcer.style.borderBottom=t.bottom+"px solid transparent",t.right&&t.bottom?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=t.bottom+"px",e.scrollbarFiller.style.width=t.right+"px"):e.scrollbarFiller.style.display="",t.bottom&&r.options.coverGutterNextToScrollbar&&r.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=t.bottom+"px",e.gutterFiller.style.width=o.gutterWidth+"px"):e.gutterFiller.style.display=""}tn.prototype.update=function(){return{bottom:0,right:0}},tn.prototype.setScrollLeft=function(){},tn.prototype.setScrollTop=function(){},tn.prototype.clear=function(){};var Qn={native:pr,null:tn};function Ul(r){r.display.scrollbars&&(r.display.scrollbars.clear(),r.display.scrollbars.addClass&&Nt(r.display.wrapper,r.display.scrollbars.addClass)),r.display.scrollbars=new Qn[r.options.scrollbarStyle](function(o){r.display.wrapper.insertBefore(o,r.display.scrollbarFiller),R(o,"mousedown",function(){r.state.focused&&setTimeout(function(){return r.display.input.focus()},0)}),o.setAttribute("cm-not-content","true")},function(o,e){"horizontal"==e?zr(r,o):Fn(r,o)},r),r.display.scrollbars.addClass&&re(r.display.wrapper,r.display.scrollbars.addClass)}var Qa=0;function En(r){r.curOp={cm:r,viewChanged:!1,startHeight:r.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Qa,markArrays:null},function Ko(r){_n?_n.ops.push(r):r.ownsGroup=_n={ops:[r],delayedCallbacks:[]}}(r.curOp)}function Vn(r){var o=r.curOp;o&&function Ps(r,o){var e=r.ownsGroup;if(e)try{!function Ci(r){var o=r.delayedCallbacks,e=0;do{for(;e<o.length;e++)o[e].call(null);for(var t=0;t<r.ops.length;t++){var n=r.ops[t];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(e<o.length)}(e)}finally{_n=null,o(e)}}(o,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function $n(r){for(var o=r.ops,e=0;e<o.length;e++)ei(o[e]);for(var t=0;t<o.length;t++)Us(o[t]);for(var n=0;n<o.length;n++)Ks(o[n]);for(var i=0;i<o.length;i++)js(o[i]);for(var l=0;l<o.length;l++)Xs(o[l])}(e)})}function ei(r){var o=r.cm,e=o.display;(function qs(r){var o=r.display;!o.scrollbarsClipped&&o.scroller.offsetWidth&&(o.nativeBarWidth=o.scroller.offsetWidth-o.scroller.clientWidth,o.heightForcer.style.height=br(r)+"px",o.sizer.style.marginBottom=-o.nativeBarWidth+"px",o.sizer.style.borderRightWidth=br(r)+"px",o.scrollbarsClipped=!0)})(o),r.updateMaxLine&&Hr(o),r.mustUpdate=r.viewChanged||r.forceUpdate||null!=r.scrollTop||r.scrollToPos&&(r.scrollToPos.from.line<e.viewFrom||r.scrollToPos.to.line>=e.viewTo)||e.maxLineChanged&&o.options.lineWrapping,r.update=r.mustUpdate&&new On(o,r.mustUpdate&&{top:r.scrollTop,ensure:r.scrollToPos},r.forceUpdate)}function Us(r){r.updatedDisplay=r.mustUpdate&&Kl(r.cm,r.update)}function Ks(r){var o=r.cm,e=o.display;r.updatedDisplay&&Ai(o),r.barMeasure=Fi(o),e.maxLineChanged&&!o.options.lineWrapping&&(r.adjustWidthTo=Wl(o,e.maxLine,e.maxLine.text.length).left+3,o.display.sizerWidth=r.adjustWidthTo,r.barMeasure.scrollWidth=Math.max(e.scroller.clientWidth,e.sizer.offsetLeft+r.adjustWidthTo+br(o)+o.display.barWidth),r.maxScrollLeft=Math.max(0,e.sizer.offsetLeft+r.adjustWidthTo-Sn(o))),(r.updatedDisplay||r.selectionChanged)&&(r.preparedSelection=e.input.prepareSelection())}function js(r){var o=r.cm;null!=r.adjustWidthTo&&(o.display.sizer.style.minWidth=r.adjustWidthTo+"px",r.maxScrollLeft<o.doc.scrollLeft&&zr(o,Math.min(o.display.scroller.scrollLeft,r.maxScrollLeft),!0),o.display.maxLineChanged=!1);var e=r.focus&&r.focus==H(S(o));r.preparedSelection&&o.display.input.showSelection(r.preparedSelection,e),(r.updatedDisplay||r.startHeight!=o.doc.height)&&Lr(o,r.barMeasure),r.updatedDisplay&&jl(o,r.barMeasure),r.selectionChanged&&Di(o),o.state.focused&&r.updateInput&&o.display.input.reset(r.typing),e&&Ya(r.cm)}function Xs(r){var o=r.cm,e=o.display,t=o.doc;r.updatedDisplay&&Va(o,r.update),null!=e.wheelStartX&&(null!=r.scrollTop||null!=r.scrollLeft||r.scrollToPos)&&(e.wheelStartX=e.wheelStartY=null),null!=r.scrollTop&&Gl(o,r.scrollTop,r.forceScroll),null!=r.scrollLeft&&zr(o,r.scrollLeft,!0,!0),r.scrollToPos&&function Za(r,o){if(!We(r,"scrollCursorIntoView")){var e=r.display,t=e.sizer.getBoundingClientRect(),n=null,i=e.wrapper.ownerDocument;if(o.top+t.top<0?n=!0:o.bottom+t.top>(i.defaultView.innerHeight||i.documentElement.clientHeight)&&(n=!1),null!=n&&!qe){var l=T("div","\u200b",null,"position: absolute;\n                         top: "+(o.top-e.viewOffset-Cn(r.display))+"px;\n                         height: "+(o.bottom-o.top+br(r)+e.barHeight)+"px;\n                         left: "+o.left+"px; width: "+Math.max(2,o.right-o.left)+"px;");r.display.lineSpace.appendChild(l),l.scrollIntoView(n),r.display.lineSpace.removeChild(l)}}}(o,function tl(r,o,e,t){var n;null==t&&(t=0),!r.options.lineWrapping&&o==e&&(e="before"==o.sticky?C(o.line,o.ch+1,"before"):o,o=o.ch?C(o.line,"before"==o.sticky?o.ch-1:o.ch,"after"):o);for(var i=0;i<5;i++){var l=!1,a=Sr(r,o),s=e&&e!=o?Sr(r,e):a,u=zl(r,n={left:Math.min(a.left,s.left),top:Math.min(a.top,s.top)-t,right:Math.max(a.left,s.left),bottom:Math.max(a.bottom,s.bottom)+t}),f=r.doc.scrollTop,h=r.doc.scrollLeft;if(null!=u.scrollTop&&(Fn(r,u.scrollTop),Math.abs(r.doc.scrollTop-f)>1&&(l=!0)),null!=u.scrollLeft&&(zr(r,u.scrollLeft),Math.abs(r.doc.scrollLeft-h)>1&&(l=!0)),!l)break}return n}(o,ve(t,r.scrollToPos.from),ve(t,r.scrollToPos.to),r.scrollToPos.margin));var i=r.maybeHiddenMarkers,l=r.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||Qe(i[a],"hide");if(l)for(var s=0;s<l.length;++s)l[s].lines.length&&Qe(l[s],"unhide");e.wrapper.offsetHeight&&(t.scrollTop=o.display.scroller.scrollTop),r.changeObjs&&Qe(o,"changes",o,r.changeObjs),r.update&&r.update.finish()}function ur(r,o){if(r.curOp)return o();En(r);try{return o()}finally{Vn(r)}}function Ht(r,o){return function(){if(r.curOp)return o.apply(r,arguments);En(r);try{return o.apply(r,arguments)}finally{Vn(r)}}}function $e(r){return function(){if(this.curOp)return r.apply(this,arguments);En(this);try{return r.apply(this,arguments)}finally{Vn(this)}}}function Oe(r){return function(){var o=this.cm;if(!o||o.curOp)return r.apply(this,arguments);En(o);try{return r.apply(this,arguments)}finally{Vn(o)}}}function Et(r,o){r.doc.highlightFrontier<r.display.viewTo&&r.state.highlight.set(o,xe(Pt,r))}function Pt(r){var o=r.doc;if(!(o.highlightFrontier>=r.display.viewTo)){var e=+new Date+r.options.workTime,t=mi(r,o.highlightFrontier),n=[];o.iter(t.line,Math.min(o.first+o.size,r.display.viewTo+500),function(i){if(t.line>=r.display.viewFrom){var l=i.styles,a=i.text.length>r.options.maxHighlightLength?ar(o.mode,t.state):null,s=Xi(r,i,t,!0);a&&(t.state=a),i.styles=s.styles;var u=i.styleClasses,f=s.classes;f?i.styleClasses=f:u&&(i.styleClasses=null);for(var h=!l||l.length!=i.styles.length||u!=f&&(!u||!f||u.bgClass!=f.bgClass||u.textClass!=f.textClass),c=0;!h&&c<l.length;++c)h=l[c]!=i.styles[c];h&&n.push(t.line),i.stateAfter=t.save(),t.nextLine()}else i.text.length<=r.options.maxHighlightLength&&Po(r,i.text,t),i.stateAfter=t.line%5==0?t.save():null,t.nextLine();if(+new Date>e)return Et(r,r.options.workDelay),!0}),o.highlightFrontier=t.line,o.modeFrontier=Math.max(o.modeFrontier,t.line),n.length&&ur(r,function(){for(var i=0;i<n.length;i++)sr(r,n[i],"text")})}}var On=function(r,o,e){var t=r.display;this.viewport=o,this.visible=Zn(t,r.doc,o),this.editorIsHidden=!t.wrapper.offsetWidth,this.wrapperHeight=t.wrapper.clientHeight,this.wrapperWidth=t.wrapper.clientWidth,this.oldDisplayWidth=Sn(r),this.force=e,this.dims=kn(r),this.events=[]};function Kl(r,o){var e=r.display,t=r.doc;if(o.editorIsHidden)return kt(r),!1;if(!o.force&&o.visible.from>=e.viewFrom&&o.visible.to<=e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>=e.viewTo)&&e.renderedView==e.view&&0==so(r))return!1;il(r)&&(kt(r),o.dims=kn(r));var n=t.first+t.size,i=Math.max(o.visible.from-r.options.viewportMargin,t.first),l=Math.min(n,o.visible.to+r.options.viewportMargin);e.viewFrom<i&&i-e.viewFrom<20&&(i=Math.max(t.first,e.viewFrom)),e.viewTo>l&&e.viewTo-l<20&&(l=Math.min(n,e.viewTo)),Jr&&(i=Nl(r.doc,i),l=Fa(r.doc,l));var a=i!=e.viewFrom||l!=e.viewTo||e.lastWrapHeight!=o.wrapperHeight||e.lastWrapWidth!=o.wrapperWidth;(function Mn(r,o,e){var t=r.display;0==t.view.length||o>=t.viewTo||e<=t.viewFrom?(t.view=Uo(r,o,e),t.viewFrom=o):(t.viewFrom>o?t.view=Uo(r,o,t.viewFrom).concat(t.view):t.viewFrom<o&&(t.view=t.view.slice(en(r,o))),t.viewFrom=o,t.viewTo<e?t.view=t.view.concat(Uo(r,t.viewTo,e)):t.viewTo>e&&(t.view=t.view.slice(0,en(r,e)))),t.viewTo=e})(r,i,l),e.viewOffset=tr(oe(r.doc,e.viewFrom)),r.display.mover.style.top=e.viewOffset+"px";var s=so(r);if(!a&&0==s&&!o.force&&e.renderedView==e.view&&(null==e.updateLineNumbers||e.updateLineNumbers>=e.viewTo))return!1;var u=function rl(r){if(r.hasFocus())return null;var o=H(S(r));if(!o||!K(r.display.lineDiv,o))return null;var e={activeElt:o};if(window.getSelection){var t=ee(r).getSelection();t.anchorNode&&t.extend&&K(r.display.lineDiv,t.anchorNode)&&(e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset)}return e}(r);return s>4&&(e.lineDiv.style.display="none"),function $a(r,o,e){var t=r.display,n=r.options.lineNumbers,i=t.lineDiv,l=i.firstChild;function a(g){var y=g.nextSibling;return P&&Ye&&r.display.currentWheelTarget==g?g.style.display="none":g.parentNode.removeChild(g),y}for(var s=t.view,u=t.viewFrom,f=0;f<s.length;f++){var h=s[f];if(!h.hidden)if(h.node&&h.node.parentNode==i){for(;l!=h.node;)l=a(l);var d=n&&null!=o&&o<=u&&h.lineNumber;h.changes&&(A(h.changes,"gutter")>-1&&(d=!1),Ft(r,h,u,e)),d&&(V(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(b(r.options,u)))),l=h.node.nextSibling}else{var c=Ra(r,h,u,e);i.insertBefore(c,l)}u+=h.size}for(;l;)l=a(l)}(r,e.updateLineNumbers,o.dims),s>4&&(e.lineDiv.style.display=""),e.renderedView=e.view,function Ys(r){if(r&&r.activeElt&&r.activeElt!=H(v(r.activeElt))&&(r.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(r.activeElt.nodeName)&&r.anchorNode&&K(document.body,r.anchorNode)&&K(document.body,r.focusNode))){var o=r.activeElt.ownerDocument,e=o.defaultView.getSelection(),t=o.createRange();t.setEnd(r.anchorNode,r.anchorOffset),t.collapse(!1),e.removeAllRanges(),e.addRange(t),e.extend(r.focusNode,r.focusOffset)}}(u),V(e.cursorDiv),V(e.selectionDiv),e.gutters.style.height=e.sizer.style.minHeight=0,a&&(e.lastWrapHeight=o.wrapperHeight,e.lastWrapWidth=o.wrapperWidth,Et(r,400)),e.updateLineNumbers=null,!0}function Va(r,o){for(var e=o.viewport,t=!0;;t=!1){if(t&&r.options.lineWrapping&&o.oldDisplayWidth!=Sn(r))t&&(o.visible=Zn(r.display,r.doc,e));else if(e&&null!=e.top&&(e={top:Math.min(r.doc.height+Pr(r.display)-wr(r),e.top)}),o.visible=Zn(r.display,r.doc,e),o.visible.from>=r.display.viewFrom&&o.visible.to<=r.display.viewTo)break;if(!Kl(r,o))break;Ai(r);var n=Fi(r);uo(r),Lr(r,n),jl(r,n),o.force=!1}o.signal(r,"update",r),(r.display.viewFrom!=r.display.reportedViewFrom||r.display.viewTo!=r.display.reportedViewTo)&&(o.signal(r,"viewportChange",r,r.display.viewFrom,r.display.viewTo),r.display.reportedViewFrom=r.display.viewFrom,r.display.reportedViewTo=r.display.viewTo)}function co(r,o){var e=new On(r,o);if(Kl(r,e)){Ai(r),Va(r,e);var t=Fi(r);uo(r),Lr(r,t),jl(r,t),e.finish()}}function po(r){r.sizer.style.marginLeft=r.gutters.offsetWidth+"px",It(r,"gutterChanged",r)}function jl(r,o){r.display.sizer.style.minHeight=o.docHeight+"px",r.display.heightForcer.style.top=o.docHeight+"px",r.display.gutters.style.height=o.docHeight+r.display.barHeight+br(r)+"px"}function nl(r){var o=r.display,e=o.view;if(o.alignWidgets||o.gutters.firstChild&&r.options.fixedGutter){for(var t=Ln(o)-o.scroller.scrollLeft+r.doc.scrollLeft,n=o.gutters.offsetWidth,i=t+"px",l=0;l<e.length;l++)if(!e[l].hidden){r.options.fixedGutter&&(e[l].gutter&&(e[l].gutter.style.left=i),e[l].gutterBackground&&(e[l].gutterBackground.style.left=i));var a=e[l].alignable;if(a)for(var s=0;s<a.length;s++)a[s].style.left=i}r.options.fixedGutter&&(o.gutters.style.left=t+n+"px")}}function il(r){if(!r.options.lineNumbers)return!1;var o=r.doc,e=b(r.options,o.first+o.size-1),t=r.display;if(e.length!=t.lineNumChars){var n=t.measure.appendChild(T("div",[T("div",e)],"CodeMirror-linenumber CodeMirror-gutter-elt")),i=n.firstChild.offsetWidth,l=n.offsetWidth-i;return t.lineGutter.style.width="",t.lineNumInnerWidth=Math.max(i,t.lineGutter.offsetWidth-l)+1,t.lineNumWidth=t.lineNumInnerWidth+l,t.lineNumChars=t.lineNumInnerWidth?e.length:-1,t.lineGutter.style.width=t.lineNumWidth+"px",po(r.display),!0}return!1}function ol(r,o){for(var e=[],t=!1,n=0;n<r.length;n++){var i=r[n],l=null;if("string"!=typeof i&&(l=i.style,i=i.className),"CodeMirror-linenumbers"==i){if(!o)continue;t=!0}e.push({className:i,style:l})}return o&&!t&&e.push({className:"CodeMirror-linenumbers",style:null}),e}function Xl(r){var o=r.gutters,e=r.gutterSpecs;V(o),r.lineGutter=null;for(var t=0;t<e.length;++t){var n=e[t],i=n.className,l=n.style,a=o.appendChild(T("div",null,"CodeMirror-gutter "+i));l&&(a.style.cssText=l),"CodeMirror-linenumbers"==i&&(r.lineGutter=a,a.style.width=(r.lineNumWidth||1)+"px")}o.style.display=e.length?"":"none",po(r)}function ti(r){Xl(r.display),At(r),nl(r)}function es(r,o,e,t){var n=this;this.input=e,n.scrollbarFiller=T("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=T("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=ne("div",null,"CodeMirror-code"),n.selectionDiv=T("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=T("div",null,"CodeMirror-cursors"),n.measure=T("div",null,"CodeMirror-measure"),n.lineMeasure=T("div",null,"CodeMirror-measure"),n.lineSpace=ne("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none");var i=ne("div",[n.lineSpace],"CodeMirror-lines");n.mover=T("div",[i],null,"position: relative"),n.sizer=T("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=T("div",null,null,"position: absolute; height: 50px; width: 1px;"),n.gutters=T("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=T("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=T("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),ce&&105===Ge&&(n.wrapper.style.clipPath="inset(0px)"),n.wrapper.setAttribute("translate","no"),te&&j<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),!P&&!(Q&&de)&&(n.scroller.draggable=!0),r&&(r.appendChild?r.appendChild(n.wrapper):r(n.wrapper)),n.viewFrom=n.viewTo=o.first,n.reportedViewFrom=n.reportedViewTo=o.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,n.gutterSpecs=ol(t.gutters,t.lineNumbers),Xl(n),e.init(n)}On.prototype.signal=function(r,o){Be(r,o)&&this.events.push(arguments)},On.prototype.finish=function(){for(var r=0;r<this.events.length;r++)Qe.apply(null,this.events[r])};var Wn=0,rn=null;function vo(r){var o=r.wheelDeltaX,e=r.wheelDeltaY;return null==o&&r.detail&&r.axis==r.HORIZONTAL_AXIS&&(o=r.detail),null==e&&r.detail&&r.axis==r.VERTICAL_AXIS?e=r.detail:null==e&&(e=r.wheelDelta),{x:o,y:e}}function nn(r){var o=vo(r);return o.x*=rn,o.y*=rn,o}function ql(r,o){ce&&102==Ge&&(null==r.display.chromeScrollHack?r.display.sizer.style.pointerEvents="none":clearTimeout(r.display.chromeScrollHack),r.display.chromeScrollHack=setTimeout(function(){r.display.chromeScrollHack=null,r.display.sizer.style.pointerEvents=""},100));var e=vo(o),t=e.x,n=e.y,i=rn;0===o.deltaMode&&(t=o.deltaX,n=o.deltaY,i=1);var l=r.display,a=l.scroller,u=a.scrollHeight>a.clientHeight;if(t&&a.scrollWidth>a.clientWidth||n&&u){if(n&&Ye&&P)e:for(var f=o.target,h=l.view;f!=a;f=f.parentNode)for(var c=0;c<h.length;c++)if(h[c].node==f){r.display.currentWheelTarget=f;break e}if(t&&!Q&&!Ce&&null!=i)return n&&u&&Fn(r,Math.max(0,a.scrollTop+n*i)),zr(r,Math.max(0,a.scrollLeft+t*i)),(!n||n&&u)&&nt(o),void(l.wheelStartX=null);if(n&&null!=i){var d=n*i,g=r.doc.scrollTop,y=g+l.wrapper.clientHeight;d<0?g=Math.max(0,g+d-50):y=Math.min(r.doc.height,y+d+50),co(r,{top:g,bottom:y})}Wn<20&&0!==o.deltaMode&&(null==l.wheelStartX?(l.wheelStartX=a.scrollLeft,l.wheelStartY=a.scrollTop,l.wheelDX=t,l.wheelDY=n,setTimeout(function(){if(null!=l.wheelStartX){var w=a.scrollLeft-l.wheelStartX,k=a.scrollTop-l.wheelStartY,M=k&&l.wheelDY&&k/l.wheelDY||w&&l.wheelDX&&w/l.wheelDX;l.wheelStartX=l.wheelStartY=null,M&&(rn=(rn*Wn+M)/(Wn+1),++Wn)}},200)):(l.wheelDX+=t,l.wheelDY+=n))}}te?rn=-.53:Q?rn=15:ce?rn=-.7:pe&&(rn=-1/3);var vr=function(r,o){this.ranges=r,this.primIndex=o};vr.prototype.primary=function(){return this.ranges[this.primIndex]},vr.prototype.equals=function(r){if(r==this)return!0;if(r.primIndex!=this.primIndex||r.ranges.length!=this.ranges.length)return!1;for(var o=0;o<this.ranges.length;o++){var e=this.ranges[o],t=r.ranges[o];if(!F(e.anchor,t.anchor)||!F(e.head,t.head))return!1}return!0},vr.prototype.deepCopy=function(){for(var r=[],o=0;o<this.ranges.length;o++)r[o]=new Ue(Z(this.ranges[o].anchor),Z(this.ranges[o].head));return new vr(r,this.primIndex)},vr.prototype.somethingSelected=function(){for(var r=0;r<this.ranges.length;r++)if(!this.ranges[r].empty())return!0;return!1},vr.prototype.contains=function(r,o){o||(o=r);for(var e=0;e<this.ranges.length;e++){var t=this.ranges[e];if(O(o,t.from())>=0&&O(r,t.to())<=0)return e}return-1};var Ue=function(r,o){this.anchor=r,this.head=o};function xt(r,o,e){var t=r&&r.options.selectionsMayTouch,n=o[e];o.sort(function(c,d){return O(c.from(),d.from())}),e=A(o,n);for(var i=1;i<o.length;i++){var l=o[i],a=o[i-1],s=O(a.to(),l.from());if(t&&!l.empty()?s>0:s>=0){var u=St(a.from(),l.from()),f=Ie(a.to(),l.to()),h=a.empty()?l.from()==l.head:a.from()==a.head;i<=e&&--e,o.splice(--i,2,new Ue(h?f:u,h?u:f))}}return new vr(o,e)}function De(r,o){return new vr([new Ue(r,o||r)],0)}function _t(r){return r.text?C(r.from.line+r.text.length-1,be(r.text).length+(1==r.text.length?r.from.ch:0)):r.to}function on(r,o){if(O(r,o.from)<0)return r;if(O(r,o.to)<=0)return _t(o);var e=r.line+o.text.length-(o.to.line-o.from.line)-1,t=r.ch;return r.line==o.to.line&&(t+=_t(o).ch-o.to.ch),C(e,t)}function Xr(r,o){for(var e=[],t=0;t<r.sel.ranges.length;t++){var n=r.sel.ranges[t];e.push(new Ue(on(n.anchor,o),on(n.head,o)))}return xt(r.cm,e,r.sel.primIndex)}function Yl(r,o,e){return r.line==o.line?C(e.line,r.ch-o.ch+e.ch):C(e.line+(r.line-o.line),r.ch)}function ll(r){r.doc.mode=Zr(r.options,r.doc.modeOption),go(r)}function go(r){r.doc.iter(function(o){o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null)}),r.doc.modeFrontier=r.doc.highlightFrontier=r.doc.first,Et(r,100),r.state.modeGen++,r.curOp&&At(r)}function al(r,o){return 0==o.from.ch&&0==o.to.ch&&""==be(o.text)&&(!r.cm||r.cm.options.wholeLineUpdateBefore)}function ri(r,o,e,t){function n(M){return e?e[M]:null}function i(M,D,E){(function Fl(r,o,e,t){r.text=o,r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null),null!=r.order&&(r.order=null),Al(r),Da(r,e);var n=t?t(r):1;n!=r.height&&zt(r,n)})(M,D,E,t),It(M,"change",M,o)}function l(M,D){for(var E=[],W=M;W<D;++W)E.push(new Vr(u[W],n(W),t));return E}var a=o.from,s=o.to,u=o.text,f=oe(r,a.line),h=oe(r,s.line),c=be(u),d=n(u.length-1),g=s.line-a.line;if(o.full)r.insert(0,l(0,u.length)),r.remove(u.length,r.size-u.length);else if(al(r,o)){var y=l(0,u.length-1);i(h,h.text,d),g&&r.remove(a.line,g),y.length&&r.insert(a.line,y)}else if(f==h)if(1==u.length)i(f,f.text.slice(0,a.ch)+c+f.text.slice(s.ch),d);else{var w=l(1,u.length-1);w.push(new Vr(c+f.text.slice(s.ch),d,t)),i(f,f.text.slice(0,a.ch)+u[0],n(0)),r.insert(a.line+1,w)}else if(1==u.length)i(f,f.text.slice(0,a.ch)+u[0]+h.text.slice(s.ch),n(0)),r.remove(a.line+1,g);else{i(f,f.text.slice(0,a.ch)+u[0],n(0)),i(h,c+h.text.slice(s.ch),d);var k=l(1,u.length-1);g>1&&r.remove(a.line+1,g-1),r.insert(a.line+1,k)}It(r,"change",r,o)}function ln(r,o,e){!function t(n,i,l){if(n.linked)for(var a=0;a<n.linked.length;++a){var s=n.linked[a];if(s.doc!=i){var u=l&&s.sharedHist;e&&!u||(o(s.doc,u),t(s.doc,n,u))}}}(r,null,!0)}function sl(r,o){if(o.cm)throw new Error("This document is already in use.");r.doc=o,o.cm=r,ao(r),ll(r),an(r),r.options.direction=o.direction,r.options.lineWrapping||Hr(r),r.options.mode=o.modeOption,At(r)}function an(r){("rtl"==r.doc.direction?re:Nt)(r.display.lineDiv,"CodeMirror-rtl")}function mo(r){this.done=[],this.undone=[],this.undoDepth=r?r.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=r?r.maxGeneration:1}function Jl(r,o){var e={from:Z(o.from),to:_t(o),text:Ve(r,o.from,o.to)};return ns(r,e,o.from.line,o.to.line+1),ln(r,function(t){return ns(t,e,o.from.line,o.to.line+1)},!0),e}function yo(r){for(;r.length&&be(r).ranges;)r.pop()}function Vl(r,o,e,t){var n=r.history;n.undone.length=0;var l,a,i=+new Date;if((n.lastOp==t||n.lastOrigin==o.origin&&o.origin&&("+"==o.origin.charAt(0)&&n.lastModTime>i-(r.cm?r.cm.options.historyEventDelay:500)||"*"==o.origin.charAt(0)))&&(l=function Ql(r,o){return o?(yo(r.done),be(r.done)):r.done.length&&!be(r.done).ranges?be(r.done):r.done.length>1&&!r.done[r.done.length-2].ranges?(r.done.pop(),be(r.done)):void 0}(n,n.lastOp==t)))a=be(l.changes),0==O(o.from,o.to)&&0==O(o.from,a.to)?a.to=_t(o):l.changes.push(Jl(r,o));else{var s=be(n.done);for((!s||!s.ranges)&&ul(r.sel,n.done),l={changes:[Jl(r,o)],generation:n.generation},n.done.push(l);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(e),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=i,n.lastOp=n.lastSelOp=t,n.lastOrigin=n.lastSelOrigin=o.origin,a||Qe(r,"historyAdded")}function rs(r,o,e,t){var n=r.history,i=t&&t.origin;e==n.lastSelOp||i&&n.lastSelOrigin==i&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==i||function Zs(r,o,e,t){var n=o.charAt(0);return"*"==n||"+"==n&&e.ranges.length==t.ranges.length&&e.somethingSelected()==t.somethingSelected()&&new Date-r.history.lastSelTime<=(r.cm?r.cm.options.historyEventDelay:500)}(r,i,be(n.done),o))?n.done[n.done.length-1]=o:ul(o,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=i,n.lastSelOp=e,t&&!1!==t.clearRedo&&yo(n.undone)}function ul(r,o){var e=be(o);e&&e.ranges&&e.equals(r)||o.push(r)}function ns(r,o,e,t){var n=o["spans_"+r.id],i=0;r.iter(Math.max(r.first,e),Math.min(r.first+r.size,t),function(l){l.markedSpans&&((n||(n=o["spans_"+r.id]={}))[i]=l.markedSpans),++i})}function fl(r){if(!r)return null;for(var o,e=0;e<r.length;++e)r[e].marker.explicitlyCleared?o||(o=r.slice(0,e)):o&&o.push(r[e]);return o?o.length?o:null:r}function os(r,o){var e=function is(r,o){var e=o["spans_"+r.id];if(!e)return null;for(var t=[],n=0;n<o.text.length;++n)t.push(fl(e[n]));return t}(r,o),t=Ml(r,o);if(!e)return t;if(!t)return e;for(var n=0;n<e.length;++n){var i=e[n],l=t[n];if(i&&l)e:for(var a=0;a<l.length;++a){for(var s=l[a],u=0;u<i.length;++u)if(i[u].marker==s.marker)continue e;i.push(s)}else l&&(e[n]=l)}return e}function Oi(r,o,e){for(var t=[],n=0;n<r.length;++n){var i=r[n];if(i.ranges)t.push(e?vr.prototype.deepCopy.call(i):i);else{var l=i.changes,a=[];t.push({changes:a});for(var s=0;s<l.length;++s){var u=l[s],f=void 0;if(a.push({from:u.from,to:u.to,text:u.text}),o)for(var h in u)(f=h.match(/^spans_(\d+)$/))&&A(o,Number(f[1]))>-1&&(be(a)[h]=u[h],delete u[h])}}}return t}function hl(r,o,e,t){if(t){var n=r.anchor;if(e){var i=O(o,n)<0;i!=O(e,n)<0?(n=o,o=e):i!=O(o,e)<0&&(o=e)}return new Ue(n,o)}return new Ue(e||o,o)}function sn(r,o,e,t,n){null==n&&(n=r.cm&&(r.cm.display.shift||r.extend)),Yt(r,new vr([hl(r.sel.primary(),o,e,n)],0),t)}function cl(r,o,e){for(var t=[],n=r.cm&&(r.cm.display.shift||r.extend),i=0;i<r.sel.ranges.length;i++)t[i]=hl(r.sel.ranges[i],o[i],null,n);Yt(r,xt(r.cm,t,r.sel.primIndex),e)}function Wi(r,o,e,t){var n=r.sel.ranges.slice(0);n[o]=e,Yt(r,xt(r.cm,n,r.sel.primIndex),t)}function $l(r,o,e,t){Yt(r,De(o,e),t)}function ta(r,o,e){var t=r.history.done,n=be(t);n&&n.ranges?(t[t.length-1]=o,xo(r,o,e)):Yt(r,o,e)}function Yt(r,o,e){xo(r,o,e),rs(r,r.sel,r.cm?r.cm.curOp.id:NaN,e)}function xo(r,o,e){(Be(r,"beforeSelectionChange")||r.cm&&Be(r.cm,"beforeSelectionChange"))&&(o=function ea(r,o,e){var t={ranges:o.ranges,update:function(n){this.ranges=[];for(var i=0;i<n.length;i++)this.ranges[i]=new Ue(ve(r,n[i].anchor),ve(r,n[i].head))},origin:e&&e.origin};return Qe(r,"beforeSelectionChange",r,t),r.cm&&Qe(r.cm,"beforeSelectionChange",r.cm,t),t.ranges!=o.ranges?xt(r.cm,t.ranges,t.ranges.length-1):o}(r,o,e));var t=e&&e.bias||(O(o.primary().head,r.sel.primary().head)<0?-1:1);Gt(r,ra(r,o,t,!0)),(!e||!1!==e.scroll)&&r.cm&&"nocursor"!=r.cm.getOption("readOnly")&&An(r.cm)}function Gt(r,o){o.equals(r.sel)||(r.sel=o,r.cm&&(r.cm.curOp.updateInput=1,r.cm.curOp.selectionChanged=!0,mt(r.cm)),It(r,"cursorActivity",r))}function bo(r){Gt(r,ra(r,r.sel,null,!1))}function ra(r,o,e,t){for(var n,i=0;i<o.ranges.length;i++){var l=o.ranges[i],a=o.ranges.length==r.sel.ranges.length&&r.sel.ranges[i],s=wo(r,l.anchor,a&&a.anchor,e,t),u=l.head==l.anchor?s:wo(r,l.head,a&&a.head,e,t);(n||s!=l.anchor||u!=l.head)&&(n||(n=o.ranges.slice(0,i)),n[i]=new Ue(s,u))}return n?xt(r.cm,n,o.primIndex):o}function ni(r,o,e,t,n){var i=oe(r,o.line);if(i.markedSpans)for(var l=0;l<i.markedSpans.length;++l){var a=i.markedSpans[l],s=a.marker,u="selectLeft"in s?!s.selectLeft:s.inclusiveLeft,f="selectRight"in s?!s.selectRight:s.inclusiveRight;if((null==a.from||(u?a.from<=o.ch:a.from<o.ch))&&(null==a.to||(f?a.to>=o.ch:a.to>o.ch))){if(n&&(Qe(s,"beforeCursorEnter"),s.explicitlyCleared)){if(i.markedSpans){--l;continue}break}if(!s.atomic)continue;if(e){var h=s.find(t<0?1:-1),c=void 0;if((t<0?f:u)&&(h=ii(r,h,-t,h&&h.line==o.line?i:null)),h&&h.line==o.line&&(c=O(h,e))&&(t<0?c<0:c>0))return ni(r,h,o,t,n)}var d=s.find(t<0?-1:1);return(t<0?u:f)&&(d=ii(r,d,t,d.line==o.line?i:null)),d?ni(r,d,o,t,n):null}}return o}function wo(r,o,e,t,n){var i=t||1;return ni(r,o,e,i,n)||!n&&ni(r,o,e,i,!0)||ni(r,o,e,-i,n)||!n&&ni(r,o,e,-i,!0)||(r.cantEdit=!0,C(r.first,0))}function ii(r,o,e,t){return e<0&&0==o.ch?o.line>r.first?ve(r,C(o.line-1)):null:e>0&&o.ch==(t||oe(r,o.line)).text.length?o.line<r.first+r.size-1?C(o.line+1,0):null:new C(o.line,o.ch+e)}function Co(r){r.setSelection(C(r.firstLine(),0),C(r.lastLine()),se)}function na(r,o,e){var t={canceled:!1,from:o.from,to:o.to,text:o.text,origin:o.origin,cancel:function(){return t.canceled=!0}};return e&&(t.update=function(n,i,l,a){n&&(t.from=ve(r,n)),i&&(t.to=ve(r,i)),l&&(t.text=l),void 0!==a&&(t.origin=a)}),Qe(r,"beforeChange",r,t),r.cm&&Qe(r.cm,"beforeChange",r.cm,t),t.canceled?(r.cm&&(r.cm.curOp.updateInput=2),null):{from:t.from,to:t.to,text:t.text,origin:t.origin}}function oi(r,o,e){if(r.cm){if(!r.cm.curOp)return Ht(r.cm,oi)(r,o,e);if(r.cm.state.suppressEdits)return}if(!(Be(r,"beforeChange")||r.cm&&Be(r.cm,"beforeChange"))||(o=na(r,o,!0))){var t=La&&!e&&function Dl(r,o,e){var t=null;if(r.iter(o.line,e.line+1,function(d){if(d.markedSpans)for(var g=0;g<d.markedSpans.length;++g){var y=d.markedSpans[g].marker;y.readOnly&&(!t||-1==A(t,y))&&(t||(t=[])).push(y)}}),!t)return null;for(var n=[{from:o,to:e}],i=0;i<t.length;++i)for(var l=t[i],a=l.find(0),s=0;s<n.length;++s){var u=n[s];if(!(O(u.to,a.from)<0||O(u.from,a.to)>0)){var f=[s,1],h=O(u.from,a.from),c=O(u.to,a.to);(h<0||!l.inclusiveLeft&&!h)&&f.push({from:u.from,to:a.from}),(c>0||!l.inclusiveRight&&!c)&&f.push({from:a.to,to:u.to}),n.splice.apply(n,f),s+=f.length-3}}return n}(r,o.from,o.to);if(t)for(var n=t.length-1;n>=0;--n)ia(r,{from:t[n].from,to:t[n].to,text:n?[""]:o.text,origin:o.origin});else ia(r,o)}}function ia(r,o){if(1!=o.text.length||""!=o.text[0]||0!=O(o.from,o.to)){var e=Xr(r,o);Vl(r,o,e,r.cm?r.cm.curOp.id:NaN),In(r,o,e,Ml(r,o));var t=[];ln(r,function(n,i){!i&&-1==A(t,n.history)&&(la(n.history,o),t.push(n.history)),In(n,o,null,Ml(n,o))})}}function un(r,o,e){var t=r.cm&&r.cm.state.suppressEdits;if(!t||e){for(var i,n=r.history,l=r.sel,a="undo"==o?n.done:n.undone,s="undo"==o?n.undone:n.done,u=0;u<a.length&&(i=a[u],!(e?i.ranges&&!i.equals(r.sel):!i.ranges));u++);if(u!=a.length){for(n.lastOrigin=n.lastSelOrigin=null;;){if(!(i=a.pop()).ranges){if(t)return void a.push(i);break}if(ul(i,s),e&&!i.equals(r.sel))return void Yt(r,i,{clearRedo:!1});l=i}var f=[];ul(l,s),s.push({changes:f,generation:n.generation}),n.generation=i.generation||++n.maxGeneration;for(var h=Be(r,"beforeChange")||r.cm&&Be(r.cm,"beforeChange"),c=function(y){var w=i.changes[y];if(w.origin=o,h&&!na(r,w,!1))return a.length=0,{};f.push(Jl(r,w));var k=y?Xr(r,w):be(a);In(r,w,k,os(r,w)),!y&&r.cm&&r.cm.scrollIntoView({from:w.from,to:_t(w)});var M=[];ln(r,function(D,E){!E&&-1==A(M,D.history)&&(la(D.history,w),M.push(D.history)),In(D,w,null,os(D,w))})},d=i.changes.length-1;d>=0;--d){var g=c(d);if(g)return g.v}}}}function oa(r,o){if(0!=o&&(r.first+=o,r.sel=new vr(or(r.sel.ranges,function(n){return new Ue(C(n.anchor.line+o,n.anchor.ch),C(n.head.line+o,n.head.ch))}),r.sel.primIndex),r.cm)){At(r.cm,r.first,r.first-o,o);for(var e=r.cm.display,t=e.viewFrom;t<e.viewTo;t++)sr(r.cm,t,"gutter")}}function In(r,o,e,t){if(r.cm&&!r.cm.curOp)return Ht(r.cm,In)(r,o,e,t);if(o.to.line<r.first)oa(r,o.text.length-1-(o.to.line-o.from.line));else if(!(o.from.line>r.lastLine())){if(o.from.line<r.first){var n=o.text.length-1-(r.first-o.from.line);oa(r,n),o={from:C(r.first,0),to:C(o.to.line+n,o.to.ch),text:[be(o.text)],origin:o.origin}}var i=r.lastLine();o.to.line>i&&(o={from:o.from,to:C(i,oe(r,i).text.length),text:[o.text[0]],origin:o.origin}),o.removed=Ve(r,o.from,o.to),e||(e=Xr(r,o)),r.cm?function ls(r,o,e){var t=r.doc,n=r.display,i=o.from,l=o.to,a=!1,s=i.line;r.options.lineWrapping||(s=Re(Ir(oe(t,i.line))),t.iter(s,l.line+1,function(d){if(d==n.maxLine)return a=!0,!0})),t.sel.contains(o.from,o.to)>-1&&mt(r),ri(t,o,e,$o(r)),r.options.lineWrapping||(t.iter(s,i.line+o.text.length,function(d){var g=bi(d);g>n.maxLineLength&&(n.maxLine=d,n.maxLineLength=g,n.maxLineChanged=!0,a=!1)}),a&&(r.curOp.updateMaxLine=!0)),function ka(r,o){if(r.modeFrontier=Math.min(r.modeFrontier,o),!(r.highlightFrontier<o-10)){for(var e=r.first,t=o-1;t>e;t--){var n=oe(r,t).stateAfter;if(n&&(!(n instanceof Ho)||t+n.lookAhead<o)){e=t+1;break}}r.highlightFrontier=Math.min(r.highlightFrontier,e)}}(t,i.line),Et(r,400);var u=o.text.length-(l.line-i.line)-1;o.full?At(r):i.line!=l.line||1!=o.text.length||al(r.doc,o)?At(r,i.line,l.line+1,u):sr(r,i.line,"text");var f=Be(r,"changes"),h=Be(r,"change");if(h||f){var c={from:i,to:l,text:o.text,removed:o.removed,origin:o.origin};h&&It(r,"change",r,c),f&&(r.curOp.changeObjs||(r.curOp.changeObjs=[])).push(c)}r.display.selForContextMenu=null}(r.cm,o,t):ri(r,o,t),xo(r,e,se),r.cantEdit&&wo(r,C(r.firstLine(),0))&&(r.cantEdit=!1)}}function qr(r,o,e,t,n){var i;t||(t=e),O(t,e)<0&&(e=(i=[t,e])[0],t=i[1]),"string"==typeof o&&(o=r.splitLines(o)),oi(r,{from:e,to:t,text:o,origin:n})}function as(r,o,e,t){e<r.line?r.line+=t:o<r.line&&(r.line=o,r.ch=0)}function li(r,o,e,t){for(var n=0;n<r.length;++n){var i=r[n],l=!0;if(i.ranges){i.copied||((i=r[n]=i.deepCopy()).copied=!0);for(var a=0;a<i.ranges.length;a++)as(i.ranges[a].anchor,o,e,t),as(i.ranges[a].head,o,e,t)}else{for(var s=0;s<i.changes.length;++s){var u=i.changes[s];if(e<u.from.line)u.from=C(u.from.line+t,u.from.ch),u.to=C(u.to.line+t,u.to.ch);else if(o<=u.to.line){l=!1;break}}l||(r.splice(0,n+1),n=0)}}}function la(r,o){var e=o.from.line,t=o.to.line,n=o.text.length-(t-e)-1;li(r.done,e,t,n),li(r.undone,e,t,n)}function Ii(r,o,e,t){var n=o,i=o;return"number"==typeof o?i=oe(r,er(r,o)):n=Re(o),null==n?null:(t(i,n)&&r.cm&&sr(r.cm,n,e),i)}function Hi(r){this.lines=r,this.parent=null;for(var o=0,e=0;e<r.length;++e)r[e].parent=this,o+=r[e].height;this.height=o}function fn(r){this.children=r;for(var o=0,e=0,t=0;t<r.length;++t){var n=r[t];o+=n.chunkSize(),e+=n.height,n.parent=this}this.size=o,this.height=e,this.parent=null}Ue.prototype.from=function(){return St(this.anchor,this.head)},Ue.prototype.to=function(){return Ie(this.anchor,this.head)},Ue.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Hi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(r,o){for(var e=r,t=r+o;e<t;++e){var n=this.lines[e];this.height-=n.height,wi(n),It(n,"delete")}this.lines.splice(r,o)},collapse:function(r){r.push.apply(r,this.lines)},insertInner:function(r,o,e){this.height+=e,this.lines=this.lines.slice(0,r).concat(o).concat(this.lines.slice(r));for(var t=0;t<o.length;++t)o[t].parent=this},iterN:function(r,o,e){for(var t=r+o;r<t;++r)if(e(this.lines[r]))return!0}},fn.prototype={chunkSize:function(){return this.size},removeInner:function(r,o){this.size-=o;for(var e=0;e<this.children.length;++e){var t=this.children[e],n=t.chunkSize();if(r<n){var i=Math.min(o,n-r),l=t.height;if(t.removeInner(r,i),this.height-=l-t.height,n==i&&(this.children.splice(e--,1),t.parent=null),0==(o-=i))break;r=0}else r-=n}if(this.size-o<25&&(this.children.length>1||!(this.children[0]instanceof Hi))){var a=[];this.collapse(a),this.children=[new Hi(a)],this.children[0].parent=this}},collapse:function(r){for(var o=0;o<this.children.length;++o)this.children[o].collapse(r)},insertInner:function(r,o,e){this.size+=o.length,this.height+=e;for(var t=0;t<this.children.length;++t){var n=this.children[t],i=n.chunkSize();if(r<=i){if(n.insertInner(r,o,e),n.lines&&n.lines.length>50){for(var l=n.lines.length%25+25,a=l;a<n.lines.length;){var s=new Hi(n.lines.slice(a,a+=25));n.height-=s.height,this.children.splice(++t,0,s),s.parent=this}n.lines=n.lines.slice(0,l),this.maybeSpill()}break}r-=i}},maybeSpill:function(){if(!(this.children.length<=10)){var r=this;do{var e=new fn(r.children.splice(r.children.length-5,5));if(r.parent){r.size-=e.size,r.height-=e.height;var n=A(r.parent.children,r);r.parent.children.splice(n+1,0,e)}else{var t=new fn(r.children);t.parent=r,r.children=[t,e],r=t}e.parent=r.parent}while(r.children.length>10);r.parent.maybeSpill()}},iterN:function(r,o,e){for(var t=0;t<this.children.length;++t){var n=this.children[t],i=n.chunkSize();if(r<i){var l=Math.min(o,i-r);if(n.iterN(r,l,e))return!0;if(0==(o-=l))break;r=0}else r-=i}}};var hn=function(r,o,e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.doc=r,this.node=o};function Pi(r,o,e){tr(o)<(r.curOp&&r.curOp.scrollTop||r.doc.scrollTop)&&_l(r,e)}hn.prototype.clear=function(){var r=this.doc.cm,o=this.line.widgets,e=this.line,t=Re(e);if(null!=t&&o){for(var n=0;n<o.length;++n)o[n]==this&&o.splice(n--,1);o.length||(e.widgets=null);var i=ki(this);zt(e,Math.max(0,e.height-i)),r&&(ur(r,function(){Pi(r,e,-i),sr(r,t,"widget")}),It(r,"lineWidgetCleared",r,this,t))}},hn.prototype.changed=function(){var r=this,o=this.height,e=this.doc.cm,t=this.line;this.height=null;var n=ki(this)-o;n&&(jr(this.doc,t)||zt(t,t.height+n),e&&ur(e,function(){e.curOp.forceUpdate=!0,Pi(e,t,n),It(e,"lineWidgetChanged",e,r,Re(t))}))},Xt(hn);var aa=0,Hn=function(r,o){this.lines=[],this.type=o,this.doc=r,this.id=++aa};function ai(r,o,e,t,n){if(t&&t.shared)return function Bi(r,o,e,t,n){(t=G(t)).shared=!1;var i=[ai(r,o,e,t,n)],l=i[0],a=t.widgetNode;return ln(r,function(s){a&&(t.widgetNode=a.cloneNode(!0)),i.push(ai(s,ve(s,o),ve(s,e),t,n));for(var u=0;u<s.linked.length;++u)if(s.linked[u].isParent)return;l=be(i)}),new Tr(i,l)}(r,o,e,t,n);if(r.cm&&!r.cm.curOp)return Ht(r.cm,ai)(r,o,e,t,n);var i=new Hn(r,n),l=O(o,e);if(t&&G(t,i,!1),l>0||0==l&&!1!==i.clearWhenEmpty)return i;if(i.replacedWith&&(i.collapsed=!0,i.widgetNode=ne("span",[i.replacedWith],"CodeMirror-widget"),t.handleMouseEvents||i.widgetNode.setAttribute("cm-ignore-events","true"),t.insertLeft&&(i.widgetNode.insertLeft=!0)),i.collapsed){if(eo(r,o.line,o,e,i)||o.line!=e.line&&eo(r,e.line,o,e,i))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Qr(){Jr=!0}()}i.addToHistory&&Vl(r,{from:o,to:e,origin:"markText"},r.sel,NaN);var u,a=o.line,s=r.cm;if(r.iter(a,e.line+1,function(h){s&&i.collapsed&&!s.options.lineWrapping&&Ir(h)==s.display.maxLine&&(u=!0),i.collapsed&&a!=o.line&&zt(h,0),function Zi(r,o,e){var t=e&&window.WeakSet&&(e.markedSpans||(e.markedSpans=new WeakSet));t&&r.markedSpans&&t.has(r.markedSpans)?r.markedSpans.push(o):(r.markedSpans=r.markedSpans?r.markedSpans.concat([o]):[o],t&&t.add(r.markedSpans)),o.marker.attachLine(r)}(h,new Ro(i,a==o.line?o.ch:null,a==e.line?e.ch:null),r.cm&&r.cm.curOp),++a}),i.collapsed&&r.iter(o.line,e.line+1,function(h){jr(r,h)&&zt(h,0)}),i.clearOnEnter&&R(i,"beforeCursorEnter",function(){return i.clear()}),i.readOnly&&(function Ta(){La=!0}(),(r.history.done.length||r.history.undone.length)&&r.clearHistory()),i.collapsed&&(i.id=++aa,i.atomic=!0),s){if(u&&(s.curOp.updateMaxLine=!0),i.collapsed)At(s,o.line,e.line+1);else if(i.className||i.startStyle||i.endStyle||i.css||i.attributes||i.title)for(var f=o.line;f<=e.line;f++)sr(s,f,"text");i.atomic&&bo(s.doc),It(s,"markerAdded",s,i)}return i}Hn.prototype.clear=function(){if(!this.explicitlyCleared){var r=this.doc.cm,o=r&&!r.curOp;if(o&&En(r),Be(this,"clear")){var e=this.find();e&&It(this,"clear",e.from,e.to)}for(var t=null,n=null,i=0;i<this.lines.length;++i){var l=this.lines[i],a=Yi(l.markedSpans,this);r&&!this.collapsed?sr(r,Re(l),"text"):r&&(null!=a.to&&(n=Re(l)),null!=a.from&&(t=Re(l))),l.markedSpans=zo(l.markedSpans,a),null==a.from&&this.collapsed&&!jr(this.doc,l)&&r&&zt(l,Mi(r.display))}if(r&&this.collapsed&&!r.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var u=Ir(this.lines[s]),f=bi(u);f>r.display.maxLineLength&&(r.display.maxLine=u,r.display.maxLineLength=f,r.display.maxLineChanged=!0)}null!=t&&r&&this.collapsed&&At(r,t,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,r&&bo(r.doc)),r&&It(r,"markerCleared",r,this,t,n),o&&Vn(r),this.parent&&this.parent.clear()}},Hn.prototype.find=function(r,o){null==r&&"bookmark"==this.type&&(r=1);for(var e,t,n=0;n<this.lines.length;++n){var i=this.lines[n],l=Yi(i.markedSpans,this);if(null!=l.from&&(e=C(o?i:Re(i),l.from),-1==r))return e;if(null!=l.to&&(t=C(o?i:Re(i),l.to),1==r))return t}return e&&{from:e,to:t}},Hn.prototype.changed=function(){var r=this,o=this.find(-1,!0),e=this,t=this.doc.cm;!o||!t||ur(t,function(){var n=o.line,i=Re(o.line),l=Il(t,i);if(l&&(ja(l),t.curOp.selectionChanged=t.curOp.forceUpdate=!0),t.curOp.updateMaxLine=!0,!jr(e.doc,n)&&null!=e.height){var a=e.height;e.height=null;var s=ki(e)-a;s&&zt(n,n.height+s)}It(t,"markerChanged",t,r)})},Hn.prototype.attachLine=function(r){if(!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(!o.maybeHiddenMarkers||-1==A(o.maybeHiddenMarkers,this))&&(o.maybeUnhiddenMarkers||(o.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(r)},Hn.prototype.detachLine=function(r){if(this.lines.splice(A(this.lines,r),1),!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(o.maybeHiddenMarkers||(o.maybeHiddenMarkers=[])).push(this)}},Xt(Hn);var Tr=function(r,o){this.markers=r,this.primary=o;for(var e=0;e<r.length;++e)r[e].parent=this};function Ri(r){return r.findMarks(C(r.first,0),r.clipPos(C(r.lastLine())),function(o){return o.parent})}function ss(r){for(var o=function(t){var n=r[t],i=[n.primary.doc];ln(n.primary.doc,function(s){return i.push(s)});for(var l=0;l<n.markers.length;l++){var a=n.markers[l];-1==A(i,a.doc)&&(a.parent=null,n.markers.splice(l--,1))}},e=0;e<r.length;e++)o(e)}Tr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var r=0;r<this.markers.length;++r)this.markers[r].clear();It(this,"clear")}},Tr.prototype.find=function(r,o){return this.primary.find(r,o)},Xt(Tr);var Qs=0,rr=function(r,o,e,t,n){if(!(this instanceof rr))return new rr(r,o,e,t,n);null==e&&(e=0),fn.call(this,[new Hi([new Vr("",null)])]),this.first=e,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=e;var i=C(e,0);this.sel=De(i),this.history=new mo(null),this.id=++Qs,this.modeOption=o,this.lineSep=t,this.direction="rtl"==n?"rtl":"ltr",this.extend=!1,"string"==typeof r&&(r=this.splitLines(r)),ri(this,{from:i,to:i,text:r}),Yt(this,De(i),se)};rr.prototype=fr(fn.prototype,{constructor:rr,iter:function(r,o,e){e?this.iterN(r-this.first,o-r,e):this.iterN(this.first,this.first+this.size,r)},insert:function(r,o){for(var e=0,t=0;t<o.length;++t)e+=o[t].height;this.insertInner(r-this.first,o,e)},remove:function(r,o){this.removeInner(r-this.first,o)},getValue:function(r){var o=le(this,this.first,this.first+this.size);return!1===r?o:o.join(r||this.lineSeparator())},setValue:Oe(function(r){var o=C(this.first,0),e=this.first+this.size-1;oi(this,{from:o,to:C(e,oe(this,e).text.length),text:this.splitLines(r),origin:"setValue",full:!0},!0),this.cm&&Jn(this.cm,0,0),Yt(this,De(o),se)}),replaceRange:function(r,o,e,t){qr(this,r,o=ve(this,o),e=e?ve(this,e):o,t)},getRange:function(r,o,e){var t=Ve(this,ve(this,r),ve(this,o));return!1===e?t:t.join(""===e?"":e||this.lineSeparator())},getLine:function(r){var o=this.getLineHandle(r);return o&&o.text},getLineHandle:function(r){if(p(this,r))return oe(this,r)},getLineNumber:function(r){return Re(r)},getLineHandleVisualStart:function(r){return"number"==typeof r&&(r=oe(this,r)),Ir(r)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(r){return ve(this,r)},getCursor:function(r){var o=this.sel.primary();return null==r||"head"==r?o.head:"anchor"==r?o.anchor:"end"==r||"to"==r||!1===r?o.to():o.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Oe(function(r,o,e){$l(this,ve(this,"number"==typeof r?C(r,o||0):r),null,e)}),setSelection:Oe(function(r,o,e){$l(this,ve(this,r),ve(this,o||r),e)}),extendSelection:Oe(function(r,o,e){sn(this,ve(this,r),o&&ve(this,o),e)}),extendSelections:Oe(function(r,o){cl(this,ye(this,r),o)}),extendSelectionsBy:Oe(function(r,o){cl(this,ye(this,or(this.sel.ranges,r)),o)}),setSelections:Oe(function(r,o,e){if(r.length){for(var t=[],n=0;n<r.length;n++)t[n]=new Ue(ve(this,r[n].anchor),ve(this,r[n].head||r[n].anchor));null==o&&(o=Math.min(r.length-1,this.sel.primIndex)),Yt(this,xt(this.cm,t,o),e)}}),addSelection:Oe(function(r,o,e){var t=this.sel.ranges.slice(0);t.push(new Ue(ve(this,r),ve(this,o||r))),Yt(this,xt(this.cm,t,t.length-1),e)}),getSelection:function(r){for(var e,o=this.sel.ranges,t=0;t<o.length;t++){var n=Ve(this,o[t].from(),o[t].to());e=e?e.concat(n):n}return!1===r?e:e.join(r||this.lineSeparator())},getSelections:function(r){for(var o=[],e=this.sel.ranges,t=0;t<e.length;t++){var n=Ve(this,e[t].from(),e[t].to());!1!==r&&(n=n.join(r||this.lineSeparator())),o[t]=n}return o},replaceSelection:function(r,o,e){for(var t=[],n=0;n<this.sel.ranges.length;n++)t[n]=r;this.replaceSelections(t,o,e||"+input")},replaceSelections:Oe(function(r,o,e){for(var t=[],n=this.sel,i=0;i<n.ranges.length;i++){var l=n.ranges[i];t[i]={from:l.from(),to:l.to(),text:this.splitLines(r[i]),origin:e}}for(var a=o&&"end"!=o&&function Zl(r,o,e){for(var t=[],n=C(r.first,0),i=n,l=0;l<o.length;l++){var a=o[l],s=Yl(a.from,n,i),u=Yl(_t(a),n,i);if(n=a.to,i=u,"around"==e){var f=r.sel.ranges[l],h=O(f.head,f.anchor)<0;t[l]=new Ue(h?u:s,h?s:u)}else t[l]=new Ue(s,s)}return new vr(t,r.sel.primIndex)}(this,t,o),s=t.length-1;s>=0;s--)oi(this,t[s]);a?ta(this,a):this.cm&&An(this.cm)}),undo:Oe(function(){un(this,"undo")}),redo:Oe(function(){un(this,"redo")}),undoSelection:Oe(function(){un(this,"undo",!0)}),redoSelection:Oe(function(){un(this,"redo",!0)}),setExtending:function(r){this.extend=r},getExtending:function(){return this.extend},historySize:function(){for(var r=this.history,o=0,e=0,t=0;t<r.done.length;t++)r.done[t].ranges||++o;for(var n=0;n<r.undone.length;n++)r.undone[n].ranges||++e;return{undo:o,redo:e}},clearHistory:function(){var r=this;this.history=new mo(this.history),ln(this,function(o){return o.history=r.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(r){return r&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(r){return this.history.generation==(r||this.cleanGeneration)},getHistory:function(){return{done:Oi(this.history.done),undone:Oi(this.history.undone)}},setHistory:function(r){var o=this.history=new mo(this.history);o.done=Oi(r.done.slice(0),null,!0),o.undone=Oi(r.undone.slice(0),null,!0)},setGutterMarker:Oe(function(r,o,e){return Ii(this,r,"gutter",function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[o]=e,!e&&L(n)&&(t.gutterMarkers=null),!0})}),clearGutter:Oe(function(r){var o=this;this.iter(function(e){e.gutterMarkers&&e.gutterMarkers[r]&&Ii(o,e,"gutter",function(){return e.gutterMarkers[r]=null,L(e.gutterMarkers)&&(e.gutterMarkers=null),!0})})}),lineInfo:function(r){var o;if("number"==typeof r){if(!(p(this,r)&&(o=r,r=oe(this,r))))return null}else if(null==(o=Re(r)))return null;return{line:o,handle:r,text:r.text,gutterMarkers:r.gutterMarkers,textClass:r.textClass,bgClass:r.bgClass,wrapClass:r.wrapClass,widgets:r.widgets}},addLineClass:Oe(function(r,o,e){return Ii(this,r,"gutter"==o?"gutter":"class",function(t){var n="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass";if(t[n]){if(m(e).test(t[n]))return!1;t[n]+=" "+e}else t[n]=e;return!0})}),removeLineClass:Oe(function(r,o,e){return Ii(this,r,"gutter"==o?"gutter":"class",function(t){var n="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass",i=t[n];if(!i)return!1;if(null==e)t[n]=null;else{var l=i.match(m(e));if(!l)return!1;var a=l.index+l[0].length;t[n]=i.slice(0,l.index)+(l.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Oe(function(r,o,e){return function So(r,o,e,t){var n=new hn(r,e,t),i=r.cm;return i&&n.noHScroll&&(i.display.alignWidgets=!0),Ii(r,o,"widget",function(l){var a=l.widgets||(l.widgets=[]);if(null==n.insertAt?a.push(n):a.splice(Math.min(a.length,Math.max(0,n.insertAt)),0,n),n.line=l,i&&!jr(r,l)){var s=tr(l)<r.scrollTop;zt(l,l.height+ki(n)),s&&_l(i,n.height),i.curOp.forceUpdate=!0}return!0}),i&&It(i,"lineWidgetAdded",i,n,"number"==typeof o?o:Re(o)),n}(this,r,o,e)}),removeLineWidget:function(r){r.clear()},markText:function(r,o,e){return ai(this,ve(this,r),ve(this,o),e,e&&e.type||"range")},setBookmark:function(r,o){var e={replacedWith:o&&(null==o.nodeType?o.widget:o),insertLeft:o&&o.insertLeft,clearWhenEmpty:!1,shared:o&&o.shared,handleMouseEvents:o&&o.handleMouseEvents};return ai(this,r=ve(this,r),r,e,"bookmark")},findMarksAt:function(r){var o=[],e=oe(this,(r=ve(this,r)).line).markedSpans;if(e)for(var t=0;t<e.length;++t){var n=e[t];(null==n.from||n.from<=r.ch)&&(null==n.to||n.to>=r.ch)&&o.push(n.marker.parent||n.marker)}return o},findMarks:function(r,o,e){r=ve(this,r),o=ve(this,o);var t=[],n=r.line;return this.iter(r.line,o.line+1,function(i){var l=i.markedSpans;if(l)for(var a=0;a<l.length;a++){var s=l[a];!(null!=s.to&&n==r.line&&r.ch>=s.to||null==s.from&&n!=r.line||null!=s.from&&n==o.line&&s.from>=o.ch)&&(!e||e(s.marker))&&t.push(s.marker.parent||s.marker)}++n}),t},getAllMarks:function(){var r=[];return this.iter(function(o){var e=o.markedSpans;if(e)for(var t=0;t<e.length;++t)null!=e[t].from&&r.push(e[t].marker)}),r},posFromIndex:function(r){var o,e=this.first,t=this.lineSeparator().length;return this.iter(function(n){var i=n.text.length+t;if(i>r)return o=r,!0;r-=i,++e}),ve(this,C(e,o))},indexFromPos:function(r){var o=(r=ve(this,r)).ch;if(r.line<this.first||r.ch<0)return 0;var e=this.lineSeparator().length;return this.iter(this.first,r.line,function(t){o+=t.text.length+e}),o},copy:function(r){var o=new rr(le(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return o.scrollTop=this.scrollTop,o.scrollLeft=this.scrollLeft,o.sel=this.sel,o.extend=!1,r&&(o.history.undoDepth=this.history.undoDepth,o.setHistory(this.getHistory())),o},linkedDoc:function(r){r||(r={});var o=this.first,e=this.first+this.size;null!=r.from&&r.from>o&&(o=r.from),null!=r.to&&r.to<e&&(e=r.to);var t=new rr(le(this,o,e),r.mode||this.modeOption,o,this.lineSep,this.direction);return r.sharedHist&&(t.history=this.history),(this.linked||(this.linked=[])).push({doc:t,sharedHist:r.sharedHist}),t.linked=[{doc:this,isParent:!0,sharedHist:r.sharedHist}],function Js(r,o){for(var e=0;e<o.length;e++){var t=o[e],n=t.find(),i=r.clipPos(n.from),l=r.clipPos(n.to);if(O(i,l)){var a=ai(r,i,l,t.primary,t.primary.type);t.markers.push(a),a.parent=t}}}(t,Ri(this)),t},unlinkDoc:function(r){if(r instanceof ct&&(r=r.doc),this.linked)for(var o=0;o<this.linked.length;++o)if(this.linked[o].doc==r){this.linked.splice(o,1),r.unlinkDoc(this),ss(Ri(this));break}if(r.history==this.history){var t=[r.id];ln(r,function(n){return t.push(n.id)},!0),r.history=new mo(null),r.history.done=Oi(this.history.done,t),r.history.undone=Oi(this.history.undone,t)}},iterLinkedDocs:function(r){ln(this,r)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(r){return this.lineSep?r.split(this.lineSep):zn(r)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Oe(function(r){"rtl"!=r&&(r="ltr"),r!=this.direction&&(this.direction=r,this.iter(function(o){return o.order=null}),this.cm&&function ts(r){ur(r,function(){an(r),At(r)})}(this.cm))})}),rr.prototype.eachLine=rr.prototype.iter;var us=0;function nr(r){var o=this;if(hs(o),!We(o,r)&&!$r(o.display,r)){nt(r),te&&(us=+new Date);var e=Tn(o,r,!0),t=r.dataTransfer.files;if(e&&!o.isReadOnly())if(t&&t.length&&window.FileReader&&window.File)for(var n=t.length,i=Array(n),l=0,a=function(){++l==n&&Ht(o,function(){var d={from:e=ve(o.doc,e),to:e,text:o.doc.splitLines(i.filter(function(g){return null!=g}).join(o.doc.lineSeparator())),origin:"paste"};oi(o.doc,d),ta(o.doc,De(ve(o.doc,e),ve(o.doc,_t(d))))})()},s=function(d,g){if(o.options.allowDropFileTypes&&-1==A(o.options.allowDropFileTypes,d.type))a();else{var y=new FileReader;y.onerror=function(){return a()},y.onload=function(){var w=y.result;/[\x00-\x08\x0e-\x1f]{2}/.test(w)||(i[g]=w),a()},y.readAsText(d)}},u=0;u<t.length;u++)s(t[u],u);else{if(o.state.draggingText&&o.doc.sel.contains(e)>-1)return o.state.draggingText(r),void setTimeout(function(){return o.display.input.focus()},20);try{var f=r.dataTransfer.getData("Text");if(f){var h;if(o.state.draggingText&&!o.state.draggingText.copy&&(h=o.listSelections()),xo(o.doc,De(e,e)),h)for(var c=0;c<h.length;++c)qr(o.doc,"",h[c].anchor,h[c].head,"drag");o.replaceSelection(f,"around","paste"),o.display.input.focus()}}catch{}}}}function hs(r){r.display.dragCursor&&(r.display.lineSpace.removeChild(r.display.dragCursor),r.display.dragCursor=null)}function cs(r){if(document.getElementsByClassName){for(var o=document.getElementsByClassName("CodeMirror"),e=[],t=0;t<o.length;t++){var n=o[t].CodeMirror;n&&e.push(n)}e.length&&e[0].operation(function(){for(var i=0;i<e.length;i++)r(e[i])})}}var sa=!1;function ds(){sa||(function ps(){var r;R(window,"resize",function(){null==r&&(r=setTimeout(function(){r=null,cs($s)},100))}),R(window,"blur",function(){return cs(Dn)})}(),sa=!0)}function $s(r){var o=r.display;o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.scrollbarsClipped=!1,r.setSize()}for(var Pn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ko=0;ko<10;ko++)Pn[ko+48]=Pn[ko+96]=String(ko);for(var _r=65;_r<=90;_r++)Pn[_r]=String.fromCharCode(_r);for(var cn=1;cn<=12;cn++)Pn[cn+111]=Pn[cn+63235]="F"+cn;var Mr={};function Lo(r){var o=r.split(/-(?!$)/);r=o[o.length-1];for(var e,t,n,i,l=0;l<o.length-1;l++){var a=o[l];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))t=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return e&&(r="Alt-"+r),t&&(r="Ctrl-"+r),i&&(r="Cmd-"+r),n&&(r="Shift-"+r),r}function dn(r){var o={};for(var e in r)if(r.hasOwnProperty(e)){var t=r[e];if(/^(name|fallthrough|(de|at)tach)$/.test(e))continue;if("..."==t){delete r[e];continue}for(var n=or(e.split(" "),Lo),i=0;i<n.length;i++){var l=void 0,a=void 0;i==n.length-1?(a=n.join(" "),l=t):(a=n.slice(0,i+1).join(" "),l="...");var s=o[a];if(s){if(s!=l)throw new Error("Inconsistent bindings for "+a)}else o[a]=l}delete r[e]}for(var u in o)r[u]=o[u];return r}function zi(r,o,e,t){var n=(o=To(o)).call?o.call(r,t):o[r];if(!1===n)return"nothing";if("..."===n)return"multi";if(null!=n&&e(n))return"handled";if(o.fallthrough){if("[object Array]"!=Object.prototype.toString.call(o.fallthrough))return zi(r,o.fallthrough,e,t);for(var i=0;i<o.fallthrough.length;i++){var l=zi(r,o.fallthrough[i],e,t);if(l)return l}}}function vs(r){var o="string"==typeof r?r:Pn[r.keyCode];return"Ctrl"==o||"Alt"==o||"Shift"==o||"Mod"==o}function si(r,o,e){var t=r;return o.altKey&&"Alt"!=t&&(r="Alt-"+r),(Kt?o.metaKey:o.ctrlKey)&&"Ctrl"!=t&&(r="Ctrl-"+r),(Kt?o.ctrlKey:o.metaKey)&&"Mod"!=t&&(r="Cmd-"+r),!e&&o.shiftKey&&"Shift"!=t&&(r="Shift-"+r),r}function ua(r,o){if(Ce&&34==r.keyCode&&r.char)return!1;var e=Pn[r.keyCode];return null!=e&&!r.altGraphKey&&(3==r.keyCode&&r.code&&(e=r.code),si(e,r,o))}function To(r){return"string"==typeof r?Mr[r]:r}function ui(r,o){for(var e=r.doc.sel.ranges,t=[],n=0;n<e.length;n++){for(var i=o(e[n]);t.length&&O(i.from,be(t).to)<=0;){var l=t.pop();if(O(l.from,i.from)<0){i.from=l.from;break}}t.push(i)}ur(r,function(){for(var a=t.length-1;a>=0;a--)qr(r.doc,"",t[a].from,t[a].to,"+delete");An(r)})}function _i(r,o,e){var t=we(r.text,o+e,e);return t<0||t>r.text.length?null:t}function Bn(r,o,e){var t=_i(r,o.ch,e);return null==t?null:new C(o.line,t,e<0?"after":"before")}function Mo(r,o,e,t,n){if(r){"rtl"==o.doc.direction&&(n=-n);var i=lt(e,o.doc.direction);if(i){var u,l=n<0?be(i):i[0],s=n<0==(1==l.level)?"after":"before";if(l.level>0||"rtl"==o.doc.direction){var f=Un(o,e),h=Cr(o,f,u=n<0?e.text.length-1:0).top;u=fe(function(c){return Cr(o,f,c).top==h},n<0==(1==l.level)?l.from:l.to-1,u),"before"==s&&(u=_i(e,u,1))}else u=n<0?l.to:l.from;return new C(t,u,s)}}return new C(t,n<0?e.text.length:0,n<0?"before":"after")}Mr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Mr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Mr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Mr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Mr.default=Ye?Mr.macDefault:Mr.pcDefault;var fi={selectAll:Co,singleSelection:function(r){return r.setSelection(r.getCursor("anchor"),r.getCursor("head"),se)},killLine:function(r){return ui(r,function(o){if(o.empty()){var e=oe(r.doc,o.head.line).text.length;return o.head.ch==e&&o.head.line<r.lastLine()?{from:o.head,to:C(o.head.line+1,0)}:{from:o.head,to:C(o.head.line,e)}}return{from:o.from(),to:o.to()}})},deleteLine:function(r){return ui(r,function(o){return{from:C(o.from().line,0),to:ve(r.doc,C(o.to().line+1,0))}})},delLineLeft:function(r){return ui(r,function(o){return{from:C(o.from().line,0),to:o.from()}})},delWrappedLineLeft:function(r){return ui(r,function(o){var e=r.charCoords(o.head,"div").top+5;return{from:r.coordsChar({left:0,top:e},"div"),to:o.from()}})},delWrappedLineRight:function(r){return ui(r,function(o){var e=r.charCoords(o.head,"div").top+5,t=r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:e},"div");return{from:o.from(),to:t}})},undo:function(r){return r.undo()},redo:function(r){return r.redo()},undoSelection:function(r){return r.undoSelection()},redoSelection:function(r){return r.redoSelection()},goDocStart:function(r){return r.extendSelection(C(r.firstLine(),0))},goDocEnd:function(r){return r.extendSelection(C(r.lastLine()))},goLineStart:function(r){return r.extendSelectionsBy(function(o){return gs(r,o.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(r){return r.extendSelectionsBy(function(o){return ha(r,o.head)},{origin:"+move",bias:1})},goLineEnd:function(r){return r.extendSelectionsBy(function(o){return function Do(r,o){var e=oe(r.doc,o),t=function Na(r){for(var o;o=$i(r);)r=o.find(1,!0).line;return r}(e);return t!=e&&(o=Re(t)),Mo(!0,r,e,o,-1)}(r,o.head.line)},{origin:"+move",bias:-1})},goLineRight:function(r){return r.extendSelectionsBy(function(o){var e=r.cursorCoords(o.head,"div").top+5;return r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:e},"div")},yt)},goLineLeft:function(r){return r.extendSelectionsBy(function(o){var e=r.cursorCoords(o.head,"div").top+5;return r.coordsChar({left:0,top:e},"div")},yt)},goLineLeftSmart:function(r){return r.extendSelectionsBy(function(o){var e=r.cursorCoords(o.head,"div").top+5,t=r.coordsChar({left:0,top:e},"div");return t.ch<r.getLine(t.line).search(/\S/)?ha(r,o.head):t},yt)},goLineUp:function(r){return r.moveV(-1,"line")},goLineDown:function(r){return r.moveV(1,"line")},goPageUp:function(r){return r.moveV(-1,"page")},goPageDown:function(r){return r.moveV(1,"page")},goCharLeft:function(r){return r.moveH(-1,"char")},goCharRight:function(r){return r.moveH(1,"char")},goColumnLeft:function(r){return r.moveH(-1,"column")},goColumnRight:function(r){return r.moveH(1,"column")},goWordLeft:function(r){return r.moveH(-1,"word")},goGroupRight:function(r){return r.moveH(1,"group")},goGroupLeft:function(r){return r.moveH(-1,"group")},goWordRight:function(r){return r.moveH(1,"word")},delCharBefore:function(r){return r.deleteH(-1,"codepoint")},delCharAfter:function(r){return r.deleteH(1,"char")},delWordBefore:function(r){return r.deleteH(-1,"word")},delWordAfter:function(r){return r.deleteH(1,"word")},delGroupBefore:function(r){return r.deleteH(-1,"group")},delGroupAfter:function(r){return r.deleteH(1,"group")},indentAuto:function(r){return r.indentSelection("smart")},indentMore:function(r){return r.indentSelection("add")},indentLess:function(r){return r.indentSelection("subtract")},insertTab:function(r){return r.replaceSelection("\t")},insertSoftTab:function(r){for(var o=[],e=r.listSelections(),t=r.options.tabSize,n=0;n<e.length;n++){var i=e[n].from(),l=$(r.getLine(i.line),i.ch,t);o.push(bt(t-l%t))}r.replaceSelections(o)},defaultTab:function(r){r.somethingSelected()?r.indentSelection("add"):r.execCommand("insertTab")},transposeChars:function(r){return ur(r,function(){for(var o=r.listSelections(),e=[],t=0;t<o.length;t++)if(o[t].empty()){var n=o[t].head,i=oe(r.doc,n.line).text;if(i)if(n.ch==i.length&&(n=new C(n.line,n.ch-1)),n.ch>0)n=new C(n.line,n.ch+1),r.replaceRange(i.charAt(n.ch-1)+i.charAt(n.ch-2),C(n.line,n.ch-2),n,"+transpose");else if(n.line>r.doc.first){var l=oe(r.doc,n.line-1).text;l&&(n=new C(n.line,1),r.replaceRange(i.charAt(0)+r.doc.lineSeparator()+l.charAt(l.length-1),C(n.line-1,l.length-1),n,"+transpose"))}e.push(new Ue(n,n))}r.setSelections(e)})},newlineAndIndent:function(r){return ur(r,function(){for(var o=r.listSelections(),e=o.length-1;e>=0;e--)r.replaceRange(r.doc.lineSeparator(),o[e].anchor,o[e].head,"+input");o=r.listSelections();for(var t=0;t<o.length;t++)r.indentLine(o[t].from().line,null,!0);An(r)})},openLine:function(r){return r.replaceSelection("\n","start")},toggleOverwrite:function(r){return r.toggleOverwrite()}};function gs(r,o){var e=oe(r.doc,o),t=Ir(e);return t!=e&&(o=Re(t)),Mo(!0,r,t,o,1)}function ha(r,o){var e=gs(r,o.line),t=oe(r.doc,e.line),n=lt(t,r.doc.direction);if(!n||0==n[0].level){var i=Math.max(e.ch,t.text.search(/\S/));return C(e.line,o.line==e.line&&o.ch<=i&&o.ch?0:i,e.sticky)}return e}function dl(r,o,e){if("string"==typeof o&&!(o=fi[o]))return!1;r.display.input.ensurePolled();var t=r.display.shift,n=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),e&&(r.display.shift=!1),n=o(r)!=B}finally{r.display.shift=t,r.state.suppressEdits=!1}return n}var pl=new N;function Ao(r,o,e,t){var n=r.state.keySeq;if(n){if(vs(o))return"handled";if(/\'$/.test(o)?r.state.keySeq=null:pl.set(50,function(){r.state.keySeq==n&&(r.state.keySeq=null,r.display.input.reset())}),ys(r,n+" "+o,e,t))return!0}return ys(r,o,e,t)}function ys(r,o,e,t){var n=function ms(r,o,e){for(var t=0;t<r.state.keyMaps.length;t++){var n=zi(o,r.state.keyMaps[t],e,r);if(n)return n}return r.options.extraKeys&&zi(o,r.options.extraKeys,e,r)||zi(o,r.options.keyMap,e,r)}(r,o,t);return"multi"==n&&(r.state.keySeq=o),"handled"==n&&It(r,"keyHandled",r,o,e),("handled"==n||"multi"==n)&&(nt(e),Di(r)),!!n}function Gi(r,o){var e=ua(o,!0);return!!e&&(o.shiftKey&&!r.state.keySeq?Ao(r,"Shift-"+e,o,function(t){return dl(r,t,!0)})||Ao(r,e,o,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return dl(r,t)}):Ao(r,e,o,function(t){return dl(r,t)}))}var vl=null;function bs(r){var o=this;if(!(r.target&&r.target!=o.display.input.getField()||(o.curOp.focus=H(S(o)),We(o,r)))){te&&j<11&&27==r.keyCode&&(r.returnValue=!1);var e=r.keyCode;o.display.shift=16==e||r.shiftKey;var t=Gi(o,r);Ce&&(vl=t?e:null,!t&&88==e&&!xr&&(Ye?r.metaKey:r.ctrlKey)&&o.replaceSelection("",null,"cut")),Q&&!Ye&&!t&&46==e&&r.shiftKey&&!r.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==e&&!/\bCodeMirror-crosshair\b/.test(o.display.lineDiv.className)&&function ca(r){var o=r.display.lineDiv;function e(t){(18==t.keyCode||!t.altKey)&&(Nt(o,"CodeMirror-crosshair"),ie(document,"keyup",e),ie(document,"mouseover",e))}re(o,"CodeMirror-crosshair"),R(document,"keyup",e),R(document,"mouseover",e)}(o)}}function da(r){16==r.keyCode&&(this.doc.sel.shift=!1),We(this,r)}function ws(r){var o=this;if(!(r.target&&r.target!=o.display.input.getField()||$r(o.display,r)||We(o,r)||r.ctrlKey&&!r.altKey||Ye&&r.metaKey)){var e=r.keyCode,t=r.charCode;if(Ce&&e==vl)return vl=null,void nt(r);if(!Ce||r.which&&!(r.which<10)||!Gi(o,r)){var n=String.fromCharCode(t??e);"\b"!=n&&(function xs(r,o,e){return Ao(r,"'"+e+"'",o,function(t){return dl(r,t,!0)})}(o,r,n)||o.display.input.onKeyPress(r))}}}var No,hi,gl=function(r,o,e){this.time=r,this.pos=o,this.button=e};function Ui(r){var o=this,e=o.display;if(!(We(o,r)||e.activeTouch&&e.input.supportsTouch())){if(e.input.ensurePolled(),e.shift=r.shiftKey,$r(e,r))return void(P||(e.scroller.draggable=!1,setTimeout(function(){return e.scroller.draggable=!0},100)));if(!pa(o,r)){var t=Tn(o,r),n=Yr(r),i=t?function Fo(r,o){var e=+new Date;return hi&&hi.compare(e,r,o)?(No=hi=null,"triple"):No&&No.compare(e,r,o)?(hi=new gl(e,r,o),No=null,"double"):(No=new gl(e,r,o),hi=null,"single")}(t,n):"single";ee(o).focus(),1==n&&o.state.selectingText&&o.state.selectingText(r),(!t||!function eu(r,o,e,t,n){var i="Click";return"double"==t?i="Double"+i:"triple"==t&&(i="Triple"+i),Ao(r,si(i=(1==o?"Left":2==o?"Middle":"Right")+i,n),n,function(l){if("string"==typeof l&&(l=fi[l]),!l)return!1;var a=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),a=l(r,e)!=B}finally{r.state.suppressEdits=!1}return a})}(o,n,t,i,r))&&(1==n?t?function tu(r,o,e,t){te?setTimeout(xe(Ya,r),0):r.curOp.focus=H(S(r));var l,n=function Ss(r,o,e){var t=r.getOption("configureMouse"),n=t?t(r,o,e):{};return null==n.unit&&(n.unit=(Jt?e.shiftKey&&e.metaKey:e.altKey)?"rectangle":"single"==o?"char":"double"==o?"word":"line"),(null==n.extend||r.doc.extend)&&(n.extend=r.doc.extend||e.shiftKey),null==n.addNew&&(n.addNew=Ye?e.metaKey:e.ctrlKey),null==n.moveOnDrag&&(n.moveOnDrag=!(Ye?e.altKey:e.ctrlKey)),n}(r,e,t),i=r.doc.sel;r.options.dragDrop&&ji&&!r.isReadOnly()&&"single"==e&&(l=i.contains(o))>-1&&(O((l=i.ranges[l]).from(),o)<0||o.xRel>0)&&(O(l.to(),o)>0||o.xRel<0)?function ru(r,o,e,t){var n=r.display,i=!1,l=Ht(r,function(u){P&&(n.scroller.draggable=!1),r.state.draggingText=!1,r.state.delayingBlurEvent&&(r.hasFocus()?r.state.delayingBlurEvent=!1:ho(r)),ie(n.wrapper.ownerDocument,"mouseup",l),ie(n.wrapper.ownerDocument,"mousemove",a),ie(n.scroller,"dragstart",s),ie(n.scroller,"drop",l),i||(nt(u),t.addNew||sn(r.doc,e,null,null,t.extend),P&&!pe||te&&9==j?setTimeout(function(){n.wrapper.ownerDocument.body.focus({preventScroll:!0}),n.input.focus()},20):n.input.focus())}),a=function(u){i=i||Math.abs(o.clientX-u.clientX)+Math.abs(o.clientY-u.clientY)>=10},s=function(){return i=!0};P&&(n.scroller.draggable=!0),r.state.draggingText=l,l.copy=!t.moveOnDrag,R(n.wrapper.ownerDocument,"mouseup",l),R(n.wrapper.ownerDocument,"mousemove",a),R(n.scroller,"dragstart",s),R(n.scroller,"drop",l),r.state.delayingBlurEvent=!0,setTimeout(function(){return n.input.focus()},20),n.scroller.dragDrop&&n.scroller.dragDrop()}(r,t,o,n):function nu(r,o,e,t){te&&ho(r);var n=r.display,i=r.doc;nt(o);var l,a,s=i.sel,u=s.ranges;if(t.addNew&&!t.extend?(a=i.sel.contains(e),l=a>-1?u[a]:new Ue(e,e)):(l=i.sel.primary(),a=i.sel.primIndex),"rectangle"==t.unit)t.addNew||(l=new Ue(e,e)),e=Tn(r,o,!0,!0),a=-1;else{var f=ks(r,e,t.unit);l=t.extend?hl(l,f.anchor,f.head,t.extend):f}t.addNew?-1==a?(a=u.length,Yt(i,xt(r,u.concat([l]),a),{scroll:!1,origin:"*mouse"})):u.length>1&&u[a].empty()&&"char"==t.unit&&!t.extend?(Yt(i,xt(r,u.slice(0,a).concat(u.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),s=i.sel):Wi(i,a,l,Se):(a=0,Yt(i,new vr([l],0),Se),s=i.sel);var h=e;function c(D){if(0!=O(h,D))if(h=D,"rectangle"==t.unit){for(var E=[],W=r.options.tabSize,I=$(oe(i,e.line).text,e.ch,W),_=$(oe(i,D.line).text,D.ch,W),q=Math.min(I,_),he=Math.max(I,_),me=Math.min(e.line,D.line),Xe=Math.min(r.lastLine(),Math.max(e.line,D.line));me<=Xe;me++){var Ne=oe(i,me).text,ze=Vt(Ne,q,W);q==he?E.push(new Ue(C(me,ze),C(me,ze))):Ne.length>ze&&E.push(new Ue(C(me,ze),C(me,Vt(Ne,he,W))))}E.length||E.push(new Ue(e,e)),Yt(i,xt(r,s.ranges.slice(0,a).concat(E),a),{origin:"*mouse",scroll:!1}),r.scrollIntoView(D)}else{var Ee,et=l,Fe=ks(r,D,t.unit),_e=et.anchor;O(Fe.anchor,_e)>0?(Ee=Fe.head,_e=St(et.from(),Fe.anchor)):(Ee=Fe.anchor,_e=Ie(et.to(),Fe.head));var Le=s.ranges.slice(0);Le[a]=function Ls(r,o){var e=o.anchor,t=o.head,n=oe(r.doc,e.line);if(0==O(e,t)&&e.sticky==t.sticky)return o;var i=lt(n);if(!i)return o;var l=Ct(i,e.ch,e.sticky),a=i[l];if(a.from!=e.ch&&a.to!=e.ch)return o;var u,s=l+(a.from==e.ch==(1!=a.level)?0:1);if(0==s||s==i.length)return o;if(t.line!=e.line)u=(t.line-e.line)*("ltr"==r.doc.direction?1:-1)>0;else{var f=Ct(i,t.ch,t.sticky),h=f-l||(t.ch-e.ch)*(1==a.level?-1:1);u=f==s-1||f==s?h<0:h>0}var c=i[s+(u?-1:0)],d=u==(1==c.level),g=d?c.from:c.to,y=d?"after":"before";return e.ch==g&&e.sticky==y?o:new Ue(new C(e.line,g,y),t)}(r,new Ue(ve(i,_e),Ee)),Yt(i,xt(r,Le,a),Se)}}var d=n.wrapper.getBoundingClientRect(),g=0;function y(D){var E=++g,W=Tn(r,D,!0,"rectangle"==t.unit);if(W)if(0!=O(W,h)){r.curOp.focus=H(S(r)),c(W);var I=Zn(n,i);(W.line>=I.to||W.line<I.from)&&setTimeout(Ht(r,function(){g==E&&y(D)}),150)}else{var _=D.clientY<d.top?-20:D.clientY>d.bottom?20:0;_&&setTimeout(Ht(r,function(){g==E&&(n.scroller.scrollTop+=_,y(D))}),50)}}function w(D){r.state.selectingText=!1,g=1/0,D&&(nt(D),n.input.focus()),ie(n.wrapper.ownerDocument,"mousemove",k),ie(n.wrapper.ownerDocument,"mouseup",M),i.history.lastSelOrigin=null}var k=Ht(r,function(D){0!==D.buttons&&Yr(D)?y(D):w(D)}),M=Ht(r,w);r.state.selectingText=M,R(n.wrapper.ownerDocument,"mousemove",k),R(n.wrapper.ownerDocument,"mouseup",M)}(r,t,o,n)}(o,t,i,r):qt(r)==e.scroller&&nt(r):2==n?(t&&sn(o.doc,t),setTimeout(function(){return e.input.focus()},20)):3==n&&(ot?o.display.input.onContextMenu(r):ho(o)))}}}function ks(r,o,e){if("char"==e)return new Ue(o,o);if("word"==e)return r.findWordAt(o);if("line"==e)return new Ue(C(o.line,0),ve(r.doc,C(o.line+1,0)));var t=e(r,o);return new Ue(t.from,t.to)}function Ts(r,o,e,t){var n,i;if(o.touches)n=o.touches[0].clientX,i=o.touches[0].clientY;else try{n=o.clientX,i=o.clientY}catch{return!1}if(n>=Math.floor(r.display.gutters.getBoundingClientRect().right))return!1;t&&nt(o);var l=r.display,a=l.lineDiv.getBoundingClientRect();if(i>a.bottom||!Be(r,e))return Ot(o);i-=a.top-l.viewOffset;for(var s=0;s<r.display.gutterSpecs.length;++s){var u=l.gutters.childNodes[s];if(u&&u.getBoundingClientRect().right>=n)return Qe(r,e,r,Wt(r.doc,i),r.display.gutterSpecs[s].className,o),Ot(o)}}function pa(r,o){return Ts(r,o,"gutterClick",!0)}function va(r,o){$r(r.display,o)||function ga(r,o){return!!Be(r,"gutterContextMenu")&&Ts(r,o,"gutterContextMenu",!1)}(r,o)||We(r,o,"contextmenu")||ot||r.display.input.onContextMenu(o)}function ma(r){r.display.wrapper.className=r.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+r.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Li(r)}gl.prototype.compare=function(r,o,e){return this.time+400>r&&0==O(o,this.pos)&&e==this.button};var Ki={toString:function(){return"CodeMirror.Init"}},ya={},pn={};function ml(r,o,e){if(!o!=!(e&&e!=Ki)){var n=r.display.dragFunctions,i=o?R:ie;i(r.display.scroller,"dragstart",n.start),i(r.display.scroller,"dragenter",n.enter),i(r.display.scroller,"dragover",n.over),i(r.display.scroller,"dragleave",n.leave),i(r.display.scroller,"drop",n.drop)}}function iu(r){r.options.lineWrapping?(re(r.display.wrapper,"CodeMirror-wrap"),r.display.sizer.style.minWidth="",r.display.sizerWidth=null):(Nt(r.display.wrapper,"CodeMirror-wrap"),Hr(r)),ao(r),At(r),Li(r),setTimeout(function(){return Lr(r)},100)}function ct(r,o){var e=this;if(!(this instanceof ct))return new ct(r,o);this.options=o=o?G(o):{},G(ya,o,!1);var t=o.value;"string"==typeof t?t=new rr(t,o.mode,null,o.lineSeparator,o.direction):o.mode&&(t.modeOption=o.mode),this.doc=t;var n=new ct.inputStyles[o.inputStyle](this),i=this.display=new es(r,t,n,o);for(var l in i.wrapper.CodeMirror=this,ma(this),o.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ul(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new N,keySeq:null,specialChars:null},o.autofocus&&!de&&i.input.focus(),te&&j<11&&setTimeout(function(){return e.display.input.reset(!0)},20),function ou(r){var o=r.display;R(o.scroller,"mousedown",Ht(r,Ui)),R(o.scroller,"dblclick",te&&j<11?Ht(r,function(s){if(!We(r,s)){var u=Tn(r,s);if(u&&!pa(r,s)&&!$r(r.display,s)){nt(s);var f=r.findWordAt(u);sn(r.doc,f.anchor,f.head)}}}):function(s){return We(r,s)||nt(s)}),R(o.scroller,"contextmenu",function(s){return va(r,s)}),R(o.input.getField(),"contextmenu",function(s){o.scroller.contains(s.target)||va(r,s)});var e,t={end:0};function n(){o.activeTouch&&(e=setTimeout(function(){return o.activeTouch=null},1e3),(t=o.activeTouch).end=+new Date)}function i(s){if(1!=s.touches.length)return!1;var u=s.touches[0];return u.radiusX<=1&&u.radiusY<=1}function l(s,u){if(null==u.left)return!0;var f=u.left-s.left,h=u.top-s.top;return f*f+h*h>400}R(o.scroller,"touchstart",function(s){if(!We(r,s)&&!i(s)&&!pa(r,s)){o.input.ensurePolled(),clearTimeout(e);var u=+new Date;o.activeTouch={start:u,moved:!1,prev:u-t.end<=300?t:null},1==s.touches.length&&(o.activeTouch.left=s.touches[0].pageX,o.activeTouch.top=s.touches[0].pageY)}}),R(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),R(o.scroller,"touchend",function(s){var u=o.activeTouch;if(u&&!$r(o,s)&&null!=u.left&&!u.moved&&new Date-u.start<300){var h,f=r.coordsChar(o.activeTouch,"page");h=!u.prev||l(u,u.prev)?new Ue(f,f):!u.prev.prev||l(u,u.prev.prev)?r.findWordAt(f):new Ue(C(f.line,0),ve(r.doc,C(f.line+1,0))),r.setSelection(h.anchor,h.head),r.focus(),nt(s)}n()}),R(o.scroller,"touchcancel",n),R(o.scroller,"scroll",function(){o.scroller.clientHeight&&(Fn(r,o.scroller.scrollTop),zr(r,o.scroller.scrollLeft,!0),Qe(r,"scroll",r))}),R(o.scroller,"mousewheel",function(s){return ql(r,s)}),R(o.scroller,"DOMMouseScroll",function(s){return ql(r,s)}),R(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(s){We(r,s)||Gr(s)},over:function(s){We(r,s)||(function Vs(r,o){var e=Tn(r,o);if(e){var t=document.createDocumentFragment();qn(r,e,t),r.display.dragCursor||(r.display.dragCursor=T("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),r.display.lineSpace.insertBefore(r.display.dragCursor,r.display.cursorDiv)),Ze(r.display.dragCursor,t)}}(r,s),Gr(s))},start:function(s){return function fs(r,o){if(te&&(!r.state.draggingText||+new Date-us<100))Gr(o);else if(!We(r,o)&&!$r(r.display,o)&&(o.dataTransfer.setData("Text",r.getSelection()),o.dataTransfer.effectAllowed="copyMove",o.dataTransfer.setDragImage&&!pe)){var e=T("img",null,null,"position: fixed; left: 0; top: 0;");e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Ce&&(e.width=e.height=1,r.display.wrapper.appendChild(e),e._top=e.offsetTop),o.dataTransfer.setDragImage(e,0,0),Ce&&e.parentNode.removeChild(e)}}(r,s)},drop:Ht(r,nr),leave:function(s){We(r,s)||hs(r)}};var a=o.input.getField();R(a,"keyup",function(s){return da.call(r,s)}),R(a,"keydown",Ht(r,bs)),R(a,"keypress",Ht(r,ws)),R(a,"focus",function(s){return el(r,s)}),R(a,"blur",function(s){return Dn(r,s)})}(this),ds(),En(this),this.curOp.forceUpdate=!0,sl(this,t),o.autofocus&&!de||this.hasFocus()?setTimeout(function(){e.hasFocus()&&!e.state.focused&&el(e)},20):Dn(this),pn)pn.hasOwnProperty(l)&&pn[l](this,o[l],Ki);il(this),o.finishInit&&o.finishInit(this);for(var a=0;a<at.length;++a)at[a](this);Vn(this),P&&o.lineWrapping&&"optimizelegibility"==getComputedStyle(i.lineDiv).textRendering&&(i.lineDiv.style.textRendering="auto")}ct.defaults=ya,ct.optionHandlers=pn;var at=[];function Eo(r,o,e,t){var i,n=r.doc;null==e&&(e="add"),"smart"==e&&(n.mode.indent?i=mi(r,o).state:e="prev");var l=r.options.tabSize,a=oe(n,o),s=$(a.text,null,l);a.stateAfter&&(a.stateAfter=null);var f,u=a.text.match(/^\s*/)[0];if(t||/\S/.test(a.text)){if("smart"==e&&((f=n.mode.indent(i,a.text.slice(u.length),a.text))==B||f>150)){if(!t)return;e="prev"}}else f=0,e="not";"prev"==e?f=o>n.first?$(oe(n,o-1).text,null,l):0:"add"==e?f=s+r.options.indentUnit:"subtract"==e?f=s-r.options.indentUnit:"number"==typeof e&&(f=s+e),f=Math.max(0,f);var h="",c=0;if(r.options.indentWithTabs)for(var d=Math.floor(f/l);d;--d)c+=l,h+="\t";if(c<f&&(h+=bt(f-c)),h!=u)return qr(n,h,C(o,0),C(o,u.length),"+input"),a.stateAfter=null,!0;for(var g=0;g<n.sel.ranges.length;g++){var y=n.sel.ranges[g];if(y.head.line==o&&y.head.ch<u.length){var w=C(o,u.length);Wi(n,g,new Ue(w,w));break}}}ct.defineInitHook=function(r){return at.push(r)};var gr=null;function Rn(r){gr=r}function mr(r,o,e,t,n){var i=r.doc;r.display.shift=!1,t||(t=i.sel);var l=+new Date-200,a="paste"==n||r.state.pasteIncoming>l,s=zn(o),u=null;if(a&&t.ranges.length>1)if(gr&&gr.text.join("\n")==o){if(t.ranges.length%gr.text.length==0){u=[];for(var f=0;f<gr.text.length;f++)u.push(i.splitLines(gr.text[f]))}}else s.length==t.ranges.length&&r.options.pasteLinesPerSelection&&(u=or(s,function(k){return[k]}));for(var h=r.curOp.updateInput,c=t.ranges.length-1;c>=0;c--){var d=t.ranges[c],g=d.from(),y=d.to();d.empty()&&(e&&e>0?g=C(g.line,g.ch-e):r.state.overwrite&&!a?y=C(y.line,Math.min(oe(i,y.line).text.length,y.ch+be(s).length)):a&&gr&&gr.lineWise&&gr.text.join("\n")==s.join("\n")&&(g=y=C(g.line,0)));var w={from:g,to:y,text:u?u[c%u.length]:s,origin:n||(a?"paste":r.state.cutIncoming>l?"cut":"+input")};oi(r.doc,w),It(r,"inputRead",r,w)}o&&!a&&yl(r,o),An(r),r.curOp.updateInput<2&&(r.curOp.updateInput=h),r.curOp.typing=!0,r.state.pasteIncoming=r.state.cutIncoming=-1}function Oo(r,o){var e=r.clipboardData&&r.clipboardData.getData("Text");if(e)return r.preventDefault(),!o.isReadOnly()&&!o.options.disableInput&&o.hasFocus()&&ur(o,function(){return mr(o,e,0,null,"paste")}),!0}function yl(r,o){if(r.options.electricChars&&r.options.smartIndent)for(var e=r.doc.sel,t=e.ranges.length-1;t>=0;t--){var n=e.ranges[t];if(!(n.head.ch>100||t&&e.ranges[t-1].head.line==n.head.line)){var i=r.getModeAt(n.head),l=!1;if(i.electricChars){for(var a=0;a<i.electricChars.length;a++)if(o.indexOf(i.electricChars.charAt(a))>-1){l=Eo(r,n.head.line,"smart");break}}else i.electricInput&&i.electricInput.test(oe(r.doc,n.head.line).text.slice(0,n.head.ch))&&(l=Eo(r,n.head.line,"smart"));l&&It(r,"electricInput",r,n.head.line)}}}function xa(r){for(var o=[],e=[],t=0;t<r.doc.sel.ranges.length;t++){var n=r.doc.sel.ranges[t].head.line,i={anchor:C(n,0),head:C(n+1,0)};e.push(i),o.push(r.getRange(i.anchor,i.head))}return{text:o,ranges:e}}function xl(r,o,e,t){r.setAttribute("autocorrect",e?"on":"off"),r.setAttribute("autocapitalize",t?"on":"off"),r.setAttribute("spellcheck",!!o)}function ba(){var r=T("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),o=T("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return P?r.style.width="1000px":r.setAttribute("wrap","off"),ft&&(r.style.border="1px solid black"),o}function bl(r,o,e,t,n){var i=o,l=e,a=oe(r,o.line),s=n&&"rtl"==r.direction?-e:e;function f(M){var D;if("codepoint"==t){var E=a.text.charCodeAt(o.ch+(e>0?0:-1));D=isNaN(E)?null:new C(o.line,Math.max(0,Math.min(a.text.length,o.ch+e*((e>0?E>=55296&&E<56320:E>=56320&&E<57343)?2:1))),-e)}else D=n?function fa(r,o,e,t){var n=lt(o,r.doc.direction);if(!n)return Bn(o,e,t);e.ch>=o.text.length?(e.ch=o.text.length,e.sticky="before"):e.ch<=0&&(e.ch=0,e.sticky="after");var i=Ct(n,e.ch,e.sticky),l=n[i];if("ltr"==r.doc.direction&&l.level%2==0&&(t>0?l.to>e.ch:l.from<e.ch))return Bn(o,e,t);var s,a=function(k,M){return _i(o,k instanceof C?k.ch:k,M)},u=function(k){return r.options.lineWrapping?(s=s||Un(r,o),Qo(r,o,s,k)):{begin:0,end:o.text.length}},f=u("before"==e.sticky?a(e,-1):e.ch);if("rtl"==r.doc.direction||1==l.level){var h=1==l.level==t<0,c=a(e,h?1:-1);if(null!=c&&(h?c<=l.to&&c<=f.end:c>=l.from&&c>=f.begin))return new C(e.line,c,h?"before":"after")}var g=function(k,M,D){for(var E=function(q,he){return he?new C(e.line,a(q,1),"before"):new C(e.line,q,"after")};k>=0&&k<n.length;k+=M){var W=n[k],I=M>0==(1!=W.level),_=I?D.begin:a(D.end,-1);if(W.from<=_&&_<W.to||(_=I?W.from:a(W.to,-1),D.begin<=_&&_<D.end))return E(_,I)}},y=g(i+t,t,f);if(y)return y;var w=t>0?f.end:a(f.begin,-1);return null==w||t>0&&w==o.text.length||!(y=g(t>0?0:n.length-1,t,u(w)))?null:y}(r.cm,a,o,e):Bn(a,o,e);if(null==D){if(M||!function u(){var M=o.line+s;return!(M<r.first||M>=r.first+r.size)&&(o=new C(M,o.ch,o.sticky),a=oe(r,M))}())return!1;o=Mo(n,r.cm,a,o.line,s)}else o=D;return!0}if("char"==t||"codepoint"==t)f();else if("column"==t)f(!0);else if("word"==t||"group"==t)for(var h=null,c="group"==t,d=r.cm&&r.cm.getHelper(o,"wordChars"),g=!0;!(e<0)||f(!g);g=!1){var y=a.text.charAt(o.ch)||"\n",w=Ae(y,d)?"w":c&&"\n"==y?"n":!c||/\s/.test(y)?null:"p";if(c&&!g&&!w&&(w="s"),h&&h!=w){e<0&&(e=1,f(),o.sticky="after");break}if(w&&(h=w),e>0&&!f(!g))break}var k=wo(r,o,i,l,!0);return F(i,k)&&(k.hitSide=!0),k}function As(r,o,e,t){var l,u,n=r.doc,i=o.left;if("page"==t){var a=Math.min(r.display.wrapper.clientHeight,ee(r).innerHeight||n(r).documentElement.clientHeight),s=Math.max(a-.5*Mi(r.display),3);l=(e>0?o.bottom:o.top)+e*s}else"line"==t&&(l=e>0?o.bottom+3:o.top-3);for(;(u=Zo(r,i,l)).outside;){if(e<0?l<=0:l>=n.height){u.hitSide=!0;break}l+=5*e}return u}var je=function(r){this.cm=r,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new N,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function wa(r,o){var e=Il(r,o.line);if(!e||e.hidden)return null;var t=oe(r.doc,o.line),n=Xo(e,t,o.line),i=lt(t,r.doc.direction),l="left";i&&(l=Ct(i,o.ch)%2?"right":"left");var s=Br(n.map,o.ch,l);return s.offset="right"==s.collapse?s.end:s.start,s}function ci(r,o){return o&&(r.bad=!0),r}function vn(r,o,e){var t;if(o==r.display.lineDiv){if(!(t=r.display.lineDiv.childNodes[e]))return ci(r.clipPos(C(r.display.viewTo-1)),!0);o=null,e=0}else for(t=o;;t=t.parentNode){if(!t||t==r.display.lineDiv)return null;if(t.parentNode&&t.parentNode==r.display.lineDiv)break}for(var n=0;n<r.display.view.length;n++){var i=r.display.view[n];if(i.node==t)return au(i,o,e)}}function au(r,o,e){var t=r.text.firstChild,n=!1;if(!o||!K(t,o))return ci(C(Re(r.line),0),!0);if(o==t&&(n=!0,o=t.childNodes[e],e=0,!o)){var i=r.rest?be(r.rest):r.line;return ci(C(Re(i),i.text.length),n)}var l=3==o.nodeType?o:null,a=o;for(!l&&1==o.childNodes.length&&3==o.firstChild.nodeType&&(l=o.firstChild,e&&(e=l.nodeValue.length));a.parentNode!=t;)a=a.parentNode;var s=r.measure,u=s.maps;function f(w,k,M){for(var D=-1;D<(u?u.length:0);D++)for(var E=D<0?s.map:u[D],W=0;W<E.length;W+=3){var I=E[W+2];if(I==w||I==k){var _=Re(D<0?r.line:r.rest[D]),q=E[W]+M;return(M<0||I!=w)&&(q=E[W+(M?1:0)]),C(_,q)}}}var h=f(l,a,e);if(h)return ci(h,n);for(var c=a.nextSibling,d=l?l.nodeValue.length-e:0;c;c=c.nextSibling){if(h=f(c,c.firstChild,0))return ci(C(h.line,h.ch-d),n);d+=c.textContent.length}for(var g=a.previousSibling,y=e;g;g=g.previousSibling){if(h=f(g,g.firstChild,-1))return ci(C(h.line,h.ch+y),n);y+=g.textContent.length}}je.prototype.init=function(r){var o=this,e=this,t=e.cm,n=e.div=r.lineDiv;function i(a){for(var s=a.target;s;s=s.parentNode){if(s==n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(s.className))break}return!1}function l(a){if(i(a)&&!We(t,a)){if(t.somethingSelected())Rn({lineWise:!1,text:t.getSelections()}),"cut"==a.type&&t.replaceSelection("",null,"cut");else{if(!t.options.lineWiseCopyCut)return;var s=xa(t);Rn({lineWise:!0,text:s.text}),"cut"==a.type&&t.operation(function(){t.setSelections(s.ranges,0,se),t.replaceSelection("",null,"cut")})}if(a.clipboardData){a.clipboardData.clearData();var u=gr.text.join("\n");if(a.clipboardData.setData("Text",u),a.clipboardData.getData("Text")==u)return void a.preventDefault()}var f=ba(),h=f.firstChild;xl(h),t.display.lineSpace.insertBefore(f,t.display.lineSpace.firstChild),h.value=gr.text.join("\n");var c=H(v(n));rt(h),setTimeout(function(){t.display.lineSpace.removeChild(f),c.focus(),c==n&&e.showPrimarySelection()},50)}}n.contentEditable=!0,xl(n,t.options.spellcheck,t.options.autocorrect,t.options.autocapitalize),R(n,"paste",function(a){!i(a)||We(t,a)||Oo(a,t)||j<=11&&setTimeout(Ht(t,function(){return o.updateFromDOM()}),20)}),R(n,"compositionstart",function(a){o.composing={data:a.data,done:!1}}),R(n,"compositionupdate",function(a){o.composing||(o.composing={data:a.data,done:!1})}),R(n,"compositionend",function(a){o.composing&&(a.data!=o.composing.data&&o.readFromDOMSoon(),o.composing.done=!0)}),R(n,"touchstart",function(){return e.forceCompositionEnd()}),R(n,"input",function(){o.composing||o.readFromDOMSoon()}),R(n,"copy",l),R(n,"cut",l)},je.prototype.screenReaderLabelChanged=function(r){r?this.div.setAttribute("aria-label",r):this.div.removeAttribute("aria-label")},je.prototype.prepareSelection=function(){var r=Bl(this.cm,!1);return r.focus=H(v(this.div))==this.div,r},je.prototype.showSelection=function(r,o){!r||!this.cm.display.view.length||((r.focus||o)&&this.showPrimarySelection(),this.showMultipleSelections(r))},je.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},je.prototype.showPrimarySelection=function(){var r=this.getSelection(),o=this.cm,e=o.doc.sel.primary(),t=e.from(),n=e.to();if(o.display.viewTo==o.display.viewFrom||t.line>=o.display.viewTo||n.line<o.display.viewFrom)r.removeAllRanges();else{var i=vn(o,r.anchorNode,r.anchorOffset),l=vn(o,r.focusNode,r.focusOffset);if(!i||i.bad||!l||l.bad||0!=O(St(i,l),t)||0!=O(Ie(i,l),n)){var a=o.display.view,s=t.line>=o.display.viewFrom&&wa(o,t)||{node:a[0].measure.map[2],offset:0},u=n.line<o.display.viewTo&&wa(o,n);if(!u){var f=a[a.length-1].measure,h=f.maps?f.maps[f.maps.length-1]:f.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(!s||!u)return void r.removeAllRanges();var d,c=r.rangeCount&&r.getRangeAt(0);try{d=x(s.node,s.offset,u.offset,u.node)}catch{}d&&(!Q&&o.state.focused?(r.collapse(s.node,s.offset),d.collapsed||(r.removeAllRanges(),r.addRange(d))):(r.removeAllRanges(),r.addRange(d)),c&&null==r.anchorNode?r.addRange(c):Q&&this.startGracePeriod()),this.rememberSelection()}}},je.prototype.startGracePeriod=function(){var r=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){r.gracePeriod=!1,r.selectionChanged()&&r.cm.operation(function(){return r.cm.curOp.selectionChanged=!0})},20)},je.prototype.showMultipleSelections=function(r){Ze(this.cm.display.cursorDiv,r.cursors),Ze(this.cm.display.selectionDiv,r.selection)},je.prototype.rememberSelection=function(){var r=this.getSelection();this.lastAnchorNode=r.anchorNode,this.lastAnchorOffset=r.anchorOffset,this.lastFocusNode=r.focusNode,this.lastFocusOffset=r.focusOffset},je.prototype.selectionInEditor=function(){var r=this.getSelection();if(!r.rangeCount)return!1;var o=r.getRangeAt(0).commonAncestorContainer;return K(this.div,o)},je.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||H(v(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},je.prototype.blur=function(){this.div.blur()},je.prototype.getField=function(){return this.div},je.prototype.supportsTouch=function(){return!0},je.prototype.receivedFocus=function(){var r=this,o=this;this.selectionInEditor()?setTimeout(function(){return r.pollSelection()},20):ur(this.cm,function(){return o.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){o.cm.state.focused&&(o.pollSelection(),o.polling.set(o.cm.options.pollInterval,e))})},je.prototype.selectionChanged=function(){var r=this.getSelection();return r.anchorNode!=this.lastAnchorNode||r.anchorOffset!=this.lastAnchorOffset||r.focusNode!=this.lastFocusNode||r.focusOffset!=this.lastFocusOffset},je.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var r=this.getSelection(),o=this.cm;if(ut&&ce&&this.cm.display.gutterSpecs.length&&function Je(r){for(var o=r;o;o=o.parentNode)if(/CodeMirror-gutter-wrapper/.test(o.className))return!0;return!1}(r.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var e=vn(o,r.anchorNode,r.anchorOffset),t=vn(o,r.focusNode,r.focusOffset);e&&t&&ur(o,function(){Yt(o.doc,De(e,t),se),(e.bad||t.bad)&&(o.curOp.selectionChanged=!0)})}}},je.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var i,l,a,r=this.cm,o=r.display,e=r.doc.sel.primary(),t=e.from(),n=e.to();if(0==t.ch&&t.line>r.firstLine()&&(t=C(t.line-1,oe(r.doc,t.line-1).length)),n.ch==oe(r.doc,n.line).text.length&&n.line<r.lastLine()&&(n=C(n.line+1,0)),t.line<o.viewFrom||n.line>o.viewTo-1)return!1;t.line==o.viewFrom||0==(i=en(r,t.line))?(l=Re(o.view[0].line),a=o.view[0].node):(l=Re(o.view[i].line),a=o.view[i-1].node.nextSibling);var u,f,s=en(r,n.line);if(s==o.view.length-1?(u=o.viewTo-1,f=o.lineDiv.lastChild):(u=Re(o.view[s+1].line)-1,f=o.view[s+1].node.previousSibling),!a)return!1;for(var h=r.doc.splitLines(function lu(r,o,e,t,n){var i="",l=!1,a=r.doc.lineSeparator(),s=!1;function f(){l&&(i+=a,s&&(i+=a),l=s=!1)}function h(d){d&&(f(),i+=d)}function c(d){if(1==d.nodeType){var g=d.getAttribute("cm-text");if(g)return void h(g);var w,y=d.getAttribute("cm-marker");if(y){var k=r.findMarks(C(t,0),C(n+1,0),function u(d){return function(g){return g.id==d}}(+y));return void(k.length&&(w=k[0].find(0))&&h(Ve(r.doc,w.from,w.to).join(a)))}if("false"==d.getAttribute("contenteditable"))return;var M=/^(pre|div|p|li|table|br)$/i.test(d.nodeName);if(!/^br$/i.test(d.nodeName)&&0==d.textContent.length)return;M&&f();for(var D=0;D<d.childNodes.length;D++)c(d.childNodes[D]);/^(pre|p)$/i.test(d.nodeName)&&(s=!0),M&&(l=!0)}else 3==d.nodeType&&h(d.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;c(o),o!=e;)o=o.nextSibling,s=!1;return i}(r,a,f,l,u)),c=Ve(r.doc,C(l,0),C(u,oe(r.doc,u).text.length));h.length>1&&c.length>1;)if(be(h)==be(c))h.pop(),c.pop(),u--;else{if(h[0]!=c[0])break;h.shift(),c.shift(),l++}for(var d=0,g=0,y=h[0],w=c[0],k=Math.min(y.length,w.length);d<k&&y.charCodeAt(d)==w.charCodeAt(d);)++d;for(var M=be(h),D=be(c),E=Math.min(M.length-(1==h.length?d:0),D.length-(1==c.length?d:0));g<E&&M.charCodeAt(M.length-g-1)==D.charCodeAt(D.length-g-1);)++g;if(1==h.length&&1==c.length&&l==t.line)for(;d&&d>t.ch&&M.charCodeAt(M.length-g-1)==D.charCodeAt(D.length-g-1);)d--,g++;h[h.length-1]=M.slice(0,M.length-g).replace(/^\u200b+/,""),h[0]=h[0].slice(d).replace(/\u200b+$/,"");var W=C(l,d),I=C(u,c.length?be(c).length-g:0);return h.length>1||h[0]||O(W,I)?(qr(r.doc,h,W,I,"+input"),!0):void 0},je.prototype.ensurePolled=function(){this.forceCompositionEnd()},je.prototype.reset=function(){this.forceCompositionEnd()},je.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},je.prototype.readFromDOMSoon=function(){var r=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(r.readDOMTimeout=null,r.composing){if(!r.composing.done)return;r.composing=null}r.updateFromDOM()},80))},je.prototype.updateFromDOM=function(){var r=this;(this.cm.isReadOnly()||!this.pollContent())&&ur(this.cm,function(){return At(r.cm)})},je.prototype.setUneditable=function(r){r.contentEditable="false"},je.prototype.onKeyPress=function(r){0==r.charCode||this.composing||(r.preventDefault(),this.cm.isReadOnly()||Ht(this.cm,mr)(this.cm,String.fromCharCode(null==r.charCode?r.keyCode:r.charCode),0))},je.prototype.readOnlyChanged=function(r){this.div.contentEditable=String("nocursor"!=r)},je.prototype.onContextMenu=function(){},je.prototype.resetPosition=function(){},je.prototype.needsContentAttribute=!0;var dt=function(r){this.cm=r,this.prevInput="",this.pollingFast=!1,this.polling=new N,this.hasSelection=!1,this.composing=null,this.resetting=!1};dt.prototype.init=function(r){var o=this,e=this,t=this.cm;this.createField(r);var n=this.textarea;function i(l){if(!We(t,l)){if(t.somethingSelected())Rn({lineWise:!1,text:t.getSelections()});else{if(!t.options.lineWiseCopyCut)return;var a=xa(t);Rn({lineWise:!0,text:a.text}),"cut"==l.type?t.setSelections(a.ranges,null,se):(e.prevInput="",n.value=a.text.join("\n"),rt(n))}"cut"==l.type&&(t.state.cutIncoming=+new Date)}}r.wrapper.insertBefore(this.wrapper,r.wrapper.firstChild),ft&&(n.style.width="0px"),R(n,"input",function(){te&&j>=9&&o.hasSelection&&(o.hasSelection=null),e.poll()}),R(n,"paste",function(l){We(t,l)||Oo(l,t)||(t.state.pasteIncoming=+new Date,e.fastPoll())}),R(n,"cut",i),R(n,"copy",i),R(r.scroller,"paste",function(l){if(!$r(r,l)&&!We(t,l)){if(!n.dispatchEvent)return t.state.pasteIncoming=+new Date,void e.focus();var a=new Event("paste");a.clipboardData=l.clipboardData,n.dispatchEvent(a)}}),R(r.lineSpace,"selectstart",function(l){$r(r,l)||nt(l)}),R(n,"compositionstart",function(){var l=t.getCursor("from");e.composing&&e.composing.range.clear(),e.composing={start:l,range:t.markText(l,t.getCursor("to"),{className:"CodeMirror-composing"})}}),R(n,"compositionend",function(){e.composing&&(e.poll(),e.composing.range.clear(),e.composing=null)})},dt.prototype.createField=function(r){this.wrapper=ba(),this.textarea=this.wrapper.firstChild;var o=this.cm.options;xl(this.textarea,o.spellcheck,o.autocorrect,o.autocapitalize)},dt.prototype.screenReaderLabelChanged=function(r){r?this.textarea.setAttribute("aria-label",r):this.textarea.removeAttribute("aria-label")},dt.prototype.prepareSelection=function(){var r=this.cm,o=r.display,e=r.doc,t=Bl(r);if(r.options.moveInputWithCursor){var n=Sr(r,e.sel.primary().head,"div"),i=o.wrapper.getBoundingClientRect(),l=o.lineDiv.getBoundingClientRect();t.teTop=Math.max(0,Math.min(o.wrapper.clientHeight-10,n.top+l.top-i.top)),t.teLeft=Math.max(0,Math.min(o.wrapper.clientWidth-10,n.left+l.left-i.left))}return t},dt.prototype.showSelection=function(r){var e=this.cm.display;Ze(e.cursorDiv,r.cursors),Ze(e.selectionDiv,r.selection),null!=r.teTop&&(this.wrapper.style.top=r.teTop+"px",this.wrapper.style.left=r.teLeft+"px")},dt.prototype.reset=function(r){if(!(this.contextMenuPending||this.composing&&r)){var o=this.cm;if(this.resetting=!0,o.somethingSelected()){this.prevInput="";var e=o.getSelection();this.textarea.value=e,o.state.focused&&rt(this.textarea),te&&j>=9&&(this.hasSelection=e)}else r||(this.prevInput=this.textarea.value="",te&&j>=9&&(this.hasSelection=null));this.resetting=!1}},dt.prototype.getField=function(){return this.textarea},dt.prototype.supportsTouch=function(){return!1},dt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!de||H(v(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},dt.prototype.blur=function(){this.textarea.blur()},dt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},dt.prototype.receivedFocus=function(){this.slowPoll()},dt.prototype.slowPoll=function(){var r=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){r.poll(),r.cm.state.focused&&r.slowPoll()})},dt.prototype.fastPoll=function(){var r=!1,o=this;o.pollingFast=!0,o.polling.set(20,function e(){o.poll()||r?(o.pollingFast=!1,o.slowPoll()):(r=!0,o.polling.set(60,e))})},dt.prototype.poll=function(){var r=this,o=this.cm,e=this.textarea,t=this.prevInput;if(this.contextMenuPending||this.resetting||!o.state.focused||xn(e)&&!t&&!this.composing||o.isReadOnly()||o.options.disableInput||o.state.keySeq)return!1;var n=e.value;if(n==t&&!o.somethingSelected())return!1;if(te&&j>=9&&this.hasSelection===n||Ye&&/[\uf700-\uf7ff]/.test(n))return o.display.input.reset(),!1;if(o.doc.sel==o.display.selForContextMenu){var i=n.charCodeAt(0);if(8203==i&&!t&&(t="\u200b"),8666==i)return this.reset(),this.cm.execCommand("undo")}for(var l=0,a=Math.min(t.length,n.length);l<a&&t.charCodeAt(l)==n.charCodeAt(l);)++l;return ur(o,function(){mr(o,n.slice(l),t.length-l,null,r.composing?"*compose":null),n.length>1e3||n.indexOf("\n")>-1?e.value=r.prevInput="":r.prevInput=n,r.composing&&(r.composing.range.clear(),r.composing.range=o.markText(r.composing.start,o.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},dt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},dt.prototype.onKeyPress=function(){te&&j>=9&&(this.hasSelection=null),this.fastPoll()},dt.prototype.onContextMenu=function(r){var o=this,e=o.cm,t=e.display,n=o.textarea;o.contextMenuPending&&o.contextMenuPending();var i=Tn(e,r),l=t.scroller.scrollTop;if(i&&!Ce){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(i)&&Ht(e,Yt)(e.doc,De(i),se);var h,s=n.style.cssText,u=o.wrapper.style.cssText,f=o.wrapper.offsetParent.getBoundingClientRect();if(o.wrapper.style.cssText="position: static",n.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(r.clientY-f.top-5)+"px; left: "+(r.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(te?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",P&&(h=n.ownerDocument.defaultView.scrollY),t.input.focus(),P&&n.ownerDocument.defaultView.scrollTo(null,h),t.input.reset(),e.somethingSelected()||(n.value=o.prevInput=" "),o.contextMenuPending=d,t.selForContextMenu=e.doc.sel,clearTimeout(t.detectingSelectAll),te&&j>=9&&c(),ot){Gr(r);var g=function(){ie(window,"mouseup",g),setTimeout(d,20)};R(window,"mouseup",g)}else setTimeout(d,50)}function c(){if(null!=n.selectionStart){var y=e.somethingSelected(),w="\u200b"+(y?n.value:"");n.value="\u21da",n.value=w,o.prevInput=y?"":"\u200b",n.selectionStart=1,n.selectionEnd=w.length,t.selForContextMenu=e.doc.sel}}function d(){if(o.contextMenuPending==d&&(o.contextMenuPending=!1,o.wrapper.style.cssText=u,n.style.cssText=s,te&&j<9&&t.scrollbars.setScrollTop(t.scroller.scrollTop=l),null!=n.selectionStart)){(!te||te&&j<9)&&c();var y=0,w=function(){t.selForContextMenu==e.doc.sel&&0==n.selectionStart&&n.selectionEnd>0&&"\u200b"==o.prevInput?Ht(e,Co)(e):y++<10?t.detectingSelectAll=setTimeout(w,500):(t.selForContextMenu=null,t.input.reset())};t.detectingSelectAll=setTimeout(w,200)}}},dt.prototype.readOnlyChanged=function(r){r||this.reset(),this.textarea.disabled="nocursor"==r,this.textarea.readOnly=!!r},dt.prototype.setUneditable=function(){},dt.prototype.needsContentAttribute=!1,function Ms(r){var o=r.optionHandlers;function e(t,n,i,l){r.defaults[t]=n,i&&(o[t]=l?function(a,s,u){u!=Ki&&i(a,s,u)}:i)}r.defineOption=e,r.Init=Ki,e("value","",function(t,n){return t.setValue(n)},!0),e("mode",null,function(t,n){t.doc.modeOption=n,ll(t)},!0),e("indentUnit",2,ll,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,function(t){go(t),Li(t),At(t)},!0),e("lineSeparator",null,function(t,n){if(t.doc.lineSep=n,n){var i=[],l=t.doc.first;t.doc.iter(function(s){for(var u=0;;){var f=s.text.indexOf(n,u);if(-1==f)break;u=f+n.length,i.push(C(l,f))}l++});for(var a=i.length-1;a>=0;a--)qr(t.doc,n,i[a],C(i[a].line,i[a].ch+n.length))}}),e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(t,n,i){t.state.specialChars=new RegExp(n.source+(n.test("\t")?"":"|\t"),"g"),i!=Ki&&t.refresh()}),e("specialCharPlaceholder",Wa,function(t){return t.refresh()},!0),e("electricChars",!0),e("inputStyle",de?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),e("spellcheck",!1,function(t,n){return t.getInputField().spellcheck=n},!0),e("autocorrect",!1,function(t,n){return t.getInputField().autocorrect=n},!0),e("autocapitalize",!1,function(t,n){return t.getInputField().autocapitalize=n},!0),e("rtlMoveVisually",!Qt),e("wholeLineUpdateBefore",!0),e("theme","default",function(t){ma(t),ti(t)},!0),e("keyMap","default",function(t,n,i){var l=To(n),a=i!=Ki&&To(i);a&&a.detach&&a.detach(t,l),l.attach&&l.attach(t,a||null)}),e("extraKeys",null),e("configureMouse",null),e("lineWrapping",!1,iu,!0),e("gutters",[],function(t,n){t.display.gutterSpecs=ol(n,t.options.lineNumbers),ti(t)},!0),e("fixedGutter",!0,function(t,n){t.display.gutters.style.left=n?Ln(t.display)+"px":"0",t.refresh()},!0),e("coverGutterNextToScrollbar",!1,function(t){return Lr(t)},!0),e("scrollbarStyle","native",function(t){Ul(t),Lr(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),e("lineNumbers",!1,function(t,n){t.display.gutterSpecs=ol(t.options.gutters,n),ti(t)},!0),e("firstLineNumber",1,ti,!0),e("lineNumberFormatter",function(t){return t},ti,!0),e("showCursorWhenSelecting",!1,uo,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("pasteLinesPerSelection",!0),e("selectionsMayTouch",!1),e("readOnly",!1,function(t,n){"nocursor"==n&&(Dn(t),t.display.input.blur()),t.display.input.readOnlyChanged(n)}),e("screenReaderLabel",null,function(t,n){t.display.input.screenReaderLabelChanged(n=""===n?null:n)}),e("disableInput",!1,function(t,n){n||t.display.input.reset()},!0),e("dragDrop",!0,ml),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,uo,!0),e("singleCursorHeightPerLine",!0,uo,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,go,!0),e("addModeClass",!1,go,!0),e("pollInterval",100),e("undoDepth",200,function(t,n){return t.doc.history.undoDepth=n}),e("historyEventDelay",1250),e("viewportMargin",10,function(t){return t.refresh()},!0),e("maxHighlightLength",1e4,go,!0),e("moveInputWithCursor",!0,function(t,n){n||t.display.input.resetPosition()}),e("tabindex",null,function(t,n){return t.display.input.getField().tabIndex=n||""}),e("autofocus",null),e("direction","ltr",function(t,n){return t.doc.setDirection(n)},!0),e("phrases",null)}(ct),function Ds(r){var o=r.optionHandlers,e=r.helpers={};r.prototype={constructor:r,focus:function(){ee(this).focus(),this.display.input.focus()},setOption:function(t,n){var i=this.options,l=i[t];i[t]==n&&"mode"!=t||(i[t]=n,o.hasOwnProperty(t)&&Ht(this,o[t])(this,n,l),Qe(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,n){this.state.keyMaps[n?"push":"unshift"](To(t))},removeKeyMap:function(t){for(var n=this.state.keyMaps,i=0;i<n.length;++i)if(n[i]==t||n[i].name==t)return n.splice(i,1),!0},addOverlay:$e(function(t,n){var i=t.token?t:r.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");(function Me(r,o,e){for(var t=0,n=e(o);t<r.length&&e(r[t])<=n;)t++;r.splice(t,0,o)})(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(l){return l.priority}),this.state.modeGen++,At(this)}),removeOverlay:$e(function(t){for(var n=this.state.overlays,i=0;i<n.length;++i){var l=n[i].modeSpec;if(l==t||"string"==typeof t&&l.name==t)return n.splice(i,1),this.state.modeGen++,void At(this)}}),indentLine:$e(function(t,n,i){"string"!=typeof n&&"number"!=typeof n&&(n=null==n?this.options.smartIndent?"smart":"prev":n?"add":"subtract"),p(this.doc,t)&&Eo(this,t,n,i)}),indentSelection:$e(function(t){for(var n=this.doc.sel.ranges,i=-1,l=0;l<n.length;l++){var a=n[l];if(a.empty())a.head.line>i&&(Eo(this,a.head.line,t,!0),i=a.head.line,l==this.doc.sel.primIndex&&An(this));else{var s=a.from(),u=a.to(),f=Math.max(i,s.line);i=Math.min(this.lastLine(),u.line-(u.ch?0:1))+1;for(var h=f;h<i;++h)Eo(this,h,t);var c=this.doc.sel.ranges;0==s.ch&&n.length==c.length&&c[l].from().ch>0&&Wi(this.doc,l,new Ue(s,c[l].to()),se)}}}),getTokenAt:function(t,n){return Bo(this,t,n)},getLineTokens:function(t,n){return Bo(this,C(t),n,!0)},getTokenTypeAt:function(t){t=ve(this.doc,t);var s,n=Wr(this,oe(this.doc,t.line)),i=0,l=(n.length-1)/2,a=t.ch;if(0==a)s=n[2];else for(;;){var u=i+l>>1;if((u?n[2*u-1]:0)>=a)l=u;else{if(!(n[2*u+1]<a)){s=n[2*u+2];break}i=u+1}}var f=s?s.indexOf("overlay "):-1;return f<0?s:0==f?null:s.slice(0,f-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?r.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(t,n){return this.getHelpers(t,n)[0]},getHelpers:function(t,n){var i=[];if(!e.hasOwnProperty(n))return i;var l=e[n],a=this.getModeAt(t);if("string"==typeof a[n])l[a[n]]&&i.push(l[a[n]]);else if(a[n])for(var s=0;s<a[n].length;s++){var u=l[a[n][s]];u&&i.push(u)}else a.helperType&&l[a.helperType]?i.push(l[a.helperType]):l[a.name]&&i.push(l[a.name]);for(var f=0;f<l._global.length;f++){var h=l._global[f];h.pred(a,this)&&-1==A(i,h.val)&&i.push(h.val)}return i},getStateAfter:function(t,n){var i=this.doc;return mi(this,(t=er(i,t??i.first+i.size-1))+1,n).state},cursorCoords:function(t,n){var l=this.doc.sel.primary();return Sr(this,null==t?l.head:"object"==typeof t?ve(this.doc,t):t?l.from():l.to(),n||"page")},charCoords:function(t,n){return jn(this,ve(this.doc,t),n||"page")},coordsChar:function(t,n){return Zo(this,(t=Yo(this,t,n||"page")).left,t.top)},lineAtHeight:function(t,n){return t=Yo(this,{top:t,left:0},n||"page").top,Wt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,n,i){var a,l=!1;if("number"==typeof t){var s=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>s&&(t=s,l=!0),a=oe(this.doc,t)}else a=t;return oo(this,a,{top:0,left:0},n||"page",i||l).top+(l?this.doc.height-tr(a):0)},defaultTextHeight:function(){return Mi(this.display)},defaultCharWidth:function(){return kr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,n,i,l,a){var s=this.display,u=(t=Sr(this,ve(this.doc,t))).bottom,f=t.left;if(n.style.position="absolute",n.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(n),s.sizer.appendChild(n),"over"==l)u=t.top;else if("above"==l||"near"==l){var h=Math.max(s.wrapper.clientHeight,this.doc.height),c=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==l||t.bottom+n.offsetHeight>h)&&t.top>n.offsetHeight?u=t.top-n.offsetHeight:t.bottom+n.offsetHeight<=h&&(u=t.bottom),f+n.offsetWidth>c&&(f=c-n.offsetWidth)}n.style.top=u+"px",n.style.left=n.style.right="","right"==a?(f=s.sizer.clientWidth-n.offsetWidth,n.style.right="0px"):("left"==a?f=0:"middle"==a&&(f=(s.sizer.clientWidth-n.offsetWidth)/2),n.style.left=f+"px"),i&&function Gs(r,o){var e=zl(r,o);null!=e.scrollTop&&Fn(r,e.scrollTop),null!=e.scrollLeft&&zr(r,e.scrollLeft)}(this,{left:f,top:u,right:f+n.offsetWidth,bottom:u+n.offsetHeight})},triggerOnKeyDown:$e(bs),triggerOnKeyPress:$e(ws),triggerOnKeyUp:da,triggerOnMouseDown:$e(Ui),execCommand:function(t){if(fi.hasOwnProperty(t))return fi[t].call(null,this)},triggerElectric:$e(function(t){yl(this,t)}),findPosH:function(t,n,i,l){var a=1;n<0&&(a=-1,n=-n);for(var s=ve(this.doc,t),u=0;u<n&&!(s=bl(this.doc,s,a,i,l)).hitSide;++u);return s},moveH:$e(function(t,n){var i=this;this.extendSelectionsBy(function(l){return i.display.shift||i.doc.extend||l.empty()?bl(i.doc,l.head,t,n,i.options.rtlMoveVisually):t<0?l.from():l.to()},yt)}),deleteH:$e(function(t,n){var l=this.doc;this.doc.sel.somethingSelected()?l.replaceSelection("",null,"+delete"):ui(this,function(a){var s=bl(l,a.head,t,n,!1);return t<0?{from:s,to:a.head}:{from:a.head,to:s}})}),findPosV:function(t,n,i,l){var a=1,s=l;n<0&&(a=-1,n=-n);for(var u=ve(this.doc,t),f=0;f<n;++f){var h=Sr(this,u,"div");if(null==s?s=h.left:h.left=s,(u=As(this,h,a,i)).hitSide)break}return u},moveV:$e(function(t,n){var i=this,l=this.doc,a=[],s=!this.display.shift&&!l.extend&&l.sel.somethingSelected();if(l.extendSelectionsBy(function(f){if(s)return t<0?f.from():f.to();var h=Sr(i,f.head,"div");null!=f.goalColumn&&(h.left=f.goalColumn),a.push(h.left);var c=As(i,h,t,n);return"page"==n&&f==l.sel.primary()&&_l(i,jn(i,c,"div").top-h.top),c},yt),a.length)for(var u=0;u<l.sel.ranges.length;u++)l.sel.ranges[u].goalColumn=a[u]}),findWordAt:function(t){var i=oe(this.doc,t.line).text,l=t.ch,a=t.ch;if(i){var s=this.getHelper(t,"wordChars");"before"!=t.sticky&&a!=i.length||!l?++a:--l;for(var u=i.charAt(l),f=Ae(u,s)?function(h){return Ae(h,s)}:/\s/.test(u)?function(h){return/\s/.test(h)}:function(h){return!/\s/.test(h)&&!Ae(h)};l>0&&f(i.charAt(l-1));)--l;for(;a<i.length&&f(i.charAt(a));)++a}return new Ue(C(t.line,l),C(t.line,a))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?re(this.display.cursorDiv,"CodeMirror-overwrite"):Nt(this.display.cursorDiv,"CodeMirror-overwrite"),Qe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==H(S(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:$e(function(t,n){Jn(this,t,n)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-br(this)-this.display.barHeight,width:t.scrollWidth-br(this)-this.display.barWidth,clientHeight:wr(this),clientWidth:Sn(this)}},scrollIntoView:$e(function(t,n){null==t?(t={from:this.doc.sel.primary().head,to:null},null==n&&(n=this.options.cursorScrollMargin)):"number"==typeof t?t={from:C(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=n||0,null!=t.from.line?function Ni(r,o){Nn(r),r.curOp.scrollToPos=o}(this,t):Ja(this,t.from,t.to,t.margin)}),setSize:$e(function(t,n){var i=this,l=function(s){return"number"==typeof s||/^\d+$/.test(String(s))?s+"px":s};null!=t&&(this.display.wrapper.style.width=l(t)),null!=n&&(this.display.wrapper.style.height=l(n)),this.options.lineWrapping&&Xa(this);var a=this.display.viewFrom;this.doc.iter(a,this.display.viewTo,function(s){if(s.widgets)for(var u=0;u<s.widgets.length;u++)if(s.widgets[u].noHScroll){sr(i,a,"widget");break}++a}),this.curOp.forceUpdate=!0,Qe(this,"refresh",this)}),operation:function(t){return ur(this,t)},startOperation:function(){return En(this)},endOperation:function(){return Vn(this)},refresh:$e(function(){var t=this.display.cachedTextHeight;At(this),this.curOp.forceUpdate=!0,Li(this),Jn(this,this.doc.scrollLeft,this.doc.scrollTop),po(this.display),(null==t||Math.abs(t-Mi(this.display))>.5||this.options.lineWrapping)&&ao(this),Qe(this,"refresh",this)}),swapDoc:$e(function(t){var n=this.doc;return n.cm=null,this.state.selectingText&&this.state.selectingText(),sl(this,t),Li(this),this.display.input.reset(),Jn(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,It(this,"swapDoc",this,n),n}),phrase:function(t){var n=this.options.phrases;return n&&Object.prototype.hasOwnProperty.call(n,t)?n[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Xt(r),r.registerHelper=function(t,n,i){e.hasOwnProperty(t)||(e[t]=r[t]={_global:[]}),e[t][n]=i},r.registerGlobalHelper=function(t,n,i,l){r.registerHelper(t,n,l),e[t]._global.push({pred:i,val:l})}}(ct);var uu="iter insert remove copy getEditor constructor".split(" ");for(var wl in rr.prototype)rr.prototype.hasOwnProperty(wl)&&A(uu,wl)<0&&(ct.prototype[wl]=function(r){return function(){return r.apply(this.doc,arguments)}}(rr.prototype[wl]));return Xt(rr),ct.inputStyles={textarea:dt,contenteditable:je},ct.defineMode=function(r){!ct.defaults.mode&&"null"!=r&&(ct.defaults.mode=r),vi.apply(this,arguments)},ct.defineMIME=function Nr(r,o){bn[r]=o},ct.defineMode("null",function(){return{token:function(r){return r.skipToEnd()}}}),ct.defineMIME("text/plain","null"),ct.defineExtension=function(r,o){ct.prototype[r]=o},ct.defineDocExtension=function(r,o){rr.prototype[r]=o},ct.fromTextArea=function su(r,o){if((o=o?G(o):{}).value=r.value,!o.tabindex&&r.tabIndex&&(o.tabindex=r.tabIndex),!o.placeholder&&r.placeholder&&(o.placeholder=r.placeholder),null==o.autofocus){var e=H(v(r));o.autofocus=e==r||null!=r.getAttribute("autofocus")&&e==document.body}function t(){r.value=a.getValue()}var n;if(r.form&&(R(r.form,"submit",t),!o.leaveSubmitMethodAlone)){var i=r.form;n=i.submit;try{var l=i.submit=function(){t(),i.submit=n,i.submit(),i.submit=l}}catch{}}o.finishInit=function(s){s.save=t,s.getTextArea=function(){return r},s.toTextArea=function(){s.toTextArea=isNaN,t(),r.parentNode.removeChild(s.getWrapperElement()),r.style.display="",r.form&&(ie(r.form,"submit",t),!o.leaveSubmitMethodAlone&&"function"==typeof r.form.submit&&(r.form.submit=n))}},r.style.display="none";var a=ct(function(s){return r.parentNode.insertBefore(s,r.nextSibling)},o);return a},function Lt(r){r.off=ie,r.on=R,r.wheelEventPixels=nn,r.Doc=rr,r.splitLines=zn,r.countColumn=$,r.findColumn=Vt,r.isWordChar=Y,r.Pass=B,r.signal=Qe,r.Line=Vr,r.changeEnd=_t,r.scrollbarModel=Qn,r.Pos=C,r.cmpPos=O,r.modes=cr,r.mimeModes=bn,r.resolveMode=lr,r.getMode=Zr,r.modeExtensions=Fr,r.extendMode=gi,r.copyState=ar,r.startState=Er,r.innerMode=wn,r.commands=fi,r.keyMap=Mr,r.keyName=ua,r.isModifierKey=vs,r.lookupKey=zi,r.normalizeKeyMap=dn,r.StringStream=ht,r.SharedTextMarker=Tr,r.TextMarker=Hn,r.LineWidget=hn,r.e_preventDefault=nt,r.e_stopPropagation=yr,r.e_stop=Gr,r.addClass=re,r.contains=K,r.rmClass=Nt,r.keyNames=Pn}(ct),ct.version="5.65.20",ct}()},1471:(di,pt,ge)=>{!function(Q){"use strict";Q.defineMode("javascript",function(Ke,U){var ft,ut,ue=Ke.indentUnit,te=U.statementIndent,j=U.jsonld,P=U.json||j,Te=!1!==U.trackScope,ce=U.typescript,Ge=U.wordCharacters||/[\w$\xa1-\uffff]/,Ce=function(){function p(St){return{type:St,style:"keyword"}}var b=p("keyword a"),C=p("keyword b"),O=p("keyword c"),F=p("keyword d"),Z=p("operator"),Ie={type:"atom",style:"atom"};return{if:p("if"),while:b,with:b,else:C,do:C,try:C,finally:C,return:F,break:F,continue:F,new:p("new"),delete:O,void:O,throw:O,debugger:p("debugger"),var:p("var"),const:p("var"),let:p("var"),function:p("function"),catch:p("catch"),for:p("for"),switch:p("switch"),case:p("case"),default:p("default"),in:Z,typeof:Z,instanceof:Z,true:Ie,false:Ie,null:Ie,undefined:Ie,NaN:Ie,Infinity:Ie,this:p("this"),class:p("class"),super:p("atom"),yield:O,export:p("export"),import:p("import"),extends:O,await:O}}(),pe=/[+\-*&%=<>!?|~^@]/,ke=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function de(p,b,C){return ft=p,ut=C,b}function Ye(p,b){var C=p.next();if('"'==C||"'"==C)return b.tokenize=function Jt(p){return function(b,C){var F,O=!1;if(j&&"@"==b.peek()&&b.match(ke))return C.tokenize=Ye,de("jsonld-keyword","meta");for(;null!=(F=b.next())&&(F!=p||O);)O=!O&&"\\"==F;return O||(C.tokenize=Ye),de("string","string")}}(C),b.tokenize(p,b);if("."==C&&p.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return de("number","number");if("."==C&&p.match(".."))return de("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(C))return de(C);if("="==C&&p.eat(">"))return de("=>","operator");if("0"==C&&p.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return de("number","number");if(/\d/.test(C))return p.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),de("number","number");if("/"==C)return p.eat("*")?(b.tokenize=Qt,Qt(p,b)):p.eat("/")?(p.skipToEnd(),de("comment","comment")):Wt(p,b,1)?(function qe(p){for(var C,b=!1,O=!1;null!=(C=p.next());){if(!b){if("/"==C&&!O)return;"["==C?O=!0:O&&"]"==C&&(O=!1)}b=!b&&"\\"==C}}(p),p.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),de("regexp","string-2")):(p.eat("="),de("operator","operator",p.current()));if("`"==C)return b.tokenize=tt,tt(p,b);if("#"==C&&"!"==p.peek())return p.skipToEnd(),de("meta","meta");if("#"==C&&p.eatWhile(Ge))return de("variable","property");if("<"==C&&p.match("!--")||"-"==C&&p.match("->")&&!/\S/.test(p.string.slice(0,p.start)))return p.skipToEnd(),de("comment","comment");if(pe.test(C))return(">"!=C||!b.lexical||">"!=b.lexical.type)&&(p.eat("=")?("!"==C||"="==C)&&p.eat("="):/[<>*+\-|&?]/.test(C)&&(p.eat(C),">"==C&&p.eat(C))),"?"==C&&p.eat(".")?de("."):de("operator","operator",p.current());if(Ge.test(C)){p.eatWhile(Ge);var O=p.current();if("."!=b.lastType){if(Ce.propertyIsEnumerable(O)){var F=Ce[O];return de(F.type,F.style,O)}if("async"==O&&p.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return de("async","keyword",O)}return de("variable","variable",O)}}function Qt(p,b){for(var O,C=!1;O=p.next();){if("/"==O&&C){b.tokenize=Ye;break}C="*"==O}return de("comment","comment")}function tt(p,b){for(var O,C=!1;null!=(O=p.next());){if(!C&&("`"==O||"$"==O&&p.eat("{"))){b.tokenize=Ye;break}C=!C&&"\\"==O}return de("quasi","string-2",p.current())}function ot(p,b){b.fatArrowAt&&(b.fatArrowAt=null);var C=p.string.indexOf("=>",p.start);if(!(C<0)){if(ce){var O=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(p.string.slice(p.start,C));O&&(C=O.index)}for(var F=0,Z=!1,Ie=C-1;Ie>=0;--Ie){var St=p.string.charAt(Ie),er="([{}])".indexOf(St);if(er>=0&&er<3){if(!F){++Ie;break}if(0==--F){"("==St&&(Z=!0);break}}else if(er>=3&&er<6)++F;else if(Ge.test(St))Z=!0;else if(/["'\/`]/.test(St))for(;;--Ie){if(0==Ie)return;if(p.string.charAt(Ie-1)==St&&"\\"!=p.string.charAt(Ie-2)){Ie--;break}}else if(Z&&!F){++Ie;break}}Z&&!F&&(b.fatArrowAt=Ie)}}var m={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Nt(p,b,C,O,F,Z){this.indented=p,this.column=b,this.type=C,this.prev=F,this.info=Z,null!=O&&(this.align=O)}function V(p,b){if(!Te)return!1;for(var C=p.localVars;C;C=C.next)if(C.name==b)return!0;for(var O=p.context;O;O=O.prev)for(C=O.vars;C;C=C.next)if(C.name==b)return!0}function Ze(p,b,C,O,F){var Z=p.cc;for(T.state=p,T.stream=F,T.marked=null,T.cc=Z,T.style=b,p.lexical.hasOwnProperty("align")||(p.lexical.align=!0);;)if((Z.length?Z.pop():P?B:A)(C,O)){for(;Z.length&&Z[Z.length-1].lex;)Z.pop()();return T.marked?T.marked:"variable"==C&&V(p,O)?"variable-2":b}}var T={state:null,column:null,marked:null,cc:null};function ne(){for(var p=arguments.length-1;p>=0;p--)T.cc.push(arguments[p])}function x(){return ne.apply(null,arguments),!0}function K(p,b){for(var C=b;C;C=C.next)if(C.name==p)return!0;return!1}function H(p){var b=T.state;if(T.marked="def",Te){if(b.context)if("var"==b.lexical.info&&b.context&&b.context.block){var C=re(p,b.context);if(null!=C)return void(b.context=C)}else if(!K(p,b.localVars))return void(b.localVars=new vt(p,b.localVars));U.globalVars&&!K(p,b.globalVars)&&(b.globalVars=new vt(p,b.globalVars))}}function re(p,b){if(b){if(b.block){var C=re(p,b.prev);return C?C==b.prev?b:new rt(C,b.vars,!0):null}return K(p,b.vars)?b:new rt(b.prev,new vt(p,b.vars),!1)}return null}function J(p){return"public"==p||"private"==p||"protected"==p||"abstract"==p||"readonly"==p}function rt(p,b,C){this.prev=p,this.vars=b,this.block=C}function vt(p,b){this.name=p,this.next=b}var S=new vt("this",new vt("arguments",null));function v(){T.state.context=new rt(T.state.context,T.state.localVars,!1),T.state.localVars=S}function ee(){T.state.context=new rt(T.state.context,T.state.localVars,!0),T.state.localVars=null}function xe(){T.state.localVars=T.state.context.vars,T.state.context=T.state.context.prev}function G(p,b){var C=function(){var O=T.state,F=O.indented;if("stat"==O.lexical.type)F=O.lexical.indented;else for(var Z=O.lexical;Z&&")"==Z.type&&Z.align;Z=Z.prev)F=Z.indented;O.lexical=new Nt(F,T.stream.column(),p,null,O.lexical,b)};return C.lex=!0,C}function $(){var p=T.state;p.lexical.prev&&(")"==p.lexical.type&&(p.indented=p.lexical.indented),p.lexical=p.lexical.prev)}function N(p){return function b(C){return C==p?x():";"==p||"}"==C||")"==C||"]"==C?ne():x(b)}}function A(p,b){return"var"==p?x(G("vardef",b),Gr,N(";"),$):"keyword a"==p?x(G("form"),Se,A,$):"keyword b"==p?x(G("form"),A,$):"keyword d"==p?T.stream.match(/^\s*$/,!1)?x():x(G("stat"),Vt,N(";"),$):"debugger"==p?x(N(";")):"{"==p?x(G("}"),ee,wt,$,xe):";"==p?x():"if"==p?("else"==T.state.lexical.info&&T.state.cc[T.state.cc.length-1]==$&&T.state.cc.pop()(),x(G("form"),Se,A,$,yn)):"function"==p?x(xr):"for"==p?x(G("form"),ee,Wo,A,xe,$):"class"==p||ce&&"interface"==b?(T.marked="keyword",x(G("form","class"==p?p:b),vi,$)):"variable"==p?ce&&"declare"==b?(T.marked="keyword",x(A)):ce&&("module"==b||"enum"==b||"type"==b)&&T.stream.match(/^\s*\w/,!1)?(T.marked="keyword","enum"==b?x(le):"type"==b?x(Io,N("operator"),R,N(";")):x(G("form"),qt,N("{"),G("}"),wt,$,$)):ce&&"namespace"==b?(T.marked="keyword",x(G("form"),B,A,$)):ce&&"abstract"==b?(T.marked="keyword",x(A)):x(G("stat"),Ae):"switch"==p?x(G("form"),Se,N("{"),G("}","switch"),ee,wt,$,$,xe):"case"==p?x(B,N(":")):"default"==p?x(N(":")):"catch"==p?x(G("form"),v,ae,A,$,xe):"export"==p?x(G("stat"),Fr,$):"import"==p?x(G("stat"),ar,$):"async"==p?x(A):"@"==b?x(B,A):ne(G("stat"),B,N(";"),$)}function ae(p){if("("==p)return x(cr,N(")"))}function B(p,b){return yt(p,b,!1)}function se(p,b){return yt(p,b,!0)}function Se(p){return"("!=p?ne():x(G(")"),Vt,N(")"),$)}function yt(p,b,C){if(T.state.fatArrowAt==T.stream.start){var O=C?jt:Me;if("("==p)return x(v,G(")"),fe(cr,")"),$,N("=>"),O,xe);if("variable"==p)return ne(v,qt,N("=>"),O,xe)}var F=C?bt:gt;return m.hasOwnProperty(p)?x(F):"function"==p?x(xr,F):"class"==p||ce&&"interface"==b?(T.marked="keyword",x(G("form"),bn,$)):"keyword c"==p||"async"==p?x(C?se:B):"("==p?x(G(")"),Vt,N(")"),$,F):"operator"==p||"spread"==p?x(C?se:B):"["==p?x(G("]"),Ve,$,F):"{"==p?$t(z,"}",null,F):"quasi"==p?ne(be,F):"new"==p?x(function fr(p){return function(b){return"."==b?x(p?Y:mn):"variable"==b&&ce?x(nt,p?bt:gt):ne(p?se:B)}}(C)):x()}function Vt(p){return p.match(/[;\}\)\],]/)?ne():ne(B)}function gt(p,b){return","==p?x(Vt):bt(p,b,!1)}function bt(p,b,C){var O=0==C?gt:bt,F=0==C?B:se;if("=>"==p)return x(v,C?jt:Me,xe);if("operator"==p)return/\+\+|--/.test(b)||ce&&"!"==b?x(O):ce&&"<"==b&&T.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?x(G(">"),fe(R,">"),$,O):"?"==b?x(B,N(":"),F):x(F);if("quasi"==p)return ne(be,O);if(";"!=p){if("("==p)return $t(se,")","call",O);if("."==p)return x(L,O);if("["==p)return x(G("]"),Vt,N("]"),$,O);if(ce&&"as"==b)return T.marked="keyword",x(R,O);if("regexp"==p)return T.state.lastType=T.marked="operator",T.stream.backUp(T.stream.pos-T.stream.start-1),x(F)}}function be(p,b){return"quasi"!=p?ne():"${"!=b.slice(b.length-2)?x(be):x(Vt,or)}function or(p){if("}"==p)return T.marked="string-2",T.state.tokenize=tt,x(be)}function Me(p){return ot(T.stream,T.state),ne("{"==p?A:B)}function jt(p){return ot(T.stream,T.state),ne("{"==p?A:se)}function mn(p,b){if("target"==b)return T.marked="keyword",x(gt)}function Y(p,b){if("target"==b)return T.marked="keyword",x(bt)}function Ae(p){return":"==p?x($,A):ne(gt,N(";"),$)}function L(p){if("variable"==p)return T.marked="property",x()}function z(p,b){return"async"==p?(T.marked="property",x(z)):"variable"==p||"keyword"==T.style?(T.marked="property","get"==b||"set"==b?x(X):(ce&&T.state.fatArrowAt==T.stream.start&&(C=T.stream.match(/^\s*:\s*/,!1))&&(T.state.fatArrowAt=T.stream.pos+C[0].length),x(we))):"number"==p||"string"==p?(T.marked=j?"property":T.style+" property",x(we)):"jsonld-keyword"==p?x(we):ce&&J(b)?(T.marked="keyword",x(z)):"["==p?x(B,Ct,N("]"),we):"spread"==p?x(se,we):"*"==b?(T.marked="keyword",x(z)):":"==p?ne(we):void 0;var C}function X(p){return"variable"!=p?ne(we):(T.marked="property",x(xr))}function we(p){return":"==p?x(se):"("==p?ne(xr):void 0}function fe(p,b,C){function O(F,Z){if(C?C.indexOf(F)>-1:","==F){var Ie=T.state.lexical;return"call"==Ie.info&&(Ie.pos=(Ie.pos||0)+1),x(function(St,er){return St==b||er==b?ne():ne(p)},O)}return F==b||Z==b?x():C&&C.indexOf(";")>-1?ne(p):x(N(b))}return function(F,Z){return F==b||Z==b?x():ne(p,O)}}function $t(p,b,C){for(var O=3;O<arguments.length;O++)T.cc.push(arguments[O]);return x(G(b,C),fe(p,b),$)}function wt(p){return"}"==p?x():ne(A,wt)}function Ct(p,b){if(ce){if(":"==p)return x(R);if("?"==b)return x(Ct)}}function Bt(p,b){if(ce&&(":"==p||"in"==b))return x(R)}function lt(p){if(ce&&":"==p)return T.stream.match(/^\s*\w+\s+is\b/,!1)?x(B,Rt,R):x(R)}function Rt(p,b){if("is"==b)return T.marked="keyword",x()}function R(p,b){return"keyof"==b||"typeof"==b||"infer"==b||"readonly"==b?(T.marked="keyword",x("typeof"==b?se:R)):"variable"==p||"void"==b?(T.marked="type",x(Xt)):"|"==b||"&"==b?x(R):"string"==p||"number"==p||"atom"==p?x(Xt):"["==p?x(G("]"),fe(R,"]",","),$,Xt):"{"==p?x(G("}"),ie,$,Xt):"("==p?x(fe(Be,")"),pi,Xt):"<"==p?x(fe(R,">"),R):"quasi"==p?ne(We,Xt):void 0}function pi(p){if("=>"==p)return x(R)}function ie(p){return p.match(/[\}\)\]]/)?x():","==p||";"==p?x(ie):ne(Qe,ie)}function Qe(p,b){return"variable"==p||"keyword"==T.style?(T.marked="property",x(Qe)):"?"==b||"number"==p||"string"==p?x(Qe):":"==p?x(R):"["==p?x(N("variable"),Bt,N("]"),Qe):"("==p?ne(Ur,Qe):p.match(/[;\}\)\],]/)?void 0:x()}function We(p,b){return"quasi"!=p?ne():"${"!=b.slice(b.length-2)?x(We):x(R,mt)}function mt(p){if("}"==p)return T.marked="string-2",T.state.tokenize=tt,x(We)}function Be(p,b){return"variable"==p&&T.stream.match(/^\s*[?:]/,!1)||"?"==b?x(Be):":"==p?x(R):"spread"==p?x(Be):ne(R)}function Xt(p,b){return"<"==b?x(G(">"),fe(R,">"),$,Xt):"|"==b||"."==p||"&"==b?x(R):"["==p?x(R,N("]"),Xt):"extends"==b||"implements"==b?(T.marked="keyword",x(R)):"?"==b?x(R,N(":"),R):void 0}function nt(p,b){if("<"==b)return x(G(">"),fe(R,">"),$,Xt)}function yr(){return ne(R,Ot)}function Ot(p,b){if("="==b)return x(R)}function Gr(p,b){return"enum"==b?(T.marked="keyword",x(le)):ne(qt,Ct,hr,Sl)}function qt(p,b){return ce&&J(b)?(T.marked="keyword",x(qt)):"variable"==p?(H(b),x()):"spread"==p?x(qt):"["==p?$t(ji,"]"):"{"==p?$t(Yr,"}"):void 0}function Yr(p,b){return"variable"!=p||T.stream.match(/^\s*:/,!1)?("variable"==p&&(T.marked="property"),"spread"==p?x(qt):"}"==p?ne():"["==p?x(B,N("]"),N(":"),Yr):x(N(":"),qt,hr)):(H(b),x(hr))}function ji(){return ne(qt,hr)}function hr(p,b){if("="==b)return x(se)}function Sl(p){if(","==p)return x(Gr)}function yn(p,b){if("keyword b"==p&&"else"==b)return x(G("form","else"),A,$)}function Wo(p,b){return"await"==b?x(Wo):"("==p?x(G(")"),zn,$):void 0}function zn(p){return"var"==p?x(Gr,xn):"variable"==p?x(xn):ne(xn)}function xn(p,b){return")"==p?x():";"==p?x(xn):"in"==b||"of"==b?(T.marked="keyword",x(B,xn)):ne(B,xn)}function xr(p,b){return"*"==b?(T.marked="keyword",x(xr)):"variable"==p?(H(b),x(xr)):"("==p?x(v,G(")"),fe(cr,")"),$,lt,A,xe):ce&&"<"==b?x(G(">"),fe(yr,">"),$,xr):void 0}function Ur(p,b){return"*"==b?(T.marked="keyword",x(Ur)):"variable"==p?(H(b),x(Ur)):"("==p?x(v,G(")"),fe(cr,")"),$,lt,xe):ce&&"<"==b?x(G(">"),fe(yr,">"),$,Ur):void 0}function Io(p,b){return"keyword"==p||"variable"==p?(T.marked="type",x(Io)):"<"==b?x(G(">"),fe(yr,">"),$):void 0}function cr(p,b){return"@"==b&&x(B,cr),"spread"==p?x(cr):ce&&J(b)?(T.marked="keyword",x(cr)):ce&&"this"==p?x(Ct,hr):ne(qt,Ct,hr)}function bn(p,b){return"variable"==p?vi(p,b):Nr(p,b)}function vi(p,b){if("variable"==p)return H(b),x(Nr)}function Nr(p,b){return"<"==b?x(G(">"),fe(yr,">"),$,Nr):"extends"==b||"implements"==b||ce&&","==p?("implements"==b&&(T.marked="keyword"),x(ce?R:B,Nr)):"{"==p?x(G("}"),lr,$):void 0}function lr(p,b){return"async"==p||"variable"==p&&("static"==b||"get"==b||"set"==b||ce&&J(b))&&T.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1)?(T.marked="keyword",x(lr)):"variable"==p||"keyword"==T.style?(T.marked="property",x(Zr,lr)):"number"==p||"string"==p?x(Zr,lr):"["==p?x(B,Ct,N("]"),Zr,lr):"*"==b?(T.marked="keyword",x(lr)):ce&&"("==p?ne(Ur,lr):";"==p||","==p?x(lr):"}"==p?x():"@"==b?x(B,lr):void 0}function Zr(p,b){if("!"==b||"?"==b)return x(Zr);if(":"==p)return x(R,hr);if("="==b)return x(se);var C=T.state.lexical.prev;return ne(C&&"interface"==C.info?Ur:xr)}function Fr(p,b){return"*"==b?(T.marked="keyword",x(oe,N(";"))):"default"==b?(T.marked="keyword",x(B,N(";"))):"{"==p?x(fe(gi,"}"),oe,N(";")):ne(A)}function gi(p,b){return"as"==b?(T.marked="keyword",x(N("variable"))):"variable"==p?ne(se,gi):void 0}function ar(p){return"string"==p?x():"("==p?ne(B):"."==p?ne(gt):ne(wn,Er,oe)}function wn(p,b){return"{"==p?$t(wn,"}"):("variable"==p&&H(b),"*"==b&&(T.marked="keyword"),x(ht))}function Er(p){if(","==p)return x(wn,Er)}function ht(p,b){if("as"==b)return T.marked="keyword",x(wn)}function oe(p,b){if("from"==b)return T.marked="keyword",x(B)}function Ve(p){return"]"==p?x():ne(fe(se,"]"))}function le(){return ne(G("form"),qt,N("{"),G("}"),fe(zt,"}"),$,$)}function zt(){return ne(qt,hr)}function Wt(p,b,C){return b.tokenize==Ye&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(b.lastType)||"quasi"==b.lastType&&/\{\s*$/.test(p.string.slice(0,p.pos-(C||0)))}return v.lex=ee.lex=!0,xe.lex=!0,$.lex=!0,{startState:function(p){var b={tokenize:Ye,lastType:"sof",cc:[],lexical:new Nt((p||0)-ue,0,"block",!1),localVars:U.localVars,context:U.localVars&&new rt(null,null,!1),indented:p||0};return U.globalVars&&"object"==typeof U.globalVars&&(b.globalVars=U.globalVars),b},token:function(p,b){if(p.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=p.indentation(),ot(p,b)),b.tokenize!=Qt&&p.eatSpace())return null;var C=b.tokenize(p,b);return"comment"==ft?C:(b.lastType="operator"!=ft||"++"!=ut&&"--"!=ut?ft:"incdec",Ze(b,C,ft,ut,p))},indent:function(p,b){if(p.tokenize==Qt||p.tokenize==tt)return Q.Pass;if(p.tokenize!=Ye)return 0;var F,C=b&&b.charAt(0),O=p.lexical;if(!/^\s*else\b/.test(b))for(var Z=p.cc.length-1;Z>=0;--Z){var Ie=p.cc[Z];if(Ie==$)O=O.prev;else if(Ie!=yn&&Ie!=xe)break}for(;("stat"==O.type||"form"==O.type)&&("}"==C||(F=p.cc[p.cc.length-1])&&(F==gt||F==bt)&&!/^[,\.=+\-*:?[\(]/.test(b));)O=O.prev;te&&")"==O.type&&"stat"==O.prev.type&&(O=O.prev);var St=O.type,er=C==St;return"vardef"==St?O.indented+("operator"==p.lastType||","==p.lastType?O.info.length+1:0):"form"==St&&"{"==C?O.indented:"form"==St?O.indented+ue:"stat"==St?O.indented+(function Re(p,b){return"operator"==p.lastType||","==p.lastType||pe.test(b.charAt(0))||/[,.]/.test(b.charAt(0))}(p,b)?te||ue:0):"switch"!=O.info||er||0==U.doubleIndentSwitch?O.align?O.column+(er?0:1):O.indented+(er?0:ue):O.indented+(/^(?:case|default)\b/.test(b)?ue:2*ue)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:P?null:"/*",blockCommentEnd:P?null:"*/",blockCommentContinue:P?null:" * ",lineComment:P?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:P?"json":"javascript",jsonldMode:j,jsonMode:P,expressionAllowed:Wt,skipExpression:function(p){Ze(p,"atom","atom","true",new Q.StringStream("",2,null))}}}),Q.registerHelper("wordChars","javascript",/[\w$]/),Q.defineMIME("text/javascript","javascript"),Q.defineMIME("text/ecmascript","javascript"),Q.defineMIME("application/javascript","javascript"),Q.defineMIME("application/x-javascript","javascript"),Q.defineMIME("application/ecmascript","javascript"),Q.defineMIME("application/json",{name:"javascript",json:!0}),Q.defineMIME("application/x-json",{name:"javascript",json:!0}),Q.defineMIME("application/manifest+json",{name:"javascript",json:!0}),Q.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),Q.defineMIME("text/typescript",{name:"javascript",typescript:!0}),Q.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(ge(1382))},4219:(di,pt)=>{!function(){function ge(){var Ke=self;Ke.addEventListener("message",({data:U})=>{const{id:ue,input:te,version:j,command:P}=U;if("fetch-compiler-versions"===P)fetch("https://binaries.soliditylang.org/bin/list.json").then(Te=>Te.json()).then(Te=>{postMessage({id:ue,result:Te})}).catch(Te=>{postMessage({id:ue,error:Te.message})});else{Ke.importScripts(j);const Te=Ke.Module;if("_solidity_compile"in Te){const ce=Te.cwrap("solidity_compile","string",["string","number"]),Ge=JSON.parse(ce(te));postMessage({id:ue,result:Ge})}}})}"object"==typeof global&&(global.Worker||(global.Worker={}),global.Worker.Module=void 0),window!==self&&ge(),pt.V=ge}()},5071:(di,pt,ge)=>{var Q,Ke;!function(){return function U(ue,te,j){function P(Ge,Ce){if(!te[Ge]){if(!ue[Ge]){if(Te)return Te(Ge,!0);var ke=new Error("Cannot find module '"+Ge+"'");throw ke.code="MODULE_NOT_FOUND",ke}var qe=te[Ge]={exports:{}};ue[Ge][0].call(qe.exports,function(ft){return P(ue[Ge][1][ft]||ft)},qe,qe.exports,U,ue,te,j)}return te[Ge].exports}for(var Te=void 0,ce=0;ce<j.length;ce++)P(j[ce]);return P}}()({1:[function(U,ue,te){window.CodeMirror=U("codemirror"),U("./index")},{"./index":2,codemirror:3}],2:[function(U,ue,te){"use strict";const j=U("codemirror");j.defineMode("solidity",function(P){let ne,Te=P.indentUnit,ce={pragma:!0,solidity:!0,import:!0,as:!0,from:!0,contract:!0,constructor:!0,is:!0,function:!0,modifier:!0,pure:!0,view:!0,payable:!0,constant:!0,anonymous:!0,indexed:!0,returns:!0,return:!0,event:!0,struct:!0,mapping:!0,interface:!0,using:!0,library:!0,storage:!0,memory:!0,calldata:!0,public:!0,private:!0,external:!0,internal:!0,emit:!0,assembly:!0,abstract:!0,after:!0,catch:!0,final:!0,in:!0,inline:!0,let:!0,match:!0,null:!0,of:!0,relocatable:!0,static:!0,try:!0,typeof:!0,var:!0},Ge={pragma:!0,returns:!0,address:!0,contract:!0,function:!0,struct:!0},Ce={wei:!0,szabo:!0,finney:!0,ether:!0},pe={seconds:!0,minutes:!0,hours:!0,days:!0,weeks:!0},ke={block:["coinbase","difficulty","gaslimit","number","timestamp"],msg:["data","sender","sig","value"],tx:["gasprice","origin"]},qe={now:!0,gasleft:!0,blockhash:!0},ft={assert:!0,require:!0,revert:!0,throw:!0},ut={addmod:!0,mulmod:!0,keccak256:!0,sha256:!0,ripemd160:!0,ecrecover:!0},de={this:!0,selfdestruct:!0,super:!0},Ye={type:!0},Jt={},Qt={if:!0,else:!0,while:!0,do:!0,for:!0,break:!0,continue:!0,switch:!0,case:!0,default:!0},tt={bool:!0,byte:!0,string:!0,enum:!0,address:!0},Kt={alias:!0,apply:!0,auto:!0,copyof:!0,define:!0,immutable:!0,implements:!0,macro:!0,mutable:!0,override:!0,partial:!0,promise:!0,reference:!0,sealed:!0,sizeof:!0,supports:!0,typedef:!0,unchecked:!0},ot={abi:["decode","encodePacked","encodeWithSelector","encodeWithSignature","encode"]},m=["transfer","send","balance","call","delegatecall","staticcall"],Nt=["title","author","notice","dev","param","return"],V={delete:!0,new:!0,true:!0,false:!0},Ze=/[+\-*&^%:=<>!|\/~]/,T=/[-]/;function x(N,A){let ae=N.next();if('"'==ae||"'"==ae||"`"==ae)return A.tokenize=function K(N){return function(A,ae){let se,B=!1,Se=!1;for(;null!=(se=A.next());){if(se==N&&!B){Se=!0;break}B=!B&&"`"!=N&&"\\"==se}return(Se||!(B||"`"==N))&&(ae.tokenize=x),"string"}}(ae),A.tokenize(N,A);if(function re(N,A){if("pragma solidity"==A.lastToken)return A.lastToken=null,!A.startOfLine&&(N.match(/[\^{0}][0-9\.]+/)||N.match(/[\>\=]+?[\s]*[0-9\.]+[\s]*[\<]?[\s]*[0-9\.]+/))}(N,A))return"version";if("."==ae&&m.some(function(Se){return N.match(`${Se}`)}))return"addressFunction";if(J(ae,N))return"number";if(/[\[\]{}\(\),;\:\.]/.test(ae))return function ee(N,A){return","==N&&"functionName(variable"==A.para&&(A.para="functionName("),null!=A.para&&A.para.startsWith("functionName")&&(")"==N?A.para.endsWith("(")&&(A.para=A.para.substr(0,A.para.length-1),"functionName"==A.para&&(A.grammar="")):"("==N&&(A.para+=N)),"("==N&&"functionName"==A.lastToken?A.lastToken+=N:")"==N&&"functionName("==A.lastToken?A.lastToken=null:"("==N&&"returns"==A.lastToken?A.lastToken+=N:")"==N&&("returns("==A.lastToken||"returns(variable"==A.lastToken)&&(A.lastToken=null),"("==N&&"address"==A.lastToken&&(A.lastToken+=N),ne=N,null}(ae,A);if("/"==ae){if(N.eat("*"))return A.tokenize=H,H(N,A);if(N.match(/\/{2}/)){for(;ae=N.next();)if("@"==ae){N.backUp(1),A.grammar="doc";break}return"doc"}if(N.eat("/"))return N.skipToEnd(),"comment"}if(T.test(ae))return J(N.peek(),N)?"number":"operator";if(Ze.test(ae))return N.eatWhile(Ze),"operator";N.eatWhile(/[\w\$_\xa1-\uffff]/);let B=N.current();if("doc"==A.grammar)return Nt.some(function(Se){return B==`@${Se}`})?"docReserve":"doc";if("solidity"===B&&"pragma"==A.lastToken&&(A.lastToken=A.lastToken+" "+B),ce.propertyIsEnumerable(B))return("case"==B||"default"==B)&&(ne="case"),Ge.propertyIsEnumerable(B)&&(A.lastToken=B),"keyword";if(Ce.propertyIsEnumerable(B))return"etherUnit";if(de.propertyIsEnumerable(B))return"contractRelated";if(Qt.propertyIsEnumerable(B)||Ye.propertyIsEnumerable(B)||Kt.propertyIsEnumerable(B))return"keyword";if(tt.propertyIsEnumerable(B)||pe.propertyIsEnumerable(B)||function rt(N){if(N.match(/^[u]?int/)){if(N.indexOf("t")+1==N.length)return!0;let A=N.substr(N.indexOf("t")+1,N.length);return A%8==0&&A<=256}}(B)||function vt(N){if(N.match(/^bytes/))return N.indexOf("s")+1==N.length||N.substr(N.indexOf("s")+1,N.length)<=32}(B)||function S(N){if(N.match(/^[u]?fixed([0-9]+x[0-9]+)?/)){if(N.indexOf("d")+1==N.length)return!0;let A=N.substr(N.indexOf("d")+1,N.length).split("x");return A[0]%8==0&&A[0]<=256&&A[1]<=80}}(B))return A.lastToken=A.lastToken+"variable","keyword";if(V.propertyIsEnumerable(B))return"atom";if(ft.propertyIsEnumerable(B))return"errorHandling";if(ut.propertyIsEnumerable(B))return"mathematicalAndCryptographic";if(qe.propertyIsEnumerable(B)||ke.hasOwnProperty(B)&&ke[B].some(function(Se){return N.match(`.${Se}`)}))return"variable-2";if(ot.hasOwnProperty(B)&&ot[B].some(function(Se){return N.match(`.${Se}`)}))return"abi";let se=function v(N,A){if(N.match(/^hex/)&&'"'==A.peek()){let B,ae=!1,se="",Se="";for(;B=A.next();){if(Se+=B,'"'==B&&ae){if(se=Se.substring(1,Se.length-1),se.match(/^[0-9a-fA-F]+$/))return"number";A.backUp(Se.length);break}ae=ae||'"'==B}}}(B,N);return se??("functionName("!=A.lastToken&&"returns("!=A.lastToken||!Jt.propertyIsEnumerable(B)?"function"==A.lastToken?(A.lastToken="functionName",null==A.para&&(A.grammar="function",A.para=""),A.para+="functionName","functionName"):"functionName(variable"==A.lastToken?(A.lastToken="functionName(","parameterValue"):"returns(variable"==A.lastToken?(A.lastToken="returns(","parameterValue"):("address"==A.lastToken&&"payable"==B&&(A.lastToken="address payable"),("contract"==A.lastToken||"struct"==A.lastToken)&&(Jt[B]=!0,A.lastToken=null),"function"==A.grammar?"parameterValue":"variable"):(A.lastToken+="variable","variable"))}function H(N,A){let B,ae=!1;for(;B=N.next();){if("/"==B&&ae){A.tokenize=x;break}ae="*"==B}return"comment"}function J(N,A){if(/[\d\.]/.test(N))return"."==N?A.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==N?A.match(/^[xX][0-9a-fA-F]+/)||A.match(/^0[0-7]+/):A.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),!0}function xe(N,A,ae,B,se){this.indented=N,this.column=A,this.type=ae,this.align=B,this.prev=se}function G(N,A,ae){return N.context=new xe(N.indented,A,ae,null,N.context)}return{startState:function(N){return{tokenize:null,context:new xe((N||0)-Te,0,"top",!1),indented:0,startOfLine:!0}},token:function(N,A){let ae=A.context;if(N.sol()&&(null==ae.align&&(ae.align=!1),A.indented=N.indentation(),A.startOfLine=!0,"case"==ae.type&&(ae.type="}"),"doc"==A.grammar&&(A.grammar=null)),N.eatSpace())return null;ne=null;let B=(A.tokenize||x)(N,A);return"comment"==B||(null==ae.align&&(ae.align=!0),"{"==ne?G(A,N.column(),"}"):"["==ne?G(A,N.column(),"]"):"("==ne?G(A,N.column(),")"):"case"==ne?ae.type="case":("}"==ne&&"}"==ae.type||ne==ae.type)&&function $(N){if(!N.context.prev)return;let A=N.context.type;(")"==A||"]"==A||"}"==A)&&(N.indented=N.context.indented),N.context=N.context.prev}(A),A.startOfLine=!1),B},indent:function(N,A){if(N.tokenize!=x&&null!=N.tokenize)return j.Pass;let ae=N.context,B=A&&A.charAt(0);if("case"==ae.type&&/^(?:case|default)\b/.test(A))return N.context.type="}",ae.indented;let se=B==ae.type;return ae.align?ae.column+(se?0:1):ae.indented+(se?0:Te)},electricChars:"{}):",closeBrackets:"()[]{}''\"\"``",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),j.defineMIME("text/x-solidity","solidity")},{codemirror:3}],3:[function(U,ue,te){var P;P=function(){"use strict";var j=navigator.userAgent,P=navigator.platform,Te=/gecko\/\d/i.test(j),ce=/MSIE \d/.test(j),Ge=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(j),Ce=/Edge\/(\d+)/.exec(j),pe=ce||Ge||Ce,ke=pe&&(ce?document.documentMode||6:+(Ce||Ge)[1]),qe=!Ce&&/WebKit\//.test(j),ft=qe&&/Qt\/\d+\.\d+/.test(j),ut=!Ce&&/Chrome\//.test(j),de=/Opera\//.test(j),Ye=/Apple Computer/.test(navigator.vendor),Jt=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(j),Qt=/PhantomJS/.test(j),tt=Ye&&(/Mobile\/\w+/.test(j)||navigator.maxTouchPoints>2),Kt=/Android/.test(j),ot=tt||Kt||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(j),m=tt||/Mac/.test(P),Nt=/\bCrOS\b/.test(j),V=/win/i.test(P),Ze=de&&j.match(/Version\/(\d*\.\d*)/);Ze&&(Ze=Number(Ze[1])),Ze&&Ze>=15&&(de=!1,qe=!0);var T=m&&(ft||de&&(null==Ze||Ze<12.11)),ne=Te||pe&&ke>=9;function x(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var vt,K=function(e,t){var n=e.className,i=x(t).exec(n);if(i){var l=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(l?i[1]+l:"")}};function H(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function re(e,t){return H(e).appendChild(t)}function J(e,t,n,i){var l=document.createElement(e);if(n&&(l.className=n),i&&(l.style.cssText=i),"string"==typeof t)l.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)l.appendChild(t[a]);return l}function rt(e,t,n,i){var l=J(e,t,n,i);return l.setAttribute("role","presentation"),l}function S(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function v(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function ee(e,t){var n=e.className;x(t).test(n)||(e.className+=(n?" ":"")+t)}function xe(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!x(n[i]).test(t)&&(t+=" "+n[i]);return t}vt=document.createRange?function(e,t,n,i){var l=document.createRange();return l.setEnd(i||e,n),l.setStart(e,t),l}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch{return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var G=function(e){e.select()};function $(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function N(e,t,n){for(var i in t||(t={}),e)e.hasOwnProperty(i)&&(!1!==n||!t.hasOwnProperty(i))&&(t[i]=e[i]);return t}function A(e,t,n,i,l){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=i||0,s=l||0;;){var u=e.indexOf("\t",a);if(u<0||u>=t)return s+(t-a);s+=u-a,s+=n-s%n,a=u+1}}tt?G=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:pe&&(G=function(e){try{e.select()}catch{}});var ae=function(){this.id=null,this.f=null,this.time=0,this.handler=$(this.onTimeout,this)};function B(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}ae.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},ae.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var Se={toString:function(){return"CodeMirror.Pass"}},yt={scroll:!1},Vt={origin:"*mouse"},gt={origin:"+move"};function bt(e,t,n){for(var i=0,l=0;;){var a=e.indexOf("\t",i);-1==a&&(a=e.length);var s=a-i;if(a==e.length||l+s>=t)return i+Math.min(s,t-l);if(l+=a-i,i=a+1,(l+=n-l%n)>=t)return i}}var be=[""];function or(e){for(;be.length<=e;)be.push(Me(be)+" ");return be[e]}function Me(e){return e[e.length-1]}function jt(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function mn(){}function Y(e,t){var n;return Object.create?n=Object.create(e):(mn.prototype=e,n=new mn),t&&N(t,n),n}var Ae=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function L(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Ae.test(e))}function z(e,t){return t?!!(t.source.indexOf("\\w")>-1&&L(e))||t.test(e):L(e)}function X(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var we=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fe(e){return e.charCodeAt(0)>=768&&we.test(e)}function $t(e,t,n){for(;(n<0?t>0:t<e.length)&&fe(e.charAt(t));)t+=n;return t}function wt(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var l=(t+n)/2,a=i<0?Math.ceil(l):Math.floor(l);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+i}}var Bt=null;function lt(e,t,n){var i;Bt=null;for(var l=0;l<e.length;++l){var a=e[l];if(a.from<t&&a.to>t)return l;a.to==t&&(a.from!=a.to&&"before"==n?i=l:Bt=l),a.from==t&&(a.from!=a.to&&"before"!=n?i=l:Bt=l)}return i??Bt}var Rt=function(){function n(h){return h<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(h):1424<=h&&h<=1524?"R":1536<=h&&h<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(h-1536):1774<=h&&h<=2220?"r":8192<=h&&h<=8203?"w":8204==h?"b":"L"}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,l=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,u=/[1n]/;function f(h,c,d){this.level=h,this.from=c,this.to=d}return function(h,c){var d="ltr"==c?"L":"R";if(0==h.length||"ltr"==c&&!i.test(h))return!1;for(var g=h.length,y=[],w=0;w<g;++w)y.push(n(h.charCodeAt(w)));for(var k=0,M=d;k<g;++k){var D=y[k];"m"==D?y[k]=M:M=D}for(var E=0,W=d;E<g;++E){var I=y[E];"1"==I&&"r"==W?y[E]="n":a.test(I)&&(W=I,"r"==I&&(y[E]="R"))}for(var _=1,q=y[0];_<g-1;++_){var he=y[_];"+"==he&&"1"==q&&"1"==y[_+1]?y[_]="1":","==he&&q==y[_+1]&&("1"==q||"n"==q)&&(y[_]=q),q=he}for(var me=0;me<g;++me){var Xe=y[me];if(","==Xe)y[me]="N";else if("%"==Xe){var Ne=void 0;for(Ne=me+1;Ne<g&&"%"==y[Ne];++Ne);for(var ze=me&&"!"==y[me-1]||Ne<g&&"1"==y[Ne]?"1":"N",et=me;et<Ne;++et)y[et]=ze;me=Ne-1}}for(var Fe=0,_e=d;Fe<g;++Fe){var Ee=y[Fe];"L"==_e&&"1"==Ee?y[Fe]="L":a.test(Ee)&&(_e=Ee)}for(var Le=0;Le<g;++Le)if(l.test(y[Le])){var He=void 0;for(He=Le+1;He<g&&l.test(y[He]);++He);for(var it="L"==(Le?y[Le-1]:d),Mt=it==("L"==(He<g?y[He]:d))?it?"L":"R":d,Zt=Le;Zt<He;++Zt)y[Zt]=Mt;Le=He-1}for(var Dr,Pe=[],st=0;st<g;)if(s.test(y[st])){var gn=st;for(++st;st<g&&s.test(y[st]);++st);Pe.push(new f(0,gn,st))}else{var ir=st,Dt=Pe.length,Ar="rtl"==c?1:0;for(++st;st<g&&"L"!=y[st];++st);for(var Ut=ir;Ut<st;)if(u.test(y[Ut])){ir<Ut&&(Pe.splice(Dt,0,new f(1,ir,Ut)),Dt+=Ar);var Cl=Ut;for(++Ut;Ut<st&&u.test(y[Ut]);++Ut);Pe.splice(Dt,0,new f(2,Cl,Ut)),Dt+=Ar,ir=Ut}else++Ut;ir<st&&Pe.splice(Dt,0,new f(1,ir,st))}return"ltr"==c&&(1==Pe[0].level&&(Dr=h.match(/^\s+/))&&(Pe[0].from=Dr[0].length,Pe.unshift(new f(0,0,Dr[0].length))),1==Me(Pe).level&&(Dr=h.match(/\s+$/))&&(Me(Pe).to-=Dr[0].length,Pe.push(new f(0,g-Dr[0].length,g)))),"rtl"==c?Pe.reverse():Pe}}();function R(e,t){var n=e.order;return null==n&&(n=e.order=Rt(e.text,t)),n}var pi=[],ie=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||pi).concat(n)}};function Qe(e,t){return e._handlers&&e._handlers[t]||pi}function We(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,l=i&&i[t];if(l){var a=B(l,n);a>-1&&(i[t]=l.slice(0,a).concat(l.slice(a+1)))}}}function mt(e,t){var n=Qe(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),l=0;l<n.length;++l)n[l].apply(null,i)}function Be(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),mt(e,n||t.type,e,t),qt(t)||t.codemirrorIgnore}function Xt(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==B(n,t[i])&&n.push(t[i])}function nt(e,t){return Qe(e,t).length>0}function yr(e){e.prototype.on=function(t,n){ie(this,t,n)},e.prototype.off=function(t,n){We(this,t,n)}}function Ot(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Gr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function qt(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Yr(e){Ot(e),Gr(e)}function ji(e){return e.target||e.srcElement}function hr(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),m&&e.ctrlKey&&1==t&&(t=3),t}var yn,zn,Sl=function(){if(pe&&ke<9)return!1;var e=J("div");return"draggable"in e||"dragDrop"in e}();function Wo(e){if(null==yn){var t=J("span","\u200b");re(e,J("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(yn=t.offsetWidth<=1&&t.offsetHeight>2&&!(pe&&ke<8))}var n=yn?J("span","\u200b"):J("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function xn(e){if(null!=zn)return zn;var t=re(e,document.createTextNode("A\u062eA")),n=vt(t,0,1).getBoundingClientRect(),i=vt(t,1,2).getBoundingClientRect();return H(e),!(!n||n.left==n.right)&&(zn=i.right-n.right<3)}var e,xr=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var l=e.indexOf("\n",t);-1==l&&(l=e.length);var a=e.slice(t,"\r"==e.charAt(l-1)?l-1:l),s=a.indexOf("\r");-1!=s?(n.push(a.slice(0,s)),t+=s+1):(n.push(a),t=l+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Ur=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Io="oncopy"in(e=J("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),cr=null,vi={},Nr={};function lr(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),vi[e]=t}function Fr(e){if("string"==typeof e&&Nr.hasOwnProperty(e))e=Nr[e];else if(e&&"string"==typeof e.name&&Nr.hasOwnProperty(e.name)){var t=Nr[e.name];"string"==typeof t&&(t={name:t}),(e=Y(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Fr("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Fr("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function gi(e,t){t=Fr(t);var n=vi[t.name];if(!n)return gi(e,"text/plain");var i=n(e,t);if(ar.hasOwnProperty(t.name)){var l=ar[t.name];for(var a in l)l.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=l[a])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)i[s]=t.modeProps[s];return i}var ar={};function wn(e,t){N(t,ar.hasOwnProperty(e)?ar[e]:ar[e]={})}function Er(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var l=t[i];l instanceof Array&&(l=l.concat([])),n[i]=l}return n}function ht(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function oe(e,t,n){return!e.startState||e.startState(t,n)}var Ve=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function le(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var l=n.children[i],a=l.chunkSize();if(t<a){n=l;break}t-=a}return n.lines[t]}function zt(e,t,n){var i=[],l=t.line;return e.iter(t.line,n.line+1,function(a){var s=a.text;l==n.line&&(s=s.slice(0,n.ch)),l==t.line&&(s=s.slice(t.ch)),i.push(s),++l}),i}function Re(e,t,n){var i=[];return e.iter(t,n,function(l){i.push(l.text)}),i}function Wt(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function p(e){if(null==e.parent)return null;for(var t=e.parent,n=B(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var l=0;i.children[l]!=t;++l)n+=i.children[l].chunkSize();return n+t.first}function b(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var l=e.children[i],a=l.height;if(t<a){e=l;continue e}t-=a,n+=l.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var f=e.lines[s].height;if(t<f)break;t-=f}return n+s}function C(e,t){return t>=e.first&&t<e.first+e.size}function O(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function F(e,t,n){if(void 0===n&&(n=null),!(this instanceof F))return new F(e,t,n);this.line=e,this.ch=t,this.sticky=n}function Z(e,t){return e.line-t.line||e.ch-t.ch}function Ie(e,t){return e.sticky==t.sticky&&0==Z(e,t)}function St(e){return F(e.line,e.ch)}function er(e,t){return Z(e,t)<0?t:e}function ve(e,t){return Z(e,t)<0?e:t}function Ca(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ye(e,t){if(t.line<e.first)return F(e.first,0);var n=e.first+e.size-1;return t.line>n?F(n,le(e,n).text.length):function Ho(e,t){var n=e.ch;return null==n||n>t?F(e.line,t):n<0?F(e.line,0):e}(t,le(e,t.line).text.length)}function Or(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=ye(e,t[i]);return n}Ve.prototype.eol=function(){return this.pos>=this.string.length},Ve.prototype.sol=function(){return this.pos==this.lineStart},Ve.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ve.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ve.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ve.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ve.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ve.prototype.skipToEnd=function(){this.pos=this.string.length},Ve.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Ve.prototype.backUp=function(e){this.pos-=e},Ve.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=A(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?A(this.string,this.lineStart,this.tabSize):0)},Ve.prototype.indentation=function(){return A(this.string,null,this.tabSize)-(this.lineStart?A(this.string,this.lineStart,this.tabSize):0)},Ve.prototype.match=function(e,t,n){if("string"!=typeof e){var a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&!1!==t&&(this.pos+=a[0].length),a)}var i=function(s){return n?s.toLowerCase():s};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},Ve.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ve.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ve.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ve.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Xi=function(e,t){this.state=e,this.lookAhead=t},Wr=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function mi(e,t,n,i){var l=[e.state.modeGen],a={};ka(e,t.text,e.doc.mode,n,function(h,c){return l.push(h,c)},a,i);for(var s=n.state,u=function(h){n.baseTokens=l;var c=e.state.overlays[h],d=1,g=0;n.state=!0,ka(e,t.text,c.mode,n,function(y,w){for(var k=d;g<y;){var M=l[d];M>y&&l.splice(d,1,y,l[d+1],M),d+=2,g=Math.min(y,M)}if(w)if(c.opaque)l.splice(k,d-k,y,"overlay "+w),d=k+2;else for(;k<d;k+=2){var D=l[k+1];l[k+1]=(D?D+" ":"")+"overlay "+w}},a),n.state=s,n.baseTokens=null,n.baseTokenPos=1},f=0;f<e.state.overlays.length;++f)u(f);return{styles:l,classes:a.bgClass||a.textClass?a:null}}function Po(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=yi(e,p(t)),l=t.text.length>e.options.maxHighlightLength&&Er(e.doc.mode,i.state),a=mi(e,t,i);l&&(i.state=l),t.stateAfter=i.save(!l),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function yi(e,t,n){var i=e.doc,l=e.display;if(!i.mode.startState)return new Wr(i,!0,t);var a=function La(e,t,n){for(var i,l,a=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),u=t;u>s;--u){if(u<=a.first)return a.first;var f=le(a,u-1),h=f.stateAfter;if(h&&(!n||u+(h instanceof Xi?h.lookAhead:0)<=a.modeFrontier))return u;var c=A(f.text,null,e.options.tabSize);(null==l||i>c)&&(l=u-1,i=c)}return l}(e,t,n),s=a>i.first&&le(i,a-1).stateAfter,u=s?Wr.fromSaved(i,s,a):new Wr(i,oe(i.mode),a);return i.iter(a,t,function(f){qi(e,f.text,u);var h=u.line;f.stateAfter=h==t-1||h%5==0||h>=l.viewFrom&&h<l.viewTo?u.save():null,u.nextLine()}),n&&(i.modeFrontier=u.line),u}function qi(e,t,n,i){var l=e.doc.mode,a=new Ve(t,e.options.tabSize,n);for(a.start=a.pos=i||0,""==t&&kl(l,n.state);!a.eol();)Bo(l,a,n.state),a.start=a.pos}function kl(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=ht(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function Bo(e,t,n,i){for(var l=0;l<10;l++){i&&(i[0]=ht(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}Wr.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Wr.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Wr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Wr.fromSaved=function(e,t,n){return t instanceof Xi?new Wr(e,Er(e.mode,t.state),n,t.lookAhead):new Wr(e,Er(e.mode,t),n)},Wr.prototype.save=function(e){var t=!1!==e?Er(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Xi(t,this.maxLookAhead):t};var Ll=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Tl(e,t,n,i){var s,c,l=e.doc,a=l.mode,u=le(l,(t=ye(l,t)).line),f=yi(e,t.line,n),h=new Ve(u.text,e.options.tabSize,f);for(i&&(c=[]);(i||h.pos<t.ch)&&!h.eol();)h.start=h.pos,s=Bo(a,h,f.state),i&&c.push(new Ll(h,s,Er(l.mode,f.state)));return i?c:new Ll(h,s,f.state)}function Sa(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[i])||(t[i]+=" "+n[2])}return e}function ka(e,t,n,i,l,a,s){var u=n.flattenSpans;null==u&&(u=e.options.flattenSpans);var d,f=0,h=null,c=new Ve(t,e.options.tabSize,i),g=e.options.addModeClass&&[null];for(""==t&&Sa(kl(n,i.state),a);!c.eol();){if(c.pos>e.options.maxHighlightLength?(u=!1,s&&qi(e,t,i,c.pos),c.pos=t.length,d=null):d=Sa(Bo(n,c,i.state,g),a),g){var y=g[0].name;y&&(d="m-"+(d?y+" "+d:y))}if(!u||h!=d){for(;f<c.start;)l(f=Math.min(c.start,f+5e3),h);h=d}c.start=c.pos}for(;f<c.pos;){var w=Math.min(c.pos,f+5e3);l(w,h),f=w}}var Ta=!1,Qr=!1;function zo(e,t,n){this.marker=e,this.from=t,this.to=n}function Zi(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Ns(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Dl(e,t){if(t.full)return null;var n=C(e,t.from.line)&&le(e,t.from.line).markedSpans,i=C(e,t.to.line)&&le(e,t.to.line).markedSpans;if(!n&&!i)return null;var l=t.from.ch,a=t.to.ch,s=0==Z(t.from,t.to),u=function Ml(e,t,n){var i;if(e)for(var l=0;l<e.length;++l){var a=e[l],s=a.marker;null!=a.from&&!(s.inclusiveLeft?a.from<=t:a.from<t)&&(a.from!=t||"bookmark"!=s.type||n&&a.marker.insertLeft)||(i||(i=[])).push(new zo(s,a.from,null==a.to||(s.inclusiveRight?a.to>=t:a.to>t)?null:a.to))}return i}(n,l,s),f=function Ma(e,t,n){var i;if(e)for(var l=0;l<e.length;++l){var a=e[l],s=a.marker;(null==a.to||(s.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==s.type&&(!n||a.marker.insertLeft))&&(i||(i=[])).push(new zo(s,null==a.from||(s.inclusiveLeft?a.from<=t:a.from<t)?null:a.from-t,null==a.to?null:a.to-t))}return i}(i,a,s),h=1==t.text.length,c=Me(t.text).length+(h?l:0);if(u)for(var d=0;d<u.length;++d){var g=u[d];if(null==g.to){var y=Zi(f,g.marker);y?h&&(g.to=null==y.to?null:y.to+c):g.to=l}}if(f)for(var w=0;w<f.length;++w){var k=f[w];null!=k.to&&(k.to+=c),null==k.from?Zi(u,k.marker)||(k.from=c,h&&(u||(u=[])).push(k)):(k.from+=c,h&&(u||(u=[])).push(k))}u&&(u=Al(u)),f&&f!=u&&(f=Al(f));var D=[u];if(!h){var W,E=t.text.length-2;if(E>0&&u)for(var I=0;I<u.length;++I)null==u[I].to&&(W||(W=[])).push(new zo(u[I].marker,null,null));for(var _=0;_<E;++_)D.push(W);D.push(f)}return D}function Al(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ji(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Qi(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function xi(e){return e.inclusiveLeft?-1:0}function Vi(e){return e.inclusiveRight?1:0}function _o(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),l=t.find(),a=Z(i.from,l.from)||xi(e)-xi(t);return a?-a:Z(i.to,l.to)||Vi(e)-Vi(t)||t.id-e.id}function $i(e,t){var i,n=Qr&&e.markedSpans;if(n)for(var l=void 0,a=0;a<n.length;++a)(l=n[a]).marker.collapsed&&null==(t?l.from:l.to)&&(!i||_o(i,l.marker)<0)&&(i=l.marker);return i}function Aa(e){return $i(e,!0)}function eo(e){return $i(e,!1)}function Ir(e,t){var i,n=Qr&&e.markedSpans;if(n)for(var l=0;l<n.length;++l){var a=n[l];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!i||_o(i,a.marker)<0)&&(i=a.marker)}return i}function Na(e,t,n,i,l){var a=le(e,t),s=Qr&&a.markedSpans;if(s)for(var u=0;u<s.length;++u){var f=s[u];if(f.marker.collapsed){var h=f.marker.find(0),c=Z(h.from,n)||xi(f.marker)-xi(l),d=Z(h.to,i)||Vi(f.marker)-Vi(l);if(!(c>=0&&d<=0||c<=0&&d>=0)&&(c<=0&&(f.marker.inclusiveRight&&l.inclusiveLeft?Z(h.to,n)>=0:Z(h.to,n)>0)||c>=0&&(f.marker.inclusiveRight&&l.inclusiveLeft?Z(h.from,i)<=0:Z(h.from,i)<0)))return!0}}}function Kr(e){for(var t;t=Aa(e);)e=t.find(-1,!0).line;return e}function jr(e,t){var n=le(e,t),i=Kr(n);return n==i?t:p(i)}function Go(e,t){if(t>e.lastLine())return t;var i,n=le(e,t);if(!tr(e,n))return t;for(;i=eo(n);)n=i.find(1,!0).line;return p(n)+1}function tr(e,t){var n=Qr&&t.markedSpans;if(n)for(var i=void 0,l=0;l<n.length;++l)if((i=n[l]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&bi(e,t,i))return!0}}function bi(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return bi(e,i.line,Zi(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var l=void 0,a=0;a<t.markedSpans.length;++a)if((l=t.markedSpans[a]).marker.collapsed&&!l.marker.widgetNode&&l.from==n.to&&(null==l.to||l.to!=n.from)&&(l.marker.inclusiveLeft||n.marker.inclusiveRight)&&bi(e,t,l))return!0}function Hr(e){for(var t=0,n=(e=Kr(e)).parent,i=0;i<n.lines.length;++i){var l=n.lines[i];if(l==e)break;t+=l.height}for(var a=n.parent;a;a=(n=a).parent)for(var s=0;s<a.children.length;++s){var u=a.children[s];if(u==n)break;t+=u.height}return t}function Vr(e){if(0==e.height)return 0;for(var n,t=e.text.length,i=e;n=Aa(i);){var l=n.find(0,!0);i=l.from.line,t+=l.from.ch-l.to.ch}for(i=e;n=eo(i);){var a=n.find(0,!0);t-=i.text.length-a.from.ch,t+=(i=a.to.line).text.length-a.to.ch}return t}function Fl(e){var t=e.display,n=e.doc;t.maxLine=le(n,n.first),t.maxLineLength=Vr(t.maxLine),t.maxLineChanged=!0,n.iter(function(i){var l=Vr(i);l>t.maxLineLength&&(t.maxLineLength=l,t.maxLine=i)})}var wi=function(e,t,n){this.text=e,Qi(this,t),this.height=n?n(this):1};function Os(e){e.parent=null,Ji(e)}wi.prototype.lineNo=function(){return p(this)},yr(wi);var Ea={},Oa={};function Wa(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Oa:Ea;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Ia(e,t){var n=rt("span",null,null,qe?"padding-right: .1px":null),i={pre:rt("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var l=0;l<=(t.rest?t.rest.length:0);l++){var a=l?t.rest[l-1]:t.line,s=void 0;i.pos=0,i.addToken=Is,xn(e.display.measure)&&(s=R(a,e.doc.direction))&&(i.addToken=Hs(i.addToken,s)),i.map=[],Uo(a,i,Po(e,a,t!=e.display.externalMeasured&&p(a))),a.styleClasses&&(a.styleClasses.bgClass&&(i.bgClass=xe(a.styleClasses.bgClass,i.bgClass||"")),a.styleClasses.textClass&&(i.textClass=xe(a.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Wo(e.display.measure))),0==l?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(qe){var f=i.content.lastChild;(/\bcm-tab\b/.test(f.className)||f.querySelector&&f.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return mt(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=xe(i.pre.className,i.textClass||"")),i}function Ws(e){var t=J("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Is(e,t,n,i,l,a,s){if(t){var c,u=e.splitSpaces?function Ha(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",l=0;l<e.length;l++){var a=e.charAt(l);" "==a&&n&&(l==e.length-1||32==e.charCodeAt(l+1))&&(a="\xa0"),i+=a,n=" "==a}return i}(t,e.trailingSpace):t,f=e.cm.state.specialChars,h=!1;if(f.test(t)){c=document.createDocumentFragment();for(var d=0;;){f.lastIndex=d;var g=f.exec(t),y=g?g.index-d:t.length-d;if(y){var w=document.createTextNode(u.slice(d,d+y));c.appendChild(pe&&ke<9?J("span",[w]):w),e.map.push(e.pos,e.pos+y,w),e.col+=y,e.pos+=y}if(!g)break;d+=y+1;var k=void 0;if("\t"==g[0]){var M=e.cm.options.tabSize,D=M-e.col%M;(k=c.appendChild(J("span",or(D),"cm-tab"))).setAttribute("role","presentation"),k.setAttribute("cm-text","\t"),e.col+=D}else"\r"==g[0]||"\n"==g[0]?((k=c.appendChild(J("span","\r"==g[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",g[0]),e.col+=1):((k=e.cm.options.specialCharPlaceholder(g[0])).setAttribute("cm-text",g[0]),c.appendChild(pe&&ke<9?J("span",[k]):k),e.col+=1);e.map.push(e.pos,e.pos+1,k),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),pe&&ke<9&&(h=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||i||l||h||a||s){var E=n||"";i&&(E+=i),l&&(E+=l);var W=J("span",[c],E,a);if(s)for(var I in s)s.hasOwnProperty(I)&&"style"!=I&&"class"!=I&&W.setAttribute(I,s[I]);return e.content.appendChild(W)}e.content.appendChild(c)}}function Hs(e,t){return function(n,i,l,a,s,u,f){l=l?l+" cm-force-border":"cm-force-border";for(var h=n.pos,c=h+i.length;;){for(var d=void 0,g=0;g<t.length&&!((d=t[g]).to>h&&d.from<=h);g++);if(d.to>=c)return e(n,i,l,a,s,u,f);e(n,i.slice(0,d.to-h),l,a,null,u,f),a=null,i=i.slice(d.to-h),h=d.to}}}function El(e,t,n,i){var l=!i&&n.widgetNode;l&&e.map.push(e.pos,e.pos+t,l),!i&&e.cm.display.input.needsContentAttribute&&(l||(l=e.content.appendChild(document.createElement("span"))),l.setAttribute("cm-marker",n.id)),l&&(e.cm.display.input.setUneditable(l),e.content.appendChild(l)),e.pos+=t,e.trailingSpace=!1}function Uo(e,t,n){var i=e.markedSpans,l=e.text,a=0;if(i)for(var d,g,w,k,M,D,E,u=l.length,f=0,h=1,c="",y=0;;){if(y==f){w=k=M=g="",E=null,D=null,y=1/0;for(var W=[],I=void 0,_=0;_<i.length;++_){var q=i[_],he=q.marker;if("bookmark"==he.type&&q.from==f&&he.widgetNode)W.push(he);else if(q.from<=f&&(null==q.to||q.to>f||he.collapsed&&q.to==f&&q.from==f)){if(null!=q.to&&q.to!=f&&y>q.to&&(y=q.to,k=""),he.className&&(w+=" "+he.className),he.css&&(g=(g?g+";":"")+he.css),he.startStyle&&q.from==f&&(M+=" "+he.startStyle),he.endStyle&&q.to==y&&(I||(I=[])).push(he.endStyle,q.to),he.title&&((E||(E={})).title=he.title),he.attributes)for(var me in he.attributes)(E||(E={}))[me]=he.attributes[me];he.collapsed&&(!D||_o(D.marker,he)<0)&&(D=q)}else q.from>f&&y>q.from&&(y=q.from)}if(I)for(var Xe=0;Xe<I.length;Xe+=2)I[Xe+1]==y&&(k+=" "+I[Xe]);if(!D||D.from==f)for(var Ne=0;Ne<W.length;++Ne)El(t,0,W[Ne]);if(D&&(D.from||0)==f){if(El(t,(null==D.to?u+1:D.to)-f,D.marker,null==D.from),null==D.to)return;D.to==f&&(D=!1)}}if(f>=u)break;for(var ze=Math.min(u,y);;){if(c){var et=f+c.length;if(!D){var Fe=et>ze?c.slice(0,ze-f):c;t.addToken(t,Fe,d?d+w:w,M,f+Fe.length==y?k:"",g,E)}if(et>=ze){c=c.slice(ze-f),f=ze;break}f=et,M=""}c=l.slice(a,a=n[h++]),d=Wa(n[h++],t.cm.options)}}else for(var s=1;s<n.length;s+=2)t.addToken(t,l.slice(a,a=n[s]),Wa(n[s+1],t.cm.options))}function _n(e,t,n){this.line=t,this.rest=function Fa(e){for(var t,n;t=eo(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?p(Me(this.rest))-n+1:1,this.node=this.text=null,this.hidden=tr(e,t)}function Ko(e,t,n){for(var l,i=[],a=t;a<n;a=l){var s=new _n(e.doc,le(e.doc,a),a);l=a+s.size,i.push(s)}return i}var Ci=null,ro=null;function Ft(e,t){var n=Qe(e,t);if(n.length){var l,i=Array.prototype.slice.call(arguments,2);Ci?l=Ci.delayedCallbacks:ro?l=ro:(l=ro=[],setTimeout(no,0));for(var a=function(u){l.push(function(){return n[u].apply(null,i)})},s=0;s<n.length;++s)a(s)}}function no(){var e=ro;ro=null;for(var t=0;t<e.length;++t)e[t]()}function Pa(e,t,n,i){for(var l=0;l<t.changes.length;l++){var a=t.changes[l];"text"==a?Ba(e,t):"gutter"==a?Ra(e,t,n,i):"class"==a?Ol(e,t):"widget"==a&&za(e,t,i)}t.changes=null}function Si(e){return e.node==e.text&&(e.node=J("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),pe&&ke<8&&(e.node.style.zIndex=2)),e.node}function jo(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Ia(e,t)}function Ba(e,t){var n=t.text.className,i=jo(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,Ol(e,t)):n&&(t.text.className=n)}function Ol(e,t){(function Bs(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=Si(t);t.background=i.insertBefore(J("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?Si(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function Ra(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var l=Si(t);t.gutterBackground=J("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),l.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var s=Si(t),u=t.gutter=J("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(u.setAttribute("aria-hidden","true"),e.display.input.setUneditable(u),s.insertBefore(u,t.text),t.line.gutterClass&&(u.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!a||!a["CodeMirror-linenumbers"])&&(t.lineNumber=u.appendChild(J("div",O(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var f=0;f<e.display.gutterSpecs.length;++f){var h=e.display.gutterSpecs[f].className,c=a.hasOwnProperty(h)&&a[h];c&&u.appendChild(J("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[h]+"px; width: "+i.gutterWidth[h]+"px"))}}}function za(e,t,n){t.alignable&&(t.alignable=null);for(var i=x("CodeMirror-linewidget"),l=t.node.firstChild,a=void 0;l;l=a)a=l.nextSibling,i.test(l.className)&&t.node.removeChild(l);Ga(e,t,n)}function _a(e,t,n,i){var l=jo(e,t);return t.text=t.node=l.pre,l.bgClass&&(t.bgClass=l.bgClass),l.textClass&&(t.textClass=l.textClass),Ol(e,t),Ra(e,t,n,i),Ga(e,t,i),t.node}function Ga(e,t,n){if(ki(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)ki(e,t.rest[i],t,n,!1)}function ki(e,t,n,i,l){if(t.widgets)for(var a=Si(n),s=0,u=t.widgets;s<u.length;++s){var f=u[s],h=J("div",[f.node],"CodeMirror-linewidget"+(f.className?" "+f.className:""));f.handleMouseEvents||h.setAttribute("cm-ignore-events","true"),$r(f,h,n,i),e.display.input.setUneditable(h),l&&f.above?a.insertBefore(h,n.gutter||n.text):a.appendChild(h),Ft(f,"redraw")}}function $r(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var l=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(l-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=l+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function Cn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!S(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),re(t.display.measure,J("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Pr(e,t){for(var n=ji(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function io(e){return e.lineSpace.offsetTop}function br(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Sn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=re(e.measure,J("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(i.left)&&!isNaN(i.right)&&(e.cachedPaddingH=i),i}function wr(e){return 50-e.display.nativeBarWidth}function Gn(e){return e.display.scroller.clientWidth-wr(e)-e.display.barWidth}function Xo(e){return e.display.scroller.clientHeight-wr(e)-e.display.barHeight}function Wl(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var l=0;l<e.rest.length;l++)if(p(e.rest[l])>n)return{map:e.measure.maps[l],cache:e.measure.caches[l],before:!0}}}function Un(e,t,n,i){return Br(e,Kn(e,t),n,i)}function Cr(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[sr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Kn(e,t){var n=p(t),i=Cr(e,n);i&&!i.text?i=null:i&&i.changes&&(Pa(e,i,n,$o(e)),e.curOp.forceUpdate=!0),i||(i=function Il(e,t){var n=p(t=Kr(t)),i=e.display.externalMeasured=new _n(e.doc,t,n);i.lineN=n;var l=i.built=Ia(e,i);return i.text=l.pre,re(e.display.lineMeasure,l.pre),i}(e,t));var l=Wl(i,t,n);return{line:t,view:i,rect:null,map:l.map,cache:l.cache,before:l.before,hasHeights:!1}}function Br(e,t,n,i,l){t.before&&(n=-1);var s,a=n+(i||"");return t.cache.hasOwnProperty(a)?s=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function Rs(e,t,n){var i=e.options.lineWrapping,l=i&&Gn(e);if(!t.measure.heights||i&&t.measure.width!=l){var a=t.measure.heights=[];if(i){t.measure.width=l;for(var s=t.text.firstChild.getClientRects(),u=0;u<s.length-1;u++){var f=s[u],h=s[u+1];Math.abs(f.bottom-h.bottom)>2&&a.push((f.bottom+h.top)/2-n.top)}}a.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),s=function ja(e,t,n,i){var h,l=Ka(t.map,n,i),a=l.node,s=l.start,u=l.end,f=l.collapse;if(3==a.nodeType){for(var c=0;c<4;c++){for(;s&&fe(t.line.text.charAt(l.coverStart+s));)--s;for(;l.coverStart+u<l.coverEnd&&fe(t.line.text.charAt(l.coverStart+u));)++u;if((h=pe&&ke<9&&0==s&&u==l.coverEnd-l.coverStart?a.parentNode.getBoundingClientRect():zs(vt(a,s,u).getClientRects(),i)).left||h.right||0==s)break;u=s,s-=1,f="right"}pe&&ke<11&&(h=function Xa(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function bn(e){if(null!=cr)return cr;var t=re(e,J("span","x")),n=t.getBoundingClientRect(),i=vt(t,0,1).getBoundingClientRect();return cr=Math.abs(n.left-i.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}(e.display.measure,h))}else{var d;s>0&&(f=i="right"),h=e.options.lineWrapping&&(d=a.getClientRects()).length>1?d["right"==i?d.length-1:0]:a.getBoundingClientRect()}if(pe&&ke<9&&!s&&(!h||!h.left&&!h.right)){var g=a.parentNode.getClientRects()[0];h=g?{left:g.left,right:g.left+Ln(e.display),top:g.top,bottom:g.bottom}:Ua}for(var y=h.top-t.rect.top,w=h.bottom-t.rect.top,k=(y+w)/2,M=t.view.measure.heights,D=0;D<M.length-1&&!(k<M[D]);D++);var I={left:("right"==f?h.right:h.left)-t.rect.left,right:("left"==f?h.left:h.right)-t.rect.left,top:D?M[D-1]:0,bottom:M[D]};return!h.left&&!h.right&&(I.bogus=!0),e.options.singleCursorHeightPerLine||(I.rtop=y,I.rbottom=w),I}(e,t,n,i),s.bogus||(t.cache[a]=s)),{left:s.left,right:s.right,top:l?s.rtop:s.top,bottom:l?s.rbottom:s.bottom}}var kr,Ua={left:0,right:0,top:0,bottom:0};function Ka(e,t,n){for(var i,l,a,s,u,f,h=0;h<e.length;h+=3)if(f=e[h+1],t<(u=e[h])?(l=0,a=1,s="left"):t<f?a=1+(l=t-u):(h==e.length-3||t==f&&e[h+3]>t)&&(l=(a=f-u)-1,t>=f&&(s="right")),null!=l){if(i=e[h+2],u==f&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==l)for(;h&&e[h-2]==e[h-3]&&e[h-1].insertLeft;)i=e[2+(h-=3)],s="left";if("right"==n&&l==f-u)for(;h<e.length-3&&e[h+3]==e[h+4]&&!e[h+5].insertLeft;)i=e[(h+=3)+2],s="right";break}return{node:i,start:l,end:a,collapse:s,coverStart:u,coverEnd:f}}function zs(e,t){var n=Ua;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var l=e.length-1;l>=0&&(n=e[l]).left==n.right;l--);return n}function Li(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Hl(e){e.display.externalMeasure=null,H(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Li(e.display.view[t])}function Ti(e){Hl(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function qo(){return ut&&Kt?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function oo(){return ut&&Kt?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Yo(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=Cn(e.widgets[n]));return t}function jn(e,t,n,i,l){if(!l){var a=Yo(t);n.top+=a,n.bottom+=a}if("line"==i)return n;i||(i="local");var s=Hr(t);if("local"==i?s+=io(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var u=e.display.lineSpace.getBoundingClientRect();s+=u.top+("window"==i?0:oo());var f=u.left+("window"==i?0:qo());n.left+=f,n.right+=f}return n.top+=s,n.bottom+=s,n}function Sr(e,t,n){if("div"==n)return t;var i=t.left,l=t.top;if("page"==n)i-=qo(),l-=oo();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();i+=a.left,l+=a.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:l-s.top}}function lo(e,t,n,i,l){return i||(i=le(e.doc,t.line)),jn(e,i,Un(e,i,t.ch,l),n)}function dr(e,t,n,i,l,a){function s(w,k){var M=Br(e,l,w,k?"right":"left",a);return k?M.left=M.right:M.right=M.left,jn(e,i,M,n)}i=i||le(e.doc,t.line),l||(l=Kn(e,i));var u=R(i,e.doc.direction),f=t.ch,h=t.sticky;if(f>=i.text.length?(f=i.text.length,h="before"):f<=0&&(f=0,h="after"),!u)return s("before"==h?f-1:f,"before"==h);function c(w,k,M){return s(M?w-1:w,1==u[k].level!=M)}var d=lt(u,f,h),g=Bt,y=c(f,d,"before"==h);return null!=g&&(y.other=c(f,g,"before"!=h)),y}function Zo(e,t){var n=0;t=ye(e.doc,t),e.options.lineWrapping||(n=Ln(e.display)*t.ch);var i=le(e.doc,t.line),l=Hr(i)+io(e.display);return{left:n,right:n,top:l,bottom:l+i.height}}function Jo(e,t,n,i,l){var a=F(e,t,n);return a.xRel=l,i&&(a.outside=i),a}function Qo(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return Jo(i.first,0,null,-1,-1);var l=b(i,n),a=i.first+i.size-1;if(l>a)return Jo(i.first+i.size-1,le(i,a).text.length,null,1,1);t<0&&(t=0);for(var s=le(i,l);;){var u=_s(e,s,l,t,n),f=Ir(s,u.ch+(u.xRel>0||u.outside>0?1:0));if(!f)return u;var h=f.find(1);if(h.line==l)return h;s=le(i,l=h.line)}}function Vo(e,t,n,i){i-=Yo(t);var l=t.text.length,a=wt(function(s){return Br(e,n,s-1).bottom<=i},l,0);return{begin:a,end:l=wt(function(s){return Br(e,n,s).top>i},a,l)}}function qa(e,t,n,i){return n||(n=Kn(e,t)),Vo(e,t,n,jn(e,t,Br(e,n,i),"line").top)}function Pl(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function _s(e,t,n,i,l){l-=Hr(t);var a=Kn(e,t),s=Yo(t),u=0,f=t.text.length,h=!0,c=R(t,e.doc.direction);if(c){var d=(e.options.lineWrapping?Mi:Xn)(e,t,n,a,c,i,l);u=(h=1!=d.level)?d.from:d.to-1,f=h?d.to:d.from-1}var k,M,g=null,y=null,w=wt(function(_){var q=Br(e,a,_);return q.top+=s,q.bottom+=s,!!Pl(q,i,l,!1)&&(q.top<=l&&q.left<=i&&(g=_,y=q),!0)},u,f),D=!1;if(y){var E=i-y.left<y.right-i,W=E==h;w=g+(W?0:1),M=W?"after":"before",k=E?y.left:y.right}else{!h&&(w==f||w==u)&&w++,M=0==w?"after":w==t.text.length?"before":Br(e,a,w-(h?1:0)).bottom+s<=l==h?"after":"before";var I=dr(e,F(n,w,M),"line",t,a);k=I.left,D=l<I.top?-1:l>=I.bottom?1:0}return Jo(n,w=$t(t.text,w,1),M,D,i-k)}function Xn(e,t,n,i,l,a,s){var u=wt(function(d){var g=l[d],y=1!=g.level;return Pl(dr(e,F(n,y?g.to:g.from,y?"before":"after"),"line",t,i),a,s,!0)},0,l.length-1),f=l[u];if(u>0){var h=1!=f.level,c=dr(e,F(n,h?f.from:f.to,h?"after":"before"),"line",t,i);Pl(c,a,s,!0)&&c.top>s&&(f=l[u-1])}return f}function Mi(e,t,n,i,l,a,s){var u=Vo(e,t,i,s),f=u.begin,h=u.end;/\s/.test(t.text.charAt(h-1))&&h--;for(var c=null,d=null,g=0;g<l.length;g++){var y=l[g];if(!(y.from>=h||y.to<=f)){var k=Br(e,i,1!=y.level?Math.min(h,y.to)-1:Math.max(f,y.from)).right,M=k<a?a-k+1e9:k-a;(!c||d>M)&&(c=y,d=M)}}return c||(c=l[l.length-1]),c.from<f&&(c={from:f,to:c.to,level:c.level}),c.to>h&&(c={from:c.from,to:h,level:c.level}),c}function kn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==kr){kr=J("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)kr.appendChild(document.createTextNode("x")),kr.appendChild(J("br"));kr.appendChild(document.createTextNode("x"))}re(e.measure,kr);var n=kr.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),H(e.measure),n||1}function Ln(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=J("span","xxxxxxxxxx"),n=J("pre",[t],"CodeMirror-line-like");re(e.measure,n);var i=t.getBoundingClientRect(),l=(i.right-i.left)/10;return l>2&&(e.cachedCharWidth=l),l||10}function $o(e){for(var t=e.display,n={},i={},l=t.gutters.clientLeft,a=t.gutters.firstChild,s=0;a;a=a.nextSibling,++s){var u=e.display.gutterSpecs[s].className;n[u]=a.offsetLeft+a.clientLeft+l,i[u]=a.clientWidth}return{fixedPos:ao(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function ao(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Tn(e){var t=kn(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/Ln(e.display)-3);return function(l){if(tr(e.doc,l))return 0;var a=0;if(l.widgets)for(var s=0;s<l.widgets.length;s++)l.widgets[s].height&&(a+=l.widgets[s].height);return n?a+(Math.ceil(l.text.length/i)||1)*t:a+t}}function en(e){var t=e.doc,n=Tn(e);t.iter(function(i){var l=n(i);l!=i.height&&Wt(i,l)})}function At(e,t,n,i){var l=e.display;if(!n&&"true"==ji(t).getAttribute("cm-not-content"))return null;var a,s,u=l.lineSpace.getBoundingClientRect();try{a=t.clientX-u.left,s=t.clientY-u.top}catch{return null}var h,f=Qo(e,a,s);if(i&&f.xRel>0&&(h=le(e.doc,f.line).text).length==f.ch){var c=A(h,h.length,e.options.tabSize)-h.length;f=F(f.line,Math.max(0,Math.round((a-Sn(e.display).left)/Ln(e.display))-c))}return f}function sr(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function kt(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var l=e.display;if(i&&n<l.viewTo&&(null==l.updateLineNumbers||l.updateLineNumbers>t)&&(l.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=l.viewTo)Qr&&jr(e.doc,t)<l.viewTo&&Mn(e);else if(n<=l.viewFrom)Qr&&Go(e.doc,n+i)>l.viewFrom?Mn(e):(l.viewFrom+=i,l.viewTo+=i);else if(t<=l.viewFrom&&n>=l.viewTo)Mn(e);else if(t<=l.viewFrom){var a=so(e,n,n+i,1);a?(l.view=l.view.slice(a.index),l.viewFrom=a.lineN,l.viewTo+=i):Mn(e)}else if(n>=l.viewTo){var s=so(e,t,t,-1);s?(l.view=l.view.slice(0,s.index),l.viewTo=s.lineN):Mn(e)}else{var u=so(e,t,t,-1),f=so(e,n,n+i,1);u&&f?(l.view=l.view.slice(0,u.index).concat(Ko(e,u.lineN,f.lineN)).concat(l.view.slice(f.index)),l.viewTo+=i):Mn(e)}var h=l.externalMeasured;h&&(n<h.lineN?h.lineN+=i:t<h.lineN+h.size&&(l.externalMeasured=null))}function Rr(e,t,n){e.curOp.viewChanged=!0;var i=e.display,l=e.display.externalMeasured;if(l&&t>=l.lineN&&t<l.lineN+l.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var a=i.view[sr(e,t)];if(null!=a.node){var s=a.changes||(a.changes=[]);-1==B(s,n)&&s.push(n)}}}function Mn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function so(e,t,n,i){var a,l=sr(e,t),s=e.display.view;if(!Qr||n==e.doc.first+e.doc.size)return{index:l,lineN:n};for(var u=e.display.viewFrom,f=0;f<l;f++)u+=s[f].size;if(u!=t){if(i>0){if(l==s.length-1)return null;a=u+s[l].size-t,l++}else a=u-t;t+=a,n+=a}for(;jr(e.doc,n)!=n;){if(l==(i<0?0:s.length-1))return null;n+=i*s[l-(i<0?1:0)].size,l+=i}return{index:l,lineN:n}}function Bl(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var l=t[i];!l.hidden&&(!l.node||l.changes)&&++n}return n}function qn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function fo(e,t){void 0===t&&(t=!0);var n=e.doc,i={},l=i.cursors=document.createDocumentFragment(),a=i.selection=document.createDocumentFragment(),s=e.options.$customCursor;s&&(t=!0);for(var u=0;u<n.sel.ranges.length;u++)if(t||u!=n.sel.primIndex){var f=n.sel.ranges[u];if(!(f.from().line>=e.display.viewTo||f.to().line<e.display.viewFrom)){var h=f.empty();if(s){var c=s(e,f);c&&Rl(e,c,l)}else(h||e.options.showCursorWhenSelecting)&&Rl(e,f.head,l);h||Ya(e,f,a)}}return i}function Rl(e,t,n){var i=dr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),l=n.appendChild(J("div","\xa0","CodeMirror-cursor"));if(l.style.left=i.left+"px",l.style.top=i.top+"px",l.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var a=lo(e,t,"div",null,null),s=a.right-a.left;l.style.width=(s>0?s:e.defaultCharWidth())+"px"}if(i.other){var u=n.appendChild(J("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));u.style.display="",u.style.left=i.other.left+"px",u.style.top=i.other.top+"px",u.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function Di(e,t){return e.top-t.top||e.left-t.left}function Ya(e,t,n){var i=e.display,l=e.doc,a=document.createDocumentFragment(),s=Sn(e.display),u=s.left,f=Math.max(i.sizerWidth,Gn(e)-i.sizer.offsetLeft)-s.right,h="ltr"==l.direction;function c(W,I,_,q){I<0&&(I=0),I=Math.round(I),q=Math.round(q),a.appendChild(J("div",null,"CodeMirror-selected","position: absolute; left: "+W+"px;\n                             top: "+I+"px; width: "+(_??f-W)+"px;\n                             height: "+(q-I)+"px"))}function d(W,I,_){var me,Xe,q=le(l,W),he=q.text.length;function Ne(Fe,_e){return lo(e,F(W,Fe),"div",q,_e)}function ze(Fe,_e,Ee){var Le=qa(e,q,null,Fe),He="ltr"==_e==("after"==Ee)?"left":"right";return Ne("after"==Ee?Le.begin:Le.end-(/\s/.test(q.text.charAt(Le.end-1))?2:1),He)[He]}var et=R(q,l.direction);return function Ct(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var l=!1,a=0;a<e.length;++a){var s=e[a];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",a),l=!0)}l||i(t,n,"ltr")}(et,I||0,_??he,function(Fe,_e,Ee,Le){var He="ltr"==Ee,it=Ne(Fe,He?"left":"right"),Tt=Ne(_e-1,He?"right":"left"),Mt=null==I&&0==Fe,Zt=null==_&&_e==he,Pe=0==Le,Dr=!et||Le==et.length-1;if(Tt.top-it.top<=3){var ir=(h?Mt:Zt)&&Pe?u:(He?it:Tt).left;c(ir,it.top,((h?Zt:Mt)&&Dr?f:(He?Tt:it).right)-ir,it.bottom)}else{var Ar,Ut,Cl,fu;He?(Ar=h&&Mt&&Pe?u:it.left,Ut=h?f:ze(Fe,Ee,"before"),Cl=h?u:ze(_e,Ee,"after"),fu=h&&Zt&&Dr?f:Tt.right):(Ar=h?ze(Fe,Ee,"before"):u,Ut=!h&&Mt&&Pe?f:it.right,Cl=!h&&Zt&&Dr?u:Tt.left,fu=h?ze(_e,Ee,"after"):f),c(Ar,it.top,Ut-Ar,it.bottom),it.bottom<Tt.top&&c(u,it.bottom,null,Tt.top),c(Cl,Tt.top,fu-Cl,Tt.bottom)}(!me||Di(it,me)<0)&&(me=it),Di(Tt,me)<0&&(me=Tt),(!Xe||Di(it,Xe)<0)&&(Xe=it),Di(Tt,Xe)<0&&(Xe=Tt)}),{start:me,end:Xe}}var g=t.from(),y=t.to();if(g.line==y.line)d(g.line,g.ch,y.ch);else{var w=le(l,g.line),k=le(l,y.line),M=Kr(w)==Kr(k),D=d(g.line,g.ch,M?w.text.length+1:null).end,E=d(y.line,M?0:null,y.ch).start;M&&(D.top<E.top-2?(c(D.right,D.top,null,D.bottom),c(u,E.top,E.left,E.bottom)):c(D.right,D.top,E.left-D.right,D.bottom)),D.bottom<E.top&&c(u,D.bottom,null,E.top)}n.appendChild(a)}function ho(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Yn(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function el(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Ai(e))}function Dn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Yn(e))},100)}function Ai(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(mt(e,"focus",e,t),e.state.focused=!0,ee(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),qe&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),ho(e))}function Yn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(mt(e,"blur",e,t),e.state.focused=!1,K(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Zn(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=Math.max(0,t.scroller.getBoundingClientRect().top),l=t.lineDiv.getBoundingClientRect().top,a=0,s=0;s<t.view.length;s++){var u=t.view[s],f=e.options.lineWrapping,h=void 0,c=0;if(!u.hidden){if(l+=u.line.height,pe&&ke<8){var d=u.node.offsetTop+u.node.offsetHeight;h=d-n,n=d}else{var g=u.node.getBoundingClientRect();h=g.bottom-g.top,!f&&u.text.firstChild&&(c=u.text.firstChild.getBoundingClientRect().right-g.left-1)}var y=u.line.height-h;if((y>.005||y<-.005)&&(l<i&&(a-=y),Wt(u.line,h),Za(u.line),u.rest))for(var w=0;w<u.rest.length;w++)Za(u.rest[w]);if(c>e.display.sizerWidth){var k=Math.ceil(c/Ln(e.display));k>e.display.maxLineLength&&(e.display.maxLineLength=k,e.display.maxLine=u.line,e.display.maxLineChanged=!0)}}}Math.abs(a)>2&&(t.scroller.scrollTop+=a)}function Za(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function tl(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-io(e));var l=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,a=b(t,i),s=b(t,l);if(n&&n.ensure){var u=n.ensure.from.line,f=n.ensure.to.line;u<a?(a=u,s=b(t,Hr(le(t,u))+e.wrapper.clientHeight)):Math.min(f,t.lastLine())>=s&&(a=b(t,Hr(le(t,f))-e.wrapper.clientHeight),s=f)}return{from:a,to:Math.max(s,a+1)}}function An(e,t){var n=e.display,i=kn(e.display);t.top<0&&(t.top=0);var l=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=Xo(e),s={};t.bottom-t.top>a&&(t.bottom=t.top+a);var u=e.doc.height+br(n),h=t.bottom>u-i;if(t.top<l)s.scrollTop=t.top<i?0:t.top;else if(t.bottom>l+a){var c=Math.min(t.top,(h?u:t.bottom)-a);c!=l&&(s.scrollTop=c)}var d=e.options.fixedGutter?0:n.gutters.offsetWidth,g=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-d,y=Gn(e)-n.gutters.offsetWidth,w=t.right-t.left>y;return w&&(t.right=t.left+y),t.left<10?s.scrollLeft=0:t.left<g?s.scrollLeft=Math.max(0,t.left+d-(w?0:10)):t.right>y+g-3&&(s.scrollLeft=t.right+(w?0:10)-y),s}function Jn(e,t){null!=t&&(Fn(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Ni(e){Fn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Nn(e,t,n){(null!=t||null!=n)&&Fn(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Fn(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Gl(e,Zo(e,t.from),Zo(e,t.to),t.margin))}function Gl(e,t,n,i){var l=An(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});Nn(e,l.scrollLeft,l.scrollTop)}function zr(e,t){Math.abs(e.doc.scrollTop-t)<2||(Te||po(e,{top:t}),Fi(e,t,!0),Te&&po(e),On(e,100))}function Fi(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function pr(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(!(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||i)&&(e.doc.scrollLeft=t,ol(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function tn(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+br(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+wr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Lr=function(e,t,n){this.cm=n;var i=this.vert=J("div",[J("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),l=this.horiz=J("div",[J("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=l.tabIndex=-1,e(i),e(l),ie(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),ie(l,"scroll",function(){l.clientWidth&&t(l.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,pe&&ke<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Lr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?i:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(n?i:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},Lr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Lr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Lr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=m&&!Jt?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new ae,this.disableVert=new ae},Lr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function i(){var l=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(l.right-1,(l.top+l.bottom)/2):document.elementFromPoint((l.right+l.left)/2,l.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)})},Lr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Ei=function(){};function Qn(e,t){t||(t=tn(e));var n=e.display.barWidth,i=e.display.barHeight;Ul(e,t);for(var l=0;l<4&&n!=e.display.barWidth||i!=e.display.barHeight;l++)n!=e.display.barWidth&&e.options.lineWrapping&&Zn(e),Ul(e,tn(e)),n=e.display.barWidth,i=e.display.barHeight}function Ul(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Ei.prototype.update=function(){return{bottom:0,right:0}},Ei.prototype.setScrollLeft=function(){},Ei.prototype.setScrollTop=function(){},Ei.prototype.clear=function(){};var Qa={native:Lr,null:Ei};function En(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&K(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Qa[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ie(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?pr(e,t):zr(e,t)},e),e.display.scrollbars.addClass&&ee(e.display.wrapper,e.display.scrollbars.addClass)}var Vn=0;function $n(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Vn,markArrays:null},function Ps(e){Ci?Ci.ops.push(e):e.ownsGroup=Ci={ops:[e],delayedCallbacks:[]}}(e.curOp)}function ei(e){var t=e.curOp;t&&function It(e,t){var n=e.ownsGroup;if(n)try{!function to(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var l=e.ops[i];if(l.cursorActivityHandlers)for(;l.cursorActivityCalled<l.cursorActivityHandlers.length;)l.cursorActivityHandlers[l.cursorActivityCalled++].call(null,l.cm)}}while(n<t.length)}(n)}finally{Ci=null,t(n)}}(t,function(n){for(var i=0;i<n.ops.length;i++)n.ops[i].cm.curOp=null;!function Us(e){for(var t=e.ops,n=0;n<t.length;n++)Ks(t[n]);for(var i=0;i<t.length;i++)js(t[i]);for(var l=0;l<t.length;l++)Xs(t[l]);for(var a=0;a<t.length;a++)ur(t[a]);for(var s=0;s<t.length;s++)Ht(t[s])}(n)})}function Ks(e){var t=e.cm,n=t.display;(function Ys(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=wr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=wr(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&Fl(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new rl(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function js(e){e.updatedDisplay=e.mustUpdate&&co(e.cm,e.update)}function Xs(e){var t=e.cm,n=t.display;e.updatedDisplay&&Zn(t),e.barMeasure=tn(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Un(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+wr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Gn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function ur(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&pr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==v();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Qn(t,e.barMeasure),e.updatedDisplay&&il(t,e.barMeasure),e.selectionChanged&&ho(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&el(e.cm)}function Ht(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&$a(t,e.update),null!=n.wheelStartX&&(null!=e.scrollTop||null!=e.scrollLeft||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Fi(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&pr(t,e.scrollLeft,!0,!0),e.scrollToPos){var l=function zl(e,t,n,i){var l;null==i&&(i=0),!e.options.lineWrapping&&t==n&&(n="before"==t.sticky?F(t.line,t.ch+1,"before"):t,t=t.ch?F(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var a=0;a<5;a++){var s=!1,u=dr(e,t),f=n&&n!=t?dr(e,n):u,h=An(e,l={left:Math.min(u.left,f.left),top:Math.min(u.top,f.top)-i,right:Math.max(u.left,f.left),bottom:Math.max(u.bottom,f.bottom)+i}),c=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=h.scrollTop&&(zr(e,h.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(s=!0)),null!=h.scrollLeft&&(pr(e,h.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(s=!0)),!s)break}return l}(t,ye(i,e.scrollToPos.from),ye(i,e.scrollToPos.to),e.scrollToPos.margin);!function Gs(e,t){if(!Be(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),l=null;if(t.top+i.top<0?l=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(l=!1),null!=l&&!Qt){var a=J("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-io(e.display))+"px;\n                         height: "+(t.bottom-t.top+wr(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(l),e.display.lineSpace.removeChild(a)}}}(t,l)}var a=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(a)for(var u=0;u<a.length;++u)a[u].lines.length||mt(a[u],"hide");if(s)for(var f=0;f<s.length;++f)s[f].lines.length&&mt(s[f],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&mt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function $e(e,t){if(e.curOp)return t();$n(e);try{return t()}finally{ei(e)}}function Oe(e,t){return function(){if(e.curOp)return t.apply(e,arguments);$n(e);try{return t.apply(e,arguments)}finally{ei(e)}}}function Et(e){return function(){if(this.curOp)return e.apply(this,arguments);$n(this);try{return e.apply(this,arguments)}finally{ei(this)}}}function Pt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);$n(t);try{return e.apply(this,arguments)}finally{ei(t)}}}function On(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,$(qs,e))}function qs(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=yi(e,t.highlightFrontier),l=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(i.line>=e.display.viewFrom){var s=a.styles,u=a.text.length>e.options.maxHighlightLength?Er(t.mode,i.state):null,f=mi(e,a,i,!0);u&&(i.state=u),a.styles=f.styles;var h=a.styleClasses,c=f.classes;c?a.styleClasses=c:h&&(a.styleClasses=null);for(var d=!s||s.length!=a.styles.length||h!=c&&(!h||!c||h.bgClass!=c.bgClass||h.textClass!=c.textClass),g=0;!d&&g<s.length;++g)d=s[g]!=a.styles[g];d&&l.push(i.line),a.stateAfter=i.save(),i.nextLine()}else a.text.length<=e.options.maxHighlightLength&&qi(e,a.text,i),a.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return On(e,e.options.workDelay),!0}),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),l.length&&$e(e,function(){for(var a=0;a<l.length;a++)Rr(e,l[a],"text")})}}var rl=function(e,t,n){var i=e.display;this.viewport=t,this.visible=tl(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Gn(e),this.force=n,this.dims=$o(e),this.events=[]};function co(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return Mn(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Bl(e))return!1;Xl(e)&&(Mn(e),t.dims=$o(e));var l=i.first+i.size,a=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(l,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(l,n.viewTo)),Qr&&(a=jr(e.doc,a),s=Go(e.doc,s));var u=a!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function uo(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=Ko(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=Ko(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(sr(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(Ko(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,sr(e,n)))),i.viewTo=n})(e,a,s),n.viewOffset=Hr(le(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var f=Bl(e);if(!u&&0==f&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var h=function Kl(e){if(e.hasFocus())return null;var t=v();if(!t||!S(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&S(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(e);return f>4&&(n.lineDiv.style.display="none"),function jl(e,t,n){var i=e.display,l=e.options.lineNumbers,a=i.lineDiv,s=a.firstChild;function u(w){var k=w.nextSibling;return qe&&m&&e.display.currentWheelTarget==w?w.style.display="none":w.parentNode.removeChild(w),k}for(var f=i.view,h=i.viewFrom,c=0;c<f.length;c++){var d=f[c];if(!d.hidden)if(d.node&&d.node.parentNode==a){for(;s!=d.node;)s=u(s);var y=l&&null!=t&&t<=h&&d.lineNumber;d.changes&&(B(d.changes,"gutter")>-1&&(y=!1),Pa(e,d,h,n)),y&&(H(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(O(e.options,h)))),s=d.node.nextSibling}else{var g=_a(e,d,h,n);a.insertBefore(g,s)}h+=d.size}for(;s;)s=u(s)}(e,n.updateLineNumbers,t.dims),f>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function Va(e){if(e&&e.activeElt&&e.activeElt!=v()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&S(document.body,e.anchorNode)&&S(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(h),H(n.cursorDiv),H(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,u&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,On(e,400)),n.updateLineNumbers=null,!0}function $a(e,t){for(var n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldDisplayWidth!=Gn(e))i&&(t.visible=tl(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+br(e.display)-Xo(e),n.top)}),t.visible=tl(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!co(e,t))break;Zn(e);var l=tn(e);qn(e),Qn(e,l),il(e,l),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function po(e,t){var n=new rl(e,t);if(co(e,n)){Zn(e),$a(e,n);var i=tn(e);qn(e),Qn(e,i),il(e,i),n.finish()}}function nl(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px",Ft(e,"gutterChanged",e)}function il(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+wr(e)+"px"}function ol(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=ao(t)-t.scroller.scrollLeft+e.doc.scrollLeft,l=t.gutters.offsetWidth,a=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=a),n[s].gutterBackground&&(n[s].gutterBackground.style.left=a));var u=n[s].alignable;if(u)for(var f=0;f<u.length;f++)u[f].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=i+l+"px")}}function Xl(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=O(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var l=i.measure.appendChild(J("div",[J("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=l.firstChild.offsetWidth,s=l.offsetWidth-a;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(a,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",nl(e.display),!0}return!1}function ti(e,t){for(var n=[],i=!1,l=0;l<e.length;l++){var a=e[l],s=null;if("string"!=typeof a&&(s=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!t)continue;i=!0}n.push({className:a,style:s})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function es(e){var t=e.gutters,n=e.gutterSpecs;H(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var l=n[i],a=l.className,s=l.style,u=t.appendChild(J("div",null,"CodeMirror-gutter "+a));s&&(u.style.cssText=s),"CodeMirror-linenumbers"==a&&(e.lineGutter=u,u.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",nl(e)}function Wn(e){es(e.display),kt(e),ol(e)}function rn(e,t,n,i){var l=this;this.input=n,l.scrollbarFiller=J("div",null,"CodeMirror-scrollbar-filler"),l.scrollbarFiller.setAttribute("cm-not-content","true"),l.gutterFiller=J("div",null,"CodeMirror-gutter-filler"),l.gutterFiller.setAttribute("cm-not-content","true"),l.lineDiv=rt("div",null,"CodeMirror-code"),l.selectionDiv=J("div",null,null,"position: relative; z-index: 1"),l.cursorDiv=J("div",null,"CodeMirror-cursors"),l.measure=J("div",null,"CodeMirror-measure"),l.lineMeasure=J("div",null,"CodeMirror-measure"),l.lineSpace=rt("div",[l.measure,l.lineMeasure,l.selectionDiv,l.cursorDiv,l.lineDiv],null,"position: relative; outline: none");var a=rt("div",[l.lineSpace],"CodeMirror-lines");l.mover=J("div",[a],null,"position: relative"),l.sizer=J("div",[l.mover],"CodeMirror-sizer"),l.sizerWidth=null,l.heightForcer=J("div",null,null,"position: absolute; height: 50px; width: 1px;"),l.gutters=J("div",null,"CodeMirror-gutters"),l.lineGutter=null,l.scroller=J("div",[l.sizer,l.heightForcer,l.gutters],"CodeMirror-scroll"),l.scroller.setAttribute("tabIndex","-1"),l.wrapper=J("div",[l.scrollbarFiller,l.gutterFiller,l.scroller],"CodeMirror"),l.wrapper.setAttribute("translate","no"),pe&&ke<8&&(l.gutters.style.zIndex=-1,l.scroller.style.paddingRight=0),!qe&&!(Te&&ot)&&(l.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(l.wrapper):e(l.wrapper)),l.viewFrom=l.viewTo=t.first,l.reportedViewFrom=l.reportedViewTo=t.first,l.view=[],l.renderedView=null,l.externalMeasured=null,l.viewOffset=0,l.lastWrapHeight=l.lastWrapWidth=0,l.updateLineNumbers=null,l.nativeBarWidth=l.barHeight=l.barWidth=0,l.scrollbarsClipped=!1,l.lineNumWidth=l.lineNumInnerWidth=l.lineNumChars=null,l.alignWidgets=!1,l.cachedCharWidth=l.cachedTextHeight=l.cachedPaddingH=null,l.maxLine=null,l.maxLineLength=0,l.maxLineChanged=!1,l.wheelDX=l.wheelDY=l.wheelStartX=l.wheelStartY=null,l.shift=!1,l.selForContextMenu=null,l.activeTouch=null,l.gutterSpecs=ti(i.gutters,i.lineNumbers),es(l),n.init(l)}rl.prototype.signal=function(e,t){nt(e,t)&&this.events.push(arguments)},rl.prototype.finish=function(){for(var e=0;e<this.events.length;e++)mt.apply(null,this.events[e])};var vo=0,nn=null;function ql(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function vr(e){var t=ql(e);return t.x*=nn,t.y*=nn,t}function Ue(e,t){var n=ql(t),i=n.x,l=n.y,a=nn;0===t.deltaMode&&(i=t.deltaX,l=t.deltaY,a=1);var s=e.display,u=s.scroller,h=u.scrollHeight>u.clientHeight;if(i&&u.scrollWidth>u.clientWidth||l&&h){if(l&&m&&qe)e:for(var c=t.target,d=s.view;c!=u;c=c.parentNode)for(var g=0;g<d.length;g++)if(d[g].node==c){e.display.currentWheelTarget=c;break e}if(i&&!Te&&!de&&null!=a)return l&&h&&zr(e,Math.max(0,u.scrollTop+l*a)),pr(e,Math.max(0,u.scrollLeft+i*a)),(!l||l&&h)&&Ot(t),void(s.wheelStartX=null);if(l&&null!=a){var y=l*a,w=e.doc.scrollTop,k=w+s.wrapper.clientHeight;y<0?w=Math.max(0,w+y-50):k=Math.min(e.doc.height,k+y+50),po(e,{top:w,bottom:k})}vo<20&&0!==t.deltaMode&&(null==s.wheelStartX?(s.wheelStartX=u.scrollLeft,s.wheelStartY=u.scrollTop,s.wheelDX=i,s.wheelDY=l,setTimeout(function(){if(null!=s.wheelStartX){var M=u.scrollLeft-s.wheelStartX,D=u.scrollTop-s.wheelStartY,E=D&&s.wheelDY&&D/s.wheelDY||M&&s.wheelDX&&M/s.wheelDX;s.wheelStartX=s.wheelStartY=null,E&&(nn=(nn*vo+E)/(vo+1),++vo)}},200)):(s.wheelDX+=i,s.wheelDY+=l))}}pe?nn=-.53:Te?nn=15:ut?nn=-.7:Ye&&(nn=-1/3);var xt=function(e,t){this.ranges=e,this.primIndex=t};xt.prototype.primary=function(){return this.ranges[this.primIndex]},xt.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!Ie(n.anchor,i.anchor)||!Ie(n.head,i.head))return!1}return!0},xt.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new De(St(this.ranges[t].anchor),St(this.ranges[t].head));return new xt(e,this.primIndex)},xt.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},xt.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(Z(t,i.from())>=0&&Z(e,i.to())<=0)return n}return-1};var De=function(e,t){this.anchor=e,this.head=t};function _t(e,t,n){var i=e&&e.options.selectionsMayTouch,l=t[n];t.sort(function(g,y){return Z(g.from(),y.from())}),n=B(t,l);for(var a=1;a<t.length;a++){var s=t[a],u=t[a-1],f=Z(u.to(),s.from());if(i&&!s.empty()?f>0:f>=0){var h=ve(u.from(),s.from()),c=er(u.to(),s.to()),d=u.empty()?s.from()==s.head:u.from()==u.head;a<=n&&--n,t.splice(--a,2,new De(d?c:h,d?h:c))}}return new xt(t,n)}function on(e,t){return new xt([new De(e,t||e)],0)}function Xr(e){return e.text?F(e.from.line+e.text.length-1,Me(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Yl(e,t){if(Z(e,t.from)<0)return e;if(Z(e,t.to)<=0)return Xr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Xr(t).ch-t.to.ch),F(n,i)}function Zl(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var l=e.sel.ranges[i];n.push(new De(Yl(l.anchor,t),Yl(l.head,t)))}return _t(e.cm,n,e.sel.primIndex)}function ll(e,t,n){return e.line==t.line?F(n.line,e.ch-t.ch+n.ch):F(n.line+(e.line-t.line),e.ch)}function al(e){e.doc.mode=gi(e.options,e.doc.modeOption),ri(e)}function ri(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,On(e,100),e.state.modeGen++,e.curOp&&kt(e)}function ln(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Me(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function sl(e,t,n,i){function l(E){return n?n[E]:null}function a(E,W,I){(function Es(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ji(e),Qi(e,n);var l=i?i(e):1;l!=e.height&&Wt(e,l)})(E,W,I,i),Ft(E,"change",E,t)}function s(E,W){for(var I=[],_=E;_<W;++_)I.push(new wi(h[_],l(_),i));return I}var u=t.from,f=t.to,h=t.text,c=le(e,u.line),d=le(e,f.line),g=Me(h),y=l(h.length-1),w=f.line-u.line;if(t.full)e.insert(0,s(0,h.length)),e.remove(h.length,e.size-h.length);else if(ln(e,t)){var k=s(0,h.length-1);a(d,d.text,y),w&&e.remove(u.line,w),k.length&&e.insert(u.line,k)}else if(c==d)if(1==h.length)a(c,c.text.slice(0,u.ch)+g+c.text.slice(f.ch),y);else{var M=s(1,h.length-1);M.push(new wi(g+c.text.slice(f.ch),y,i)),a(c,c.text.slice(0,u.ch)+h[0],l(0)),e.insert(u.line+1,M)}else if(1==h.length)a(c,c.text.slice(0,u.ch)+h[0]+d.text.slice(f.ch),l(0)),e.remove(u.line+1,w);else{a(c,c.text.slice(0,u.ch)+h[0],l(0)),a(d,g+d.text.slice(f.ch),y);var D=s(1,h.length-1);w>1&&e.remove(u.line+1,w-1),e.insert(u.line+1,D)}Ft(e,"change",e,t)}function an(e,t,n){!function i(l,a,s){if(l.linked)for(var u=0;u<l.linked.length;++u){var f=l.linked[u];if(f.doc!=a){var h=s&&f.sharedHist;n&&!h||(t(f.doc,h),i(f.doc,l,h))}}}(e,null,!0)}function ts(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,en(e),al(e),mo(e),e.options.direction=t.direction,e.options.lineWrapping||Fl(e),e.options.mode=t.modeOption,kt(e)}function mo(e){("rtl"==e.doc.direction?ee:K)(e.display.lineDiv,"CodeMirror-rtl")}function yo(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Ql(e,t){var n={from:St(t.from),to:Xr(t),text:zt(e,t.from,t.to)};return is(e,n,t.from.line,t.to.line+1),an(e,function(i){return is(i,n,t.from.line,t.to.line+1)},!0),n}function Vl(e){for(;e.length&&Me(e).ranges;)e.pop()}function rs(e,t,n,i){var l=e.history;l.undone.length=0;var s,u,a=+new Date;if((l.lastOp==i||l.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&l.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(s=function Zs(e,t){return t?(Vl(e.done),Me(e.done)):e.done.length&&!Me(e.done).ranges?Me(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Me(e.done)):void 0}(l,l.lastOp==i)))u=Me(s.changes),0==Z(t.from,t.to)&&0==Z(t.from,u.to)?u.to=Xr(t):s.changes.push(Ql(e,t));else{var f=Me(l.done);for((!f||!f.ranges)&&fl(e.sel,l.done),s={changes:[Ql(e,t)],generation:l.generation},l.done.push(s);l.done.length>l.undoDepth;)l.done.shift(),l.done[0].ranges||l.done.shift()}l.done.push(n),l.generation=++l.maxGeneration,l.lastModTime=l.lastSelTime=a,l.lastOp=l.lastSelOp=i,l.lastOrigin=l.lastSelOrigin=t.origin,u||mt(e,"historyAdded")}function fl(e,t){var n=Me(t);n&&n.ranges&&n.equals(e)||t.push(e)}function is(e,t,n,i){var l=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(s){s.markedSpans&&((l||(l=t["spans_"+e.id]={}))[a]=s.markedSpans),++a})}function os(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function hl(e,t){var n=function Oi(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],l=0;l<t.text.length;++l)i.push(os(n[l]));return i}(e,t),i=Dl(e,t);if(!n)return i;if(!i)return n;for(var l=0;l<n.length;++l){var a=n[l],s=i[l];if(a&&s)e:for(var u=0;u<s.length;++u){for(var f=s[u],h=0;h<a.length;++h)if(a[h].marker==f.marker)continue e;a.push(f)}else s&&(n[l]=s)}return n}function sn(e,t,n){for(var i=[],l=0;l<e.length;++l){var a=e[l];if(a.ranges)i.push(n?xt.prototype.deepCopy.call(a):a);else{var s=a.changes,u=[];i.push({changes:u});for(var f=0;f<s.length;++f){var h=s[f],c=void 0;if(u.push({from:h.from,to:h.to,text:h.text}),t)for(var d in h)(c=d.match(/^spans_(\d+)$/))&&B(t,Number(c[1]))>-1&&(Me(u)[d]=h[d],delete h[d])}}}return i}function cl(e,t,n,i){if(i){var l=e.anchor;if(n){var a=Z(t,l)<0;a!=Z(n,l)<0?(l=t,t=n):a!=Z(t,n)<0&&(t=n)}return new De(l,t)}return new De(n||t,t)}function Wi(e,t,n,i,l){null==l&&(l=e.cm&&(e.cm.display.shift||e.extend)),Gt(e,new xt([cl(e.sel.primary(),t,n,l)],0),i)}function $l(e,t,n){for(var i=[],l=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)i[a]=cl(e.sel.ranges[a],t[a],null,l);Gt(e,_t(e.cm,i,e.sel.primIndex),n)}function ea(e,t,n,i){var l=e.sel.ranges.slice(0);l[t]=n,Gt(e,_t(e.cm,l,e.sel.primIndex),i)}function ta(e,t,n,i){Gt(e,on(t,n),i)}function xo(e,t,n){var i=e.history.done,l=Me(i);l&&l.ranges?(i[i.length-1]=t,bo(e,t,n)):Gt(e,t,n)}function Gt(e,t,n){bo(e,t,n),function ns(e,t,n,i){var l=e.history,a=i&&i.origin;n==l.lastSelOp||a&&l.lastSelOrigin==a&&(l.lastModTime==l.lastSelTime&&l.lastOrigin==a||function ul(e,t,n,i){var l=t.charAt(0);return"*"==l||"+"==l&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,a,Me(l.done),t))?l.done[l.done.length-1]=t:fl(t,l.done),l.lastSelTime=+new Date,l.lastSelOrigin=a,l.lastSelOp=n,i&&!1!==i.clearRedo&&Vl(l.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function bo(e,t,n){(nt(e,"beforeSelectionChange")||e.cm&&nt(e.cm,"beforeSelectionChange"))&&(t=function Yt(e,t,n){var i={ranges:t.ranges,update:function(l){this.ranges=[];for(var a=0;a<l.length;a++)this.ranges[a]=new De(ye(e,l[a].anchor),ye(e,l[a].head))},origin:n&&n.origin};return mt(e,"beforeSelectionChange",e,i),e.cm&&mt(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?_t(e.cm,i.ranges,i.ranges.length-1):t}(e,t,n));var i=n&&n.bias||(Z(t.primary().head,e.sel.primary().head)<0?-1:1);ra(e,wo(e,t,i,!0)),(!n||!1!==n.scroll)&&e.cm&&"nocursor"!=e.cm.getOption("readOnly")&&Ni(e.cm)}function ra(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Xt(e.cm)),Ft(e,"cursorActivity",e))}function ni(e){ra(e,wo(e,e.sel,null,!1))}function wo(e,t,n,i){for(var l,a=0;a<t.ranges.length;a++){var s=t.ranges[a],u=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],f=Co(e,s.anchor,u&&u.anchor,n,i),h=Co(e,s.head,u&&u.head,n,i);(l||f!=s.anchor||h!=s.head)&&(l||(l=t.ranges.slice(0,a)),l[a]=new De(f,h))}return l?_t(e.cm,l,t.primIndex):t}function ii(e,t,n,i,l){var a=le(e,t.line);if(a.markedSpans)for(var s=0;s<a.markedSpans.length;++s){var u=a.markedSpans[s],f=u.marker,h="selectLeft"in f?!f.selectLeft:f.inclusiveLeft,c="selectRight"in f?!f.selectRight:f.inclusiveRight;if((null==u.from||(h?u.from<=t.ch:u.from<t.ch))&&(null==u.to||(c?u.to>=t.ch:u.to>t.ch))){if(l&&(mt(f,"beforeCursorEnter"),f.explicitlyCleared)){if(a.markedSpans){--s;continue}break}if(!f.atomic)continue;if(n){var d=f.find(i<0?1:-1),g=void 0;if((i<0?c:h)&&(d=na(e,d,-i,d&&d.line==t.line?a:null)),d&&d.line==t.line&&(g=Z(d,n))&&(i<0?g<0:g>0))return ii(e,d,t,i,l)}var y=f.find(i<0?-1:1);return(i<0?h:c)&&(y=na(e,y,i,y.line==t.line?a:null)),y?ii(e,y,t,i,l):null}}return t}function Co(e,t,n,i,l){var a=i||1;return ii(e,t,n,a,l)||!l&&ii(e,t,n,a,!0)||ii(e,t,n,-a,l)||!l&&ii(e,t,n,-a,!0)||(e.cantEdit=!0,F(e.first,0))}function na(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?ye(e,F(t.line-1)):null:n>0&&t.ch==(i||le(e,t.line)).text.length?t.line<e.first+e.size-1?F(t.line+1,0):null:new F(t.line,t.ch+n)}function oi(e){e.setSelection(F(e.firstLine(),0),F(e.lastLine()),yt)}function ia(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(l,a,s,u){l&&(i.from=ye(e,l)),a&&(i.to=ye(e,a)),s&&(i.text=s),void 0!==u&&(i.origin=u)}),mt(e,"beforeChange",e,i),e.cm&&mt(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function un(e,t,n){if(e.cm){if(!e.cm.curOp)return Oe(e.cm,un)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(nt(e,"beforeChange")||e.cm&&nt(e.cm,"beforeChange"))||(t=ia(e,t,!0))){var i=Ta&&!n&&function Da(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(y){if(y.markedSpans)for(var w=0;w<y.markedSpans.length;++w){var k=y.markedSpans[w].marker;k.readOnly&&(!i||-1==B(i,k))&&(i||(i=[])).push(k)}}),!i)return null;for(var l=[{from:t,to:n}],a=0;a<i.length;++a)for(var s=i[a],u=s.find(0),f=0;f<l.length;++f){var h=l[f];if(!(Z(h.to,u.from)<0||Z(h.from,u.to)>0)){var c=[f,1],d=Z(h.from,u.from),g=Z(h.to,u.to);(d<0||!s.inclusiveLeft&&!d)&&c.push({from:h.from,to:u.from}),(g>0||!s.inclusiveRight&&!g)&&c.push({from:u.to,to:h.to}),l.splice.apply(l,c),f+=c.length-3}}return l}(e,t.from,t.to);if(i)for(var l=i.length-1;l>=0;--l)oa(e,{from:i[l].from,to:i[l].to,text:l?[""]:t.text,origin:t.origin});else oa(e,t)}}function oa(e,t){if(1!=t.text.length||""!=t.text[0]||0!=Z(t.from,t.to)){var n=Zl(e,t);rs(e,t,n,e.cm?e.cm.curOp.id:NaN),qr(e,t,n,Dl(e,t));var i=[];an(e,function(l,a){!a&&-1==B(i,l.history)&&(Hi(l.history,t),i.push(l.history)),qr(l,t,null,Dl(l,t))})}}function In(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var a,l=e.history,s=e.sel,u="undo"==t?l.done:l.undone,f="undo"==t?l.undone:l.done,h=0;h<u.length&&(a=u[h],!(n?a.ranges&&!a.equals(e.sel):!a.ranges));h++);if(h!=u.length){for(l.lastOrigin=l.lastSelOrigin=null;;){if(!(a=u.pop()).ranges){if(i)return void u.push(a);break}if(fl(a,f),n&&!a.equals(e.sel))return void Gt(e,a,{clearRedo:!1});s=a}var c=[];fl(s,f),f.push({changes:c,generation:l.generation}),l.generation=a.generation||++l.maxGeneration;for(var d=nt(e,"beforeChange")||e.cm&&nt(e.cm,"beforeChange"),g=function(k){var M=a.changes[k];if(M.origin=t,d&&!ia(e,M,!1))return u.length=0,{};c.push(Ql(e,M));var D=k?Zl(e,M):Me(u);qr(e,M,D,hl(e,M)),!k&&e.cm&&e.cm.scrollIntoView({from:M.from,to:Xr(M)});var E=[];an(e,function(W,I){!I&&-1==B(E,W.history)&&(Hi(W.history,M),E.push(W.history)),qr(W,M,null,hl(W,M))})},y=a.changes.length-1;y>=0;--y){var w=g(y);if(w)return w.v}}}}function ls(e,t){if(0!=t&&(e.first+=t,e.sel=new xt(jt(e.sel.ranges,function(l){return new De(F(l.anchor.line+t,l.anchor.ch),F(l.head.line+t,l.head.ch))}),e.sel.primIndex),e.cm)){kt(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)Rr(e.cm,i,"gutter")}}function qr(e,t,n,i){if(e.cm&&!e.cm.curOp)return Oe(e.cm,qr)(e,t,n,i);if(t.to.line<e.first)ls(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var l=t.text.length-1-(e.first-t.from.line);ls(e,l),t={from:F(e.first,0),to:F(t.to.line+l,t.to.ch),text:[Me(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:F(a,le(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=zt(e,t.from,t.to),n||(n=Zl(e,t)),e.cm?function as(e,t,n){var i=e.doc,l=e.display,a=t.from,s=t.to,u=!1,f=a.line;e.options.lineWrapping||(f=p(Kr(le(i,a.line))),i.iter(f,s.line+1,function(y){if(y==l.maxLine)return u=!0,!0})),i.sel.contains(t.from,t.to)>-1&&Xt(e),sl(i,t,n,Tn(e)),e.options.lineWrapping||(i.iter(f,a.line+t.text.length,function(y){var w=Vr(y);w>l.maxLineLength&&(l.maxLine=y,l.maxLineLength=w,l.maxLineChanged=!0,u=!1)}),u&&(e.curOp.updateMaxLine=!0)),function Jr(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var l=le(e,i).stateAfter;if(l&&(!(l instanceof Xi)||i+l.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(i,a.line),On(e,400);var h=t.text.length-(s.line-a.line)-1;t.full?kt(e):a.line!=s.line||1!=t.text.length||ln(e.doc,t)?kt(e,a.line,s.line+1,h):Rr(e,a.line,"text");var c=nt(e,"changes"),d=nt(e,"change");if(d||c){var g={from:a,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&Ft(e,"change",e,g),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(g)}e.display.selForContextMenu=null}(e.cm,t,i):sl(e,t,i),bo(e,n,yt),e.cantEdit&&Co(e,F(e.firstLine(),0))&&(e.cantEdit=!1)}}function li(e,t,n,i,l){var a;i||(i=n),Z(i,n)<0&&(n=(a=[i,n])[0],i=a[1]),"string"==typeof t&&(t=e.splitLines(t)),un(e,{from:n,to:i,text:t,origin:l})}function la(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function Ii(e,t,n,i){for(var l=0;l<e.length;++l){var a=e[l],s=!0;if(a.ranges){a.copied||((a=e[l]=a.deepCopy()).copied=!0);for(var u=0;u<a.ranges.length;u++)la(a.ranges[u].anchor,t,n,i),la(a.ranges[u].head,t,n,i)}else{for(var f=0;f<a.changes.length;++f){var h=a.changes[f];if(n<h.from.line)h.from=F(h.from.line+i,h.from.ch),h.to=F(h.to.line+i,h.to.ch);else if(t<=h.to.line){s=!1;break}}s||(e.splice(0,l+1),l=0)}}}function Hi(e,t){var n=t.from.line,i=t.to.line,l=t.text.length-(i-n)-1;Ii(e.done,n,i,l),Ii(e.undone,n,i,l)}function fn(e,t,n,i){var l=t,a=t;return"number"==typeof t?a=le(e,Ca(e,t)):l=p(t),null==l?null:(i(a,l)&&e.cm&&Rr(e.cm,l,n),a)}function hn(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function Pi(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var l=e[i];t+=l.chunkSize(),n+=l.height,l.parent=this}this.size=t,this.height=n,this.parent=null}De.prototype.from=function(){return ve(this.anchor,this.head)},De.prototype.to=function(){return er(this.anchor,this.head)},De.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},hn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var l=this.lines[n];this.height-=l.height,Os(l),Ft(l,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},Pi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],l=i.chunkSize();if(e<l){var a=Math.min(t,l-e),s=i.height;if(i.removeInner(e,a),this.height-=s-i.height,l==a&&(this.children.splice(n--,1),i.parent=null),0==(t-=a))break;e=0}else e-=l}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof hn))){var u=[];this.collapse(u),this.children=[new hn(u)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var l=this.children[i],a=l.chunkSize();if(e<=a){if(l.insertInner(e,t,n),l.lines&&l.lines.length>50){for(var s=l.lines.length%25+25,u=s;u<l.lines.length;){var f=new hn(l.lines.slice(u,u+=25));l.height-=f.height,this.children.splice(++i,0,f),f.parent=this}l.lines=l.lines.slice(0,s),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var n=new Pi(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=n.size,e.height-=n.height;var l=B(e.parent.children,e);e.parent.children.splice(l+1,0,n)}else{var i=new Pi(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var l=this.children[i],a=l.chunkSize();if(e<a){var s=Math.min(t,a-e);if(l.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=a}}};var So=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function aa(e,t,n){Hr(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Jn(e,n)}So.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=p(n);if(null!=i&&t){for(var l=0;l<t.length;++l)t[l]==this&&t.splice(l--,1);t.length||(n.widgets=null);var a=Cn(this);Wt(n,Math.max(0,n.height-a)),e&&($e(e,function(){aa(e,n,-a),Rr(e,i,"widget")}),Ft(e,"lineWidgetCleared",e,this,i))}},So.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var l=Cn(this)-t;l&&(tr(this.doc,i)||Wt(i,i.height+l),n&&$e(n,function(){n.curOp.forceUpdate=!0,aa(n,i,l),Ft(n,"lineWidgetChanged",n,e,p(i))}))},yr(So);var ai=0,Tr=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ai};function Bi(e,t,n,i,l){if(i&&i.shared)return function Js(e,t,n,i,l){(i=N(i)).shared=!1;var a=[Bi(e,t,n,i,l)],s=a[0],u=i.widgetNode;return an(e,function(f){u&&(i.widgetNode=u.cloneNode(!0)),a.push(Bi(f,ye(f,t),ye(f,n),i,l));for(var h=0;h<f.linked.length;++h)if(f.linked[h].isParent)return;s=Me(a)}),new Ri(a,s)}(e,t,n,i,l);if(e.cm&&!e.cm.curOp)return Oe(e.cm,Bi)(e,t,n,i,l);var a=new Tr(e,l),s=Z(t,n);if(i&&N(i,a,!1),s>0||0==s&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=rt("span",[a.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(Na(e,t.line,t,n,a)||t.line!=n.line&&Na(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Yi(){Qr=!0}()}a.addToHistory&&rs(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var h,u=t.line,f=e.cm;if(e.iter(u,n.line+1,function(d){f&&a.collapsed&&!f.options.lineWrapping&&Kr(d)==f.display.maxLine&&(h=!0),a.collapsed&&u!=t.line&&Wt(d,0),function Fs(e,t,n){var i=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));i&&i.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],i&&i.add(e.markedSpans)),t.marker.attachLine(e)}(d,new zo(a,u==t.line?t.ch:null,u==n.line?n.ch:null),e.cm&&e.cm.curOp),++u}),a.collapsed&&e.iter(t.line,n.line+1,function(d){tr(e,d)&&Wt(d,0)}),a.clearOnEnter&&ie(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(function Ro(){Ta=!0}(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++ai,a.atomic=!0),f){if(h&&(f.curOp.updateMaxLine=!0),a.collapsed)kt(f,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var c=t.line;c<=n.line;c++)Rr(f,c,"text");a.atomic&&ni(f.doc),Ft(f,"markerAdded",f,a)}return a}Tr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&$n(e),nt(this,"clear")){var n=this.find();n&&Ft(this,"clear",n.from,n.to)}for(var i=null,l=null,a=0;a<this.lines.length;++a){var s=this.lines[a],u=Zi(s.markedSpans,this);e&&!this.collapsed?Rr(e,p(s),"text"):e&&(null!=u.to&&(l=p(s)),null!=u.from&&(i=p(s))),s.markedSpans=Ns(s.markedSpans,u),null==u.from&&this.collapsed&&!tr(this.doc,s)&&e&&Wt(s,kn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var h=Kr(this.lines[f]),c=Vr(h);c>e.display.maxLineLength&&(e.display.maxLine=h,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&kt(e,i,l+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ni(e.doc)),e&&Ft(e,"markerCleared",e,this,i,l),t&&ei(e),this.parent&&this.parent.clear()}},Tr.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,i,l=0;l<this.lines.length;++l){var a=this.lines[l],s=Zi(a.markedSpans,this);if(null!=s.from&&(n=F(t?a:p(a),s.from),-1==e))return n;if(null!=s.to&&(i=F(t?a:p(a),s.to),1==e))return i}return n&&{from:n,to:i}},Tr.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;!t||!i||$e(i,function(){var l=t.line,a=p(t.line),s=Cr(i,a);if(s&&(Li(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!tr(n.doc,l)&&null!=n.height){var u=n.height;n.height=null;var f=Cn(n)-u;f&&Wt(l,l.height+f)}Ft(i,"markerChanged",i,e)})},Tr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||-1==B(t.maybeHiddenMarkers,this))&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Tr.prototype.detachLine=function(e){if(this.lines.splice(B(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},yr(Tr);var Ri=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function ss(e){return e.findMarks(F(e.first,0),e.clipPos(F(e.lastLine())),function(t){return t.parent})}function rr(e){for(var t=function(i){var l=e[i],a=[l.primary.doc];an(l.primary.doc,function(f){return a.push(f)});for(var s=0;s<l.markers.length;s++){var u=l.markers[s];-1==B(a,u.doc)&&(u.parent=null,l.markers.splice(s--,1))}},n=0;n<e.length;n++)t(n)}Ri.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Ft(this,"clear")}},Ri.prototype.find=function(e,t){return this.primary.find(e,t)},yr(Ri);var us=0,nr=function(e,t,n,i,l){if(!(this instanceof nr))return new nr(e,t,n,i,l);null==n&&(n=0),Pi.call(this,[new hn([new wi("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=F(n,0);this.sel=on(a),this.history=new yo(null),this.id=++us,this.modeOption=t,this.lineSep=i,this.direction="rtl"==l?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),sl(this,{from:a,to:a,text:e}),Gt(this,on(a),yt)};nr.prototype=Y(Pi.prototype,{constructor:nr,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Re(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Pt(function(e){var t=F(this.first,0),n=this.first+this.size-1;un(this,{from:t,to:F(n,le(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Nn(this.cm,0,0),Gt(this,on(t),yt)}),replaceRange:function(e,t,n,i){li(this,e,t=ye(this,t),n=n?ye(this,n):t,i)},getRange:function(e,t,n){var i=zt(this,ye(this,e),ye(this,t));return!1===n?i:i.join(""===n?"":n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(C(this,e))return le(this,e)},getLineNumber:function(e){return p(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=le(this,e)),Kr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ye(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Pt(function(e,t,n){ta(this,ye(this,"number"==typeof e?F(e,t||0):e),null,n)}),setSelection:Pt(function(e,t,n){ta(this,ye(this,e),ye(this,t||e),n)}),extendSelection:Pt(function(e,t,n){Wi(this,ye(this,e),t&&ye(this,t),n)}),extendSelections:Pt(function(e,t){$l(this,Or(this,e),t)}),extendSelectionsBy:Pt(function(e,t){$l(this,Or(this,jt(this.sel.ranges,e)),t)}),setSelections:Pt(function(e,t,n){if(e.length){for(var i=[],l=0;l<e.length;l++)i[l]=new De(ye(this,e[l].anchor),ye(this,e[l].head||e[l].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Gt(this,_t(this.cm,i,t),n)}}),addSelection:Pt(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new De(ye(this,e),ye(this,t||e))),Gt(this,_t(this.cm,i,i.length-1),n)}),getSelection:function(e){for(var n,t=this.sel.ranges,i=0;i<t.length;i++){var l=zt(this,t[i].from(),t[i].to());n=n?n.concat(l):l}return!1===e?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var l=zt(this,n[i].from(),n[i].to());!1!==e&&(l=l.join(e||this.lineSeparator())),t[i]=l}return t},replaceSelection:function(e,t,n){for(var i=[],l=0;l<this.sel.ranges.length;l++)i[l]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:Pt(function(e,t,n){for(var i=[],l=this.sel,a=0;a<l.ranges.length;a++){var s=l.ranges[a];i[a]={from:s.from(),to:s.to(),text:this.splitLines(e[a]),origin:n}}for(var u=t&&"end"!=t&&function go(e,t,n){for(var i=[],l=F(e.first,0),a=l,s=0;s<t.length;s++){var u=t[s],f=ll(u.from,l,a),h=ll(Xr(u),l,a);if(l=u.to,a=h,"around"==n){var c=e.sel.ranges[s],d=Z(c.head,c.anchor)<0;i[s]=new De(d?h:f,d?f:h)}else i[s]=new De(f,f)}return new xt(i,e.sel.primIndex)}(this,i,t),f=i.length-1;f>=0;f--)un(this,i[f]);u?xo(this,u):this.cm&&Ni(this.cm)}),undo:Pt(function(){In(this,"undo")}),redo:Pt(function(){In(this,"redo")}),undoSelection:Pt(function(){In(this,"undo",!0)}),redoSelection:Pt(function(){In(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var l=0;l<e.undone.length;l++)e.undone[l].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new yo(this.history),an(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:sn(this.history.done),undone:sn(this.history.undone)}},setHistory:function(e){var t=this.history=new yo(this.history);t.done=sn(e.done.slice(0),null,!0),t.undone=sn(e.undone.slice(0),null,!0)},setGutterMarker:Pt(function(e,t,n){return fn(this,e,"gutter",function(i){var l=i.gutterMarkers||(i.gutterMarkers={});return l[t]=n,!n&&X(l)&&(i.gutterMarkers=null),!0})}),clearGutter:Pt(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&fn(t,n,"gutter",function(){return n.gutterMarkers[e]=null,X(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!(C(this,e)&&(t=e,e=le(this,e))))return null}else if(null==(t=p(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Pt(function(e,t,n){return fn(this,e,"gutter"==t?"gutter":"class",function(i){var l="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(i[l]){if(x(n).test(i[l]))return!1;i[l]+=" "+n}else i[l]=n;return!0})}),removeLineClass:Pt(function(e,t,n){return fn(this,e,"gutter"==t?"gutter":"class",function(i){var l="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",a=i[l];if(!a)return!1;if(null==n)i[l]=null;else{var s=a.match(x(n));if(!s)return!1;var u=s.index+s[0].length;i[l]=a.slice(0,s.index)+(s.index&&u!=a.length?" ":"")+a.slice(u)||null}return!0})}),addLineWidget:Pt(function(e,t,n){return function Hn(e,t,n,i){var l=new So(e,n,i),a=e.cm;return a&&l.noHScroll&&(a.display.alignWidgets=!0),fn(e,t,"widget",function(s){var u=s.widgets||(s.widgets=[]);if(null==l.insertAt?u.push(l):u.splice(Math.min(u.length,Math.max(0,l.insertAt)),0,l),l.line=s,a&&!tr(e,s)){var f=Hr(s)<e.scrollTop;Wt(s,s.height+Cn(l)),f&&Jn(a,l.height),a.curOp.forceUpdate=!0}return!0}),a&&Ft(a,"lineWidgetAdded",a,l,"number"==typeof t?t:p(t)),l}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Bi(this,ye(this,e),ye(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Bi(this,e=ye(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=le(this,(e=ye(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var l=n[i];(null==l.from||l.from<=e.ch)&&(null==l.to||l.to>=e.ch)&&t.push(l.marker.parent||l.marker)}return t},findMarks:function(e,t,n){e=ye(this,e),t=ye(this,t);var i=[],l=e.line;return this.iter(e.line,t.line+1,function(a){var s=a.markedSpans;if(s)for(var u=0;u<s.length;u++){var f=s[u];!(null!=f.to&&l==e.line&&e.ch>=f.to||null==f.from&&l!=e.line||null!=f.from&&l==t.line&&f.from>=t.ch)&&(!n||n(f.marker))&&i.push(f.marker.parent||f.marker)}++l}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter(function(l){var a=l.text.length+i;if(a>e)return t=e,!0;e-=a,++n}),ye(this,F(n,t))},indexFromPos:function(e){var t=(e=ye(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(i){t+=i.text.length+n}),t},copy:function(e){var t=new nr(Re(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new nr(Re(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function Qs(e,t){for(var n=0;n<t.length;n++){var i=t[n],l=i.find(),a=e.clipPos(l.from),s=e.clipPos(l.to);if(Z(a,s)){var u=Bi(e,a,s,i.primary,i.primary.type);i.markers.push(u),u.parent=i}}}(i,ss(this)),i},unlinkDoc:function(e){if(e instanceof at&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),rr(ss(this));break}if(e.history==this.history){var i=[e.id];an(e,function(l){return i.push(l.id)},!0),e.history=new yo(null),e.history.done=sn(this.history.done,i),e.history.undone=sn(this.history.undone,i)}},iterLinkedDocs:function(e){an(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):xr(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Pt(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&function Jl(e){$e(e,function(){mo(e),kt(e)})}(this.cm))})}),nr.prototype.eachLine=nr.prototype.iter;var fs=0;function Vs(e){var t=this;if(sa(t),!Be(t,e)&&!Pr(t.display,e)){Ot(e),pe&&(fs=+new Date);var n=At(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var l=i.length,a=Array(l),s=0,u=function(){++s==l&&Oe(t,function(){var y={from:n=ye(t.doc,n),to:n,text:t.doc.splitLines(a.filter(function(w){return null!=w}).join(t.doc.lineSeparator())),origin:"paste"};un(t.doc,y),xo(t.doc,on(ye(t.doc,n),ye(t.doc,Xr(y))))})()},f=function(y,w){if(t.options.allowDropFileTypes&&-1==B(t.options.allowDropFileTypes,y.type))u();else{var k=new FileReader;k.onerror=function(){return u()},k.onload=function(){var M=k.result;/[\x00-\x08\x0e-\x1f]{2}/.test(M)||(a[w]=M),u()},k.readAsText(y)}},h=0;h<i.length;h++)f(i[h],h);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var c=e.dataTransfer.getData("Text");if(c){var d;if(t.state.draggingText&&!t.state.draggingText.copy&&(d=t.listSelections()),bo(t.doc,on(n,n)),d)for(var g=0;g<d.length;++g)li(t.doc,"",d[g].anchor,d[g].head,"drag");t.replaceSelection(c,"around","paste"),t.display.input.focus()}}catch{}}}}function sa(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ds(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var l=t[i].CodeMirror;l&&n.push(l)}n.length&&n[0].operation(function(){for(var a=0;a<n.length;a++)e(n[a])})}}var ps=!1;function ko(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var _r={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},cn=0;cn<10;cn++)_r[cn+48]=_r[cn+96]=String(cn);for(var Mr=65;Mr<=90;Mr++)_r[Mr]=String.fromCharCode(Mr);for(var Lo=1;Lo<=12;Lo++)_r[Lo+111]=_r[Lo+63235]="F"+Lo;var dn={};function zi(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,i,l,a,s=0;s<t.length-1;s++){var u=t[s];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))n=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else{if(!/^s(hift)?$/i.test(u))throw new Error("Unrecognized modifier name: "+u);l=!0}}return n&&(e="Alt-"+e),i&&(e="Ctrl-"+e),a&&(e="Cmd-"+e),l&&(e="Shift-"+e),e}function vs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var l=jt(n.split(" "),zi),a=0;a<l.length;a++){var s=void 0,u=void 0;a==l.length-1?(u=l.join(" "),s=i):(u=l.slice(0,a+1).join(" "),s="...");var f=t[u];if(f){if(f!=s)throw new Error("Inconsistent bindings for "+u)}else t[u]=s}delete e[n]}for(var h in t)e[h]=t[h];return e}function si(e,t,n,i){var l=(t=_i(t)).call?t.call(e,i):t[e];if(!1===l)return"nothing";if("..."===l)return"multi";if(null!=l&&n(l))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return si(e,t.fallthrough,n,i);for(var a=0;a<t.fallthrough.length;a++){var s=si(e,t.fallthrough[a],n,i);if(s)return s}}}function ua(e){var t="string"==typeof e?e:_r[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function To(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(T?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(T?t.ctrlKey:t.metaKey)&&"Mod"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function ui(e,t){if(de&&34==e.keyCode&&e.char)return!1;var n=_r[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),To(n,e,t))}function _i(e){return"string"==typeof e?dn[e]:e}function Bn(e,t){for(var n=e.doc.sel.ranges,i=[],l=0;l<n.length;l++){for(var a=t(n[l]);i.length&&Z(a.from,Me(i).to)<=0;){var s=i.pop();if(Z(s.from,a.from)<0){a.from=s.from;break}}i.push(a)}$e(e,function(){for(var u=i.length-1;u>=0;u--)li(e.doc,"",i[u].from,i[u].to,"+delete");Ni(e)})}function Mo(e,t,n){var i=$t(e.text,t+n,n);return i<0||i>e.text.length?null:i}function fa(e,t,n){var i=Mo(e,t.ch,n);return null==i?null:new F(t.line,i,n<0?"after":"before")}function fi(e,t,n,i,l){if(e){"rtl"==t.doc.direction&&(l=-l);var a=R(n,t.doc.direction);if(a){var h,s=l<0?Me(a):a[0],f=l<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var c=Kn(t,n),d=Br(t,c,h=l<0?n.text.length-1:0).top;h=wt(function(g){return Br(t,c,g).top==d},l<0==(1==s.level)?s.from:s.to-1,h),"before"==f&&(h=Mo(n,h,1))}else h=l<0?s.to:s.from;return new F(i,h,f)}}return new F(i,l<0?n.text.length:0,l<0?"before":"after")}dn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},dn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},dn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},dn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},dn.default=m?dn.macDefault:dn.pcDefault;var Do={selectAll:oi,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),yt)},killLine:function(e){return Bn(e,function(t){if(t.empty()){var n=le(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:F(t.head.line+1,0)}:{from:t.head,to:F(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Bn(e,function(t){return{from:F(t.from().line,0),to:ye(e.doc,F(t.to().line+1,0))}})},delLineLeft:function(e){return Bn(e,function(t){return{from:F(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Bn(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return Bn(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(F(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(F(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return ha(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return ms(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function dl(e,t){var n=le(e.doc,t),i=function Nl(e){for(var t;t=eo(e);)e=t.find(1,!0).line;return e}(n);return i!=n&&(t=p(i)),fi(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},gt)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},gt)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?ms(e,t.head):i},gt)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,l=0;l<n.length;l++){var a=n[l].from(),s=A(e.getLine(a.line),a.ch,i);t.push(or(i-s%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return $e(e,function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var l=t[i].head,a=le(e.doc,l.line).text;if(a)if(l.ch==a.length&&(l=new F(l.line,l.ch-1)),l.ch>0)l=new F(l.line,l.ch+1),e.replaceRange(a.charAt(l.ch-1)+a.charAt(l.ch-2),F(l.line,l.ch-2),l,"+transpose");else if(l.line>e.doc.first){var s=le(e.doc,l.line-1).text;s&&(l=new F(l.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),F(l.line-1,s.length-1),l,"+transpose"))}n.push(new De(l,l))}e.setSelections(n)})},newlineAndIndent:function(e){return $e(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);Ni(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function ha(e,t){var n=le(e.doc,t),i=Kr(n);return i!=n&&(t=p(i)),fi(!0,e,i,t,1)}function ms(e,t){var n=ha(e,t.line),i=le(e.doc,n.line),l=R(i,e.doc.direction);if(!l||0==l[0].level){var a=Math.max(n.ch,i.text.search(/\S/));return F(n.line,t.line==n.line&&t.ch<=a&&t.ch?0:a,n.sticky)}return n}function pl(e,t,n){if("string"==typeof t&&!(t=Do[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,l=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),l=t(e)!=Se}finally{e.display.shift=i,e.state.suppressEdits=!1}return l}var ys=new ae;function Gi(e,t,n,i){var l=e.state.keySeq;if(l){if(ua(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ys.set(50,function(){e.state.keySeq==l&&(e.state.keySeq=null,e.display.input.reset())}),xs(e,l+" "+t,n,i))return!0}return xs(e,t,n,i)}function xs(e,t,n,i){var l=function Ao(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var l=si(t,e.state.keyMaps[i],n,e);if(l)return l}return e.options.extraKeys&&si(t,e.options.extraKeys,n,e)||si(t,e.options.keyMap,n,e)}(e,t,i);return"multi"==l&&(e.state.keySeq=t),"handled"==l&&Ft(e,"keyHandled",e,t,n),("handled"==l||"multi"==l)&&(Ot(n),ho(e)),!!l}function vl(e,t){var n=ui(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?Gi(e,"Shift-"+n,t,function(i){return pl(e,i,!0)})||Gi(e,n,t,function(i){if("string"==typeof i?/^go[A-Z]/.test(i):i.motion)return pl(e,i)}):Gi(e,n,t,function(i){return pl(e,i)}))}var ca=null;function da(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=v(),Be(t,e)))){pe&&ke<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=vl(t,e);de&&(ca=i?n:null,!i&&88==n&&!Io&&(m?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),Te&&!m&&!i&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==n&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&function ws(e){var t=e.display.lineDiv;function n(i){(18==i.keyCode||!i.altKey)&&(K(t,"CodeMirror-crosshair"),We(document,"keyup",n),We(document,"mouseover",n))}ee(t,"CodeMirror-crosshair"),ie(document,"keyup",n),ie(document,"mouseover",n)}(t)}}function Cs(e){16==e.keyCode&&(this.doc.sel.shift=!1),Be(this,e)}function gl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||Pr(t.display,e)||Be(t,e)||e.ctrlKey&&!e.altKey||m&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(de&&n==ca)return ca=null,void Ot(e);if(!de||e.which&&!(e.which<10)||!vl(t,e)){var l=String.fromCharCode(i??n);"\b"!=l&&(function bs(e,t,n){return Gi(e,"'"+n+"'",t,function(i){return pl(e,i,!0)})}(t,e,l)||t.display.input.onKeyPress(e))}}}var Fo,Ui,hi=function(e,t,n){this.time=e,this.pos=t,this.button=n};function Ss(e){var t=this,n=t.display;if(!(Be(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,Pr(n,e))return void(qe||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!ga(t,e)){var i=At(t,e),l=hr(e),a=i?function eu(e,t){var n=+new Date;return Ui&&Ui.compare(n,e,t)?(Fo=Ui=null,"triple"):Fo&&Fo.compare(n,e,t)?(Ui=new hi(n,e,t),Fo=null,"double"):(Fo=new hi(n,e,t),Ui=null,"single")}(i,l):"single";window.focus(),1==l&&t.state.selectingText&&t.state.selectingText(e),(!i||!function tu(e,t,n,i,l){var a="Click";return"double"==i?a="Double"+a:"triple"==i&&(a="Triple"+a),Gi(e,To(a=(1==t?"Left":2==t?"Middle":"Right")+a,l),l,function(s){if("string"==typeof s&&(s=Do[s]),!s)return!1;var u=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),u=s(e,n)!=Se}finally{e.state.suppressEdits=!1}return u})}(t,l,i,a,e))&&(1==l?i?function ks(e,t,n,i){pe?setTimeout($(el,e),0):e.curOp.focus=v();var s,l=function ru(e,t,n){var i=e.getOption("configureMouse"),l=i?i(e,t,n):{};return null==l.unit&&(l.unit=(Nt?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==l.extend||e.doc.extend)&&(l.extend=e.doc.extend||n.shiftKey),null==l.addNew&&(l.addNew=m?n.metaKey:n.ctrlKey),null==l.moveOnDrag&&(l.moveOnDrag=!(m?n.altKey:n.ctrlKey)),l}(e,n,i),a=e.doc.sel;e.options.dragDrop&&Sl&&!e.isReadOnly()&&"single"==n&&(s=a.contains(t))>-1&&(Z((s=a.ranges[s]).from(),t)<0||t.xRel>0)&&(Z(s.to(),t)>0||t.xRel<0)?function nu(e,t,n,i){var l=e.display,a=!1,s=Oe(e,function(h){qe&&(l.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Dn(e)),We(l.wrapper.ownerDocument,"mouseup",s),We(l.wrapper.ownerDocument,"mousemove",u),We(l.scroller,"dragstart",f),We(l.scroller,"drop",s),a||(Ot(h),i.addNew||Wi(e.doc,n,null,null,i.extend),qe&&!Ye||pe&&9==ke?setTimeout(function(){l.wrapper.ownerDocument.body.focus({preventScroll:!0}),l.input.focus()},20):l.input.focus())}),u=function(h){a=a||Math.abs(t.clientX-h.clientX)+Math.abs(t.clientY-h.clientY)>=10},f=function(){return a=!0};qe&&(l.scroller.draggable=!0),e.state.draggingText=s,s.copy=!i.moveOnDrag,ie(l.wrapper.ownerDocument,"mouseup",s),ie(l.wrapper.ownerDocument,"mousemove",u),ie(l.scroller,"dragstart",f),ie(l.scroller,"drop",s),e.state.delayingBlurEvent=!0,setTimeout(function(){return l.input.focus()},20),l.scroller.dragDrop&&l.scroller.dragDrop()}(e,i,t,l):function Ts(e,t,n,i){pe&&Dn(e);var l=e.display,a=e.doc;Ot(t);var s,u,f=a.sel,h=f.ranges;if(i.addNew&&!i.extend?(u=a.sel.contains(n),s=u>-1?h[u]:new De(n,n)):(s=a.sel.primary(),u=a.sel.primIndex),"rectangle"==i.unit)i.addNew||(s=new De(n,n)),n=At(e,t,!0,!0),u=-1;else{var c=Ls(e,n,i.unit);s=i.extend?cl(s,c.anchor,c.head,i.extend):c}i.addNew?-1==u?(u=h.length,Gt(a,_t(e,h.concat([s]),u),{scroll:!1,origin:"*mouse"})):h.length>1&&h[u].empty()&&"char"==i.unit&&!i.extend?(Gt(a,_t(e,h.slice(0,u).concat(h.slice(u+1)),0),{scroll:!1,origin:"*mouse"}),f=a.sel):ea(a,u,s,Vt):(u=0,Gt(a,new xt([s],0),Vt),f=a.sel);var d=n;var y=l.wrapper.getBoundingClientRect(),w=0;function k(W){var I=++w,_=At(e,W,!0,"rectangle"==i.unit);if(_)if(0!=Z(_,d)){e.curOp.focus=v(),function g(W){if(0!=Z(d,W))if(d=W,"rectangle"==i.unit){for(var I=[],_=e.options.tabSize,q=A(le(a,n.line).text,n.ch,_),he=A(le(a,W.line).text,W.ch,_),me=Math.min(q,he),Xe=Math.max(q,he),Ne=Math.min(n.line,W.line),ze=Math.min(e.lastLine(),Math.max(n.line,W.line));Ne<=ze;Ne++){var et=le(a,Ne).text,Fe=bt(et,me,_);me==Xe?I.push(new De(F(Ne,Fe),F(Ne,Fe))):et.length>Fe&&I.push(new De(F(Ne,Fe),F(Ne,bt(et,Xe,_))))}I.length||I.push(new De(n,n)),Gt(a,_t(e,f.ranges.slice(0,u).concat(I),u),{origin:"*mouse",scroll:!1}),e.scrollIntoView(W)}else{var He,_e=s,Ee=Ls(e,W,i.unit),Le=_e.anchor;Z(Ee.anchor,Le)>0?(He=Ee.head,Le=ve(_e.from(),Ee.anchor)):(He=Ee.anchor,Le=er(_e.to(),Ee.head));var it=f.ranges.slice(0);it[u]=function pa(e,t){var n=t.anchor,i=t.head,l=le(e.doc,n.line);if(0==Z(n,i)&&n.sticky==i.sticky)return t;var a=R(l);if(!a)return t;var s=lt(a,n.ch,n.sticky),u=a[s];if(u.from!=n.ch&&u.to!=n.ch)return t;var h,f=s+(u.from==n.ch==(1!=u.level)?0:1);if(0==f||f==a.length)return t;if(i.line!=n.line)h=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var c=lt(a,i.ch,i.sticky),d=c-s||(i.ch-n.ch)*(1==u.level?-1:1);h=c==f-1||c==f?d<0:d>0}var g=a[f+(h?-1:0)],y=h==(1==g.level),w=y?g.from:g.to,k=y?"after":"before";return n.ch==w&&n.sticky==k?t:new De(new F(n.line,w,k),i)}(e,new De(ye(a,Le),He)),Gt(a,_t(e,it,u),Vt)}}(_);var q=tl(l,a);(_.line>=q.to||_.line<q.from)&&setTimeout(Oe(e,function(){w==I&&k(W)}),150)}else{var he=W.clientY<y.top?-20:W.clientY>y.bottom?20:0;he&&setTimeout(Oe(e,function(){w==I&&(l.scroller.scrollTop+=he,k(W))}),50)}}function M(W){e.state.selectingText=!1,w=1/0,W&&(Ot(W),l.input.focus()),We(l.wrapper.ownerDocument,"mousemove",D),We(l.wrapper.ownerDocument,"mouseup",E),a.history.lastSelOrigin=null}var D=Oe(e,function(W){0!==W.buttons&&hr(W)?k(W):M(W)}),E=Oe(e,M);e.state.selectingText=E,ie(l.wrapper.ownerDocument,"mousemove",D),ie(l.wrapper.ownerDocument,"mouseup",E)}(e,i,t,l)}(t,i,a,e):ji(e)==n.scroller&&Ot(e):2==l?(i&&Wi(t.doc,i),setTimeout(function(){return n.input.focus()},20)):3==l&&(ne?t.display.input.onContextMenu(e):Dn(t)))}}}function Ls(e,t,n){if("char"==n)return new De(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new De(F(t.line,0),ye(e.doc,F(t.line+1,0)));var i=n(e,t);return new De(i.from,i.to)}function va(e,t,n,i){var l,a;if(t.touches)l=t.touches[0].clientX,a=t.touches[0].clientY;else try{l=t.clientX,a=t.clientY}catch{return!1}if(l>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&Ot(t);var s=e.display,u=s.lineDiv.getBoundingClientRect();if(a>u.bottom||!nt(e,n))return qt(t);a-=u.top-s.viewOffset;for(var f=0;f<e.display.gutterSpecs.length;++f){var h=s.gutters.childNodes[f];if(h&&h.getBoundingClientRect().right>=l)return mt(e,n,e,b(e.doc,a),e.display.gutterSpecs[f].className,t),qt(t)}}function ga(e,t){return va(e,t,"gutterClick",!0)}function ma(e,t){Pr(e.display,t)||function Ki(e,t){return!!nt(e,"gutterContextMenu")&&va(e,t,"gutterContextMenu",!1)}(e,t)||Be(e,t,"contextmenu")||ne||e.display.input.onContextMenu(t)}function ya(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ti(e)}hi.prototype.compare=function(e,t,n){return this.time+400>e&&0==Z(t,this.pos)&&n==this.button};var pn={toString:function(){return"CodeMirror.Init"}},Ms={},ml={};function ct(e,t,n){if(!t!=!(n&&n!=pn)){var l=e.display.dragFunctions,a=t?ie:We;a(e.display.scroller,"dragstart",l.start),a(e.display.scroller,"dragenter",l.enter),a(e.display.scroller,"dragover",l.over),a(e.display.scroller,"dragleave",l.leave),a(e.display.scroller,"drop",l.drop)}}function ou(e){e.options.lineWrapping?(ee(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(K(e.display.wrapper,"CodeMirror-wrap"),Fl(e)),en(e),kt(e),Ti(e),setTimeout(function(){return Qn(e)},100)}function at(e,t){var n=this;if(!(this instanceof at))return new at(e,t);this.options=t=t?N(t):{},N(Ms,t,!1);var i=t.value;"string"==typeof i?i=new nr(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var l=new at.inputStyles[t.inputStyle](this),a=this.display=new rn(e,i,l,t);for(var s in a.wrapper.CodeMirror=this,ya(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),En(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ae,keySeq:null,specialChars:null},t.autofocus&&!ot&&a.input.focus(),pe&&ke<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function Eo(e){var t=e.display;ie(t.scroller,"mousedown",Oe(e,Ss)),ie(t.scroller,"dblclick",pe&&ke<11?Oe(e,function(f){if(!Be(e,f)){var h=At(e,f);if(h&&!ga(e,f)&&!Pr(e.display,f)){Ot(f);var c=e.findWordAt(h);Wi(e.doc,c.anchor,c.head)}}}):function(f){return Be(e,f)||Ot(f)}),ie(t.scroller,"contextmenu",function(f){return ma(e,f)}),ie(t.input.getField(),"contextmenu",function(f){t.scroller.contains(f.target)||ma(e,f)});var n,i={end:0};function l(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(i=t.activeTouch).end=+new Date)}function s(f,h){if(null==h.left)return!0;var c=h.left-f.left,d=h.top-f.top;return c*c+d*d>400}ie(t.scroller,"touchstart",function(f){if(!Be(e,f)&&!function a(f){if(1!=f.touches.length)return!1;var h=f.touches[0];return h.radiusX<=1&&h.radiusY<=1}(f)&&!ga(e,f)){t.input.ensurePolled(),clearTimeout(n);var h=+new Date;t.activeTouch={start:h,moved:!1,prev:h-i.end<=300?i:null},1==f.touches.length&&(t.activeTouch.left=f.touches[0].pageX,t.activeTouch.top=f.touches[0].pageY)}}),ie(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),ie(t.scroller,"touchend",function(f){var h=t.activeTouch;if(h&&!Pr(t,f)&&null!=h.left&&!h.moved&&new Date-h.start<300){var d,c=e.coordsChar(t.activeTouch,"page");d=!h.prev||s(h,h.prev)?new De(c,c):!h.prev.prev||s(h,h.prev.prev)?e.findWordAt(c):new De(F(c.line,0),ye(e.doc,F(c.line+1,0))),e.setSelection(d.anchor,d.head),e.focus(),Ot(f)}l()}),ie(t.scroller,"touchcancel",l),ie(t.scroller,"scroll",function(){t.scroller.clientHeight&&(zr(e,t.scroller.scrollTop),pr(e,t.scroller.scrollLeft,!0),mt(e,"scroll",e))}),ie(t.scroller,"mousewheel",function(f){return Ue(e,f)}),ie(t.scroller,"DOMMouseScroll",function(f){return Ue(e,f)}),ie(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(f){Be(e,f)||Yr(f)},over:function(f){Be(e,f)||(function cs(e,t){var n=At(e,t);if(n){var i=document.createDocumentFragment();Rl(e,n,i),e.display.dragCursor||(e.display.dragCursor=J("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),re(e.display.dragCursor,i)}}(e,f),Yr(f))},start:function(f){return function hs(e,t){if(pe&&(!e.state.draggingText||+new Date-fs<100))Yr(t);else if(!Be(e,t)&&!Pr(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!Ye)){var n=J("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",de&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),de&&n.parentNode.removeChild(n)}}(e,f)},drop:Oe(e,Vs),leave:function(f){Be(e,f)||sa(e)}};var u=t.input.getField();ie(u,"keyup",function(f){return Cs.call(e,f)}),ie(u,"keydown",Oe(e,da)),ie(u,"keypress",Oe(e,gl)),ie(u,"focus",function(f){return Ai(e,f)}),ie(u,"blur",function(f){return Yn(e,f)})}(this),function $s(){ps||(function Pn(){var e;ie(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,ds(ko)},100))}),ie(window,"blur",function(){return ds(Yn)})}(),ps=!0)}(),$n(this),this.curOp.forceUpdate=!0,ts(this,i),t.autofocus&&!ot||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&Ai(n)},20):Yn(this),ml)ml.hasOwnProperty(s)&&ml[s](this,t[s],pn);Xl(this),t.finishInit&&t.finishInit(this);for(var u=0;u<gr.length;++u)gr[u](this);ei(this),qe&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}at.defaults=Ms,at.optionHandlers=ml;var gr=[];function Rn(e,t,n,i){var a,l=e.doc;null==n&&(n="add"),"smart"==n&&(l.mode.indent?a=yi(e,t).state:n="prev");var s=e.options.tabSize,u=le(l,t),f=A(u.text,null,s);u.stateAfter&&(u.stateAfter=null);var c,h=u.text.match(/^\s*/)[0];if(i||/\S/.test(u.text)){if("smart"==n&&((c=l.mode.indent(a,u.text.slice(h.length),u.text))==Se||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>l.first?A(le(l,t-1).text,null,s):0:"add"==n?c=f+e.options.indentUnit:"subtract"==n?c=f-e.options.indentUnit:"number"==typeof n&&(c=f+n),c=Math.max(0,c);var d="",g=0;if(e.options.indentWithTabs)for(var y=Math.floor(c/s);y;--y)g+=s,d+="\t";if(g<c&&(d+=or(c-g)),d!=h)return li(l,d,F(t,0),F(t,h.length),"+input"),u.stateAfter=null,!0;for(var w=0;w<l.sel.ranges.length;w++){var k=l.sel.ranges[w];if(k.head.line==t&&k.head.ch<h.length){var M=F(t,h.length);ea(l,w,new De(M,M));break}}}at.defineInitHook=function(e){return gr.push(e)};var mr=null;function Oo(e){mr=e}function yl(e,t,n,i,l){var a=e.doc;e.display.shift=!1,i||(i=a.sel);var s=+new Date-200,u="paste"==l||e.state.pasteIncoming>s,f=xr(t),h=null;if(u&&i.ranges.length>1)if(mr&&mr.text.join("\n")==t){if(i.ranges.length%mr.text.length==0){h=[];for(var c=0;c<mr.text.length;c++)h.push(a.splitLines(mr.text[c]))}}else f.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(h=jt(f,function(D){return[D]}));for(var d=e.curOp.updateInput,g=i.ranges.length-1;g>=0;g--){var y=i.ranges[g],w=y.from(),k=y.to();y.empty()&&(n&&n>0?w=F(w.line,w.ch-n):e.state.overwrite&&!u?k=F(k.line,Math.min(le(a,k.line).text.length,k.ch+Me(f).length)):u&&mr&&mr.lineWise&&mr.text.join("\n")==f.join("\n")&&(w=k=F(w.line,0)));var M={from:w,to:k,text:h?h[g%h.length]:f,origin:l||(u?"paste":e.state.cutIncoming>s?"cut":"+input")};un(e.doc,M),Ft(e,"inputRead",e,M)}t&&!u&&xl(e,t),Ni(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function xa(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&$e(t,function(){return yl(t,n,0,null,"paste")}),!0}function xl(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var l=n.ranges[i];if(!(l.head.ch>100||i&&n.ranges[i-1].head.line==l.head.line)){var a=e.getModeAt(l.head),s=!1;if(a.electricChars){for(var u=0;u<a.electricChars.length;u++)if(t.indexOf(a.electricChars.charAt(u))>-1){s=Rn(e,l.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(le(e.doc,l.head.line).text.slice(0,l.head.ch))&&(s=Rn(e,l.head.line,"smart"));s&&Ft(e,"electricInput",e,l.head.line)}}}function ba(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var l=e.doc.sel.ranges[i].head.line,a={anchor:F(l,0),head:F(l+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function Ds(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function bl(){var e=J("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=J("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return qe?e.style.width="1000px":e.setAttribute("wrap","off"),tt&&(e.style.border="1px solid black"),Ds(e),t}function je(e,t,n,i,l){var a=t,s=n,u=le(e,t.line),f=l&&"rtl"==e.direction?-n:n;function c(E){var W;if("codepoint"==i){var I=u.text.charCodeAt(t.ch+(n>0?0:-1));W=isNaN(I)?null:new F(t.line,Math.max(0,Math.min(u.text.length,t.ch+n*((n>0?I>=55296&&I<56320:I>=56320&&I<57343)?2:1))),-n)}else W=l?function gs(e,t,n,i){var l=R(t,e.doc.direction);if(!l)return fa(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=lt(l,n.ch,n.sticky),s=l[a];if("ltr"==e.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return fa(t,n,i);var f,u=function(D,E){return Mo(t,D instanceof F?D.ch:D,E)},h=function(D){return e.options.lineWrapping?(f=f||Kn(e,t),qa(e,t,f,D)):{begin:0,end:t.text.length}},c=h("before"==n.sticky?u(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var d=1==s.level==i<0,g=u(n,d?1:-1);if(null!=g&&(d?g<=s.to&&g<=c.end:g>=s.from&&g>=c.begin))return new F(n.line,g,d?"before":"after")}var w=function(D,E,W){for(var I=function(me,Xe){return Xe?new F(n.line,u(me,1),"before"):new F(n.line,me,"after")};D>=0&&D<l.length;D+=E){var _=l[D],q=E>0==(1!=_.level),he=q?W.begin:u(W.end,-1);if(_.from<=he&&he<_.to||(he=q?_.from:u(_.to,-1),W.begin<=he&&he<W.end))return I(he,q)}},k=w(a+i,i,c);if(k)return k;var M=i>0?c.end:u(c.begin,-1);return null==M||i>0&&M==t.text.length||!(k=w(i>0?0:l.length-1,i,h(M)))?null:k}(e.cm,u,t,n):fa(u,t,n);if(null==W){if(E||!function h(){var E=t.line+f;return!(E<e.first||E>=e.first+e.size)&&(t=new F(E,t.ch,t.sticky),u=le(e,E))}())return!1;t=fi(l,e.cm,u,t.line,f)}else t=W;return!0}if("char"==i||"codepoint"==i)c();else if("column"==i)c(!0);else if("word"==i||"group"==i)for(var d=null,g="group"==i,y=e.cm&&e.cm.getHelper(t,"wordChars"),w=!0;!(n<0)||c(!w);w=!1){var k=u.text.charAt(t.ch)||"\n",M=z(k,y)?"w":g&&"\n"==k?"n":!g||/\s/.test(k)?null:"p";if(g&&!w&&!M&&(M="s"),d&&d!=M){n<0&&(n=1,c(),t.sticky="after");break}if(M&&(d=M),n>0&&!c(!w))break}var D=Co(e,t,a,s,!0);return Ie(a,D)&&(D.hitSide=!0),D}function wa(e,t,n,i){var s,h,l=e.doc,a=t.left;if("page"==i){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),f=Math.max(u-.5*kn(e.display),3);s=(n>0?t.bottom:t.top)+n*f}else"line"==i&&(s=n>0?t.bottom+3:t.top-3);for(;(h=Qo(e,a,s)).outside;){if(n<0?s<=0:s>=l.height){h.hitSide=!0;break}s+=5*n}return h}var Je=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ae,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function ci(e,t){var n=Cr(e,t.line);if(!n||n.hidden)return null;var i=le(e.doc,t.line),l=Wl(n,i,t.line),a=R(i,e.doc.direction),s="left";a&&(s=lt(a,t.ch)%2?"right":"left");var f=Ka(l.map,t.ch,s);return f.offset="right"==f.collapse?f.end:f.start,f}function vn(e,t){return t&&(e.bad=!0),e}function dt(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return vn(e.clipPos(F(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var l=0;l<e.display.view.length;l++){var a=e.display.view[l];if(a.node==i)return su(a,t,n)}}function su(e,t,n){var i=e.text.firstChild,l=!1;if(!t||!S(i,t))return vn(F(p(e.line),0),!0);if(t==i&&(l=!0,t=i.childNodes[n],n=0,!t)){var a=e.rest?Me(e.rest):e.line;return vn(F(p(a),a.text.length),l)}var s=3==t.nodeType?t:null,u=t;for(!s&&1==t.childNodes.length&&3==t.firstChild.nodeType&&(s=t.firstChild,n&&(n=s.nodeValue.length));u.parentNode!=i;)u=u.parentNode;var f=e.measure,h=f.maps;function c(M,D,E){for(var W=-1;W<(h?h.length:0);W++)for(var I=W<0?f.map:h[W],_=0;_<I.length;_+=3){var q=I[_+2];if(q==M||q==D){var he=p(W<0?e.line:e.rest[W]),me=I[_]+E;return(E<0||q!=M)&&(me=I[_+(E?1:0)]),F(he,me)}}}var d=c(s,u,n);if(d)return vn(d,l);for(var g=u.nextSibling,y=s?s.nodeValue.length-n:0;g;g=g.nextSibling){if(d=c(g,g.firstChild,0))return vn(F(d.line,d.ch-y),l);y+=g.textContent.length}for(var w=u.previousSibling,k=n;w;w=w.previousSibling){if(d=c(w,w.firstChild,-1))return vn(F(d.line,d.ch+k),l);k+=w.textContent.length}}Je.prototype.init=function(e){var t=this,n=this,i=n.cm,l=n.div=e.lineDiv;function a(u){for(var f=u.target;f;f=f.parentNode){if(f==l)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(f.className))break}return!1}function s(u){if(a(u)&&!Be(i,u)){if(i.somethingSelected())Oo({lineWise:!1,text:i.getSelections()}),"cut"==u.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var f=ba(i);Oo({lineWise:!0,text:f.text}),"cut"==u.type&&i.operation(function(){i.setSelections(f.ranges,0,yt),i.replaceSelection("",null,"cut")})}if(u.clipboardData){u.clipboardData.clearData();var h=mr.text.join("\n");if(u.clipboardData.setData("Text",h),u.clipboardData.getData("Text")==h)return void u.preventDefault()}var c=bl(),d=c.firstChild;i.display.lineSpace.insertBefore(c,i.display.lineSpace.firstChild),d.value=mr.text.join("\n");var g=v();G(d),setTimeout(function(){i.display.lineSpace.removeChild(c),g.focus(),g==l&&n.showPrimarySelection()},50)}}l.contentEditable=!0,Ds(l,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),ie(l,"paste",function(u){!a(u)||Be(i,u)||xa(u,i)||ke<=11&&setTimeout(Oe(i,function(){return t.updateFromDOM()}),20)}),ie(l,"compositionstart",function(u){t.composing={data:u.data,done:!1}}),ie(l,"compositionupdate",function(u){t.composing||(t.composing={data:u.data,done:!1})}),ie(l,"compositionend",function(u){t.composing&&(u.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),ie(l,"touchstart",function(){return n.forceCompositionEnd()}),ie(l,"input",function(){t.composing||t.readFromDOMSoon()}),ie(l,"copy",s),ie(l,"cut",s)},Je.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Je.prototype.prepareSelection=function(){var e=fo(this.cm,!1);return e.focus=v()==this.div,e},Je.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Je.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Je.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),i=n.from(),l=n.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||l.line<t.display.viewFrom)e.removeAllRanges();else{var a=dt(t,e.anchorNode,e.anchorOffset),s=dt(t,e.focusNode,e.focusOffset);if(!a||a.bad||!s||s.bad||0!=Z(ve(a,s),i)||0!=Z(er(a,s),l)){var u=t.display.view,f=i.line>=t.display.viewFrom&&ci(t,i)||{node:u[0].measure.map[2],offset:0},h=l.line<t.display.viewTo&&ci(t,l);if(!h){var c=u[u.length-1].measure,d=c.maps?c.maps[c.maps.length-1]:c.map;h={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(!f||!h)return void e.removeAllRanges();var y,g=e.rangeCount&&e.getRangeAt(0);try{y=vt(f.node,f.offset,h.offset,h.node)}catch{}y&&(!Te&&t.state.focused?(e.collapse(f.node,f.offset),y.collapsed||(e.removeAllRanges(),e.addRange(y))):(e.removeAllRanges(),e.addRange(y)),g&&null==e.anchorNode?e.addRange(g):Te&&this.startGracePeriod()),this.rememberSelection()}}},Je.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Je.prototype.showMultipleSelections=function(e){re(this.cm.display.cursorDiv,e.cursors),re(this.cm.display.selectionDiv,e.selection)},Je.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Je.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return S(this.div,t)},Je.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||v()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Je.prototype.blur=function(){this.div.blur()},Je.prototype.getField=function(){return this.div},Je.prototype.supportsTouch=function(){return!0},Je.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):$e(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))})},Je.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Je.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(Kt&&ut&&this.cm.display.gutterSpecs.length&&function lu(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=dt(t,e.anchorNode,e.anchorOffset),i=dt(t,e.focusNode,e.focusOffset);n&&i&&$e(t,function(){Gt(t.doc,on(n,i),yt),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}}},Je.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a,s,u,e=this.cm,t=e.display,n=e.doc.sel.primary(),i=n.from(),l=n.to();if(0==i.ch&&i.line>e.firstLine()&&(i=F(i.line-1,le(e.doc,i.line-1).length)),l.ch==le(e.doc,l.line).text.length&&l.line<e.lastLine()&&(l=F(l.line+1,0)),i.line<t.viewFrom||l.line>t.viewTo-1)return!1;i.line==t.viewFrom||0==(a=sr(e,i.line))?(s=p(t.view[0].line),u=t.view[0].node):(s=p(t.view[a].line),u=t.view[a-1].node.nextSibling);var h,c,f=sr(e,l.line);if(f==t.view.length-1?(h=t.viewTo-1,c=t.lineDiv.lastChild):(h=p(t.view[f+1].line)-1,c=t.view[f+1].node.previousSibling),!u)return!1;for(var d=e.doc.splitLines(function au(e,t,n,i,l){var a="",s=!1,u=e.doc.lineSeparator(),f=!1;function c(){s&&(a+=u,f&&(a+=u),s=f=!1)}function d(y){y&&(c(),a+=y)}function g(y){if(1==y.nodeType){var w=y.getAttribute("cm-text");if(w)return void d(w);var M,k=y.getAttribute("cm-marker");if(k){var D=e.findMarks(F(i,0),F(l+1,0),function h(y){return function(w){return w.id==y}}(+k));return void(D.length&&(M=D[0].find(0))&&d(zt(e.doc,M.from,M.to).join(u)))}if("false"==y.getAttribute("contenteditable"))return;var E=/^(pre|div|p|li|table|br)$/i.test(y.nodeName);if(!/^br$/i.test(y.nodeName)&&0==y.textContent.length)return;E&&c();for(var W=0;W<y.childNodes.length;W++)g(y.childNodes[W]);/^(pre|p)$/i.test(y.nodeName)&&(f=!0),E&&(s=!0)}else 3==y.nodeType&&d(y.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;g(t),t!=n;)t=t.nextSibling,f=!1;return a}(e,u,c,s,h)),g=zt(e.doc,F(s,0),F(h,le(e.doc,h).text.length));d.length>1&&g.length>1;)if(Me(d)==Me(g))d.pop(),g.pop(),h--;else{if(d[0]!=g[0])break;d.shift(),g.shift(),s++}for(var y=0,w=0,k=d[0],M=g[0],D=Math.min(k.length,M.length);y<D&&k.charCodeAt(y)==M.charCodeAt(y);)++y;for(var E=Me(d),W=Me(g),I=Math.min(E.length-(1==d.length?y:0),W.length-(1==g.length?y:0));w<I&&E.charCodeAt(E.length-w-1)==W.charCodeAt(W.length-w-1);)++w;if(1==d.length&&1==g.length&&s==i.line)for(;y&&y>i.ch&&E.charCodeAt(E.length-w-1)==W.charCodeAt(W.length-w-1);)y--,w++;d[d.length-1]=E.slice(0,E.length-w).replace(/^\u200b+/,""),d[0]=d[0].slice(y).replace(/\u200b+$/,"");var _=F(s,y),q=F(h,g.length?Me(g).length-w:0);return d.length>1||d[0]||Z(_,q)?(li(e.doc,d,_,q,"+input"),!0):void 0},Je.prototype.ensurePolled=function(){this.forceCompositionEnd()},Je.prototype.reset=function(){this.forceCompositionEnd()},Je.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Je.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Je.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&$e(this.cm,function(){return kt(e.cm)})},Je.prototype.setUneditable=function(e){e.contentEditable="false"},Je.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Oe(this.cm,yl)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Je.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Je.prototype.onContextMenu=function(){},Je.prototype.resetPosition=function(){},Je.prototype.needsContentAttribute=!0;var Lt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new ae,this.hasSelection=!1,this.composing=null};Lt.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var l=this.textarea;function a(s){if(!Be(i,s)){if(i.somethingSelected())Oo({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var u=ba(i);Oo({lineWise:!0,text:u.text}),"cut"==s.type?i.setSelections(u.ranges,null,yt):(n.prevInput="",l.value=u.text.join("\n"),G(l))}"cut"==s.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),tt&&(l.style.width="0px"),ie(l,"input",function(){pe&&ke>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),ie(l,"paste",function(s){Be(i,s)||xa(s,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())}),ie(l,"cut",a),ie(l,"copy",a),ie(e.scroller,"paste",function(s){if(!Pr(e,s)&&!Be(i,s)){if(!l.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var u=new Event("paste");u.clipboardData=s.clipboardData,l.dispatchEvent(u)}}),ie(e.lineSpace,"selectstart",function(s){Pr(e,s)||Ot(s)}),ie(l,"compositionstart",function(){var s=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:s,range:i.markText(s,i.getCursor("to"),{className:"CodeMirror-composing"})}}),ie(l,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Lt.prototype.createField=function(e){this.wrapper=bl(),this.textarea=this.wrapper.firstChild},Lt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Lt.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=fo(e);if(e.options.moveInputWithCursor){var l=dr(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,l.top+s.top-a.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,l.left+s.left-a.left))}return i},Lt.prototype.showSelection=function(e){var n=this.cm.display;re(n.cursorDiv,e.cursors),re(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Lt.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&G(this.textarea),pe&&ke>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",pe&&ke>=9&&(this.hasSelection=null))}},Lt.prototype.getField=function(){return this.textarea},Lt.prototype.supportsTouch=function(){return!1},Lt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!ot||v()!=this.textarea))try{this.textarea.focus()}catch{}},Lt.prototype.blur=function(){this.textarea.blur()},Lt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Lt.prototype.receivedFocus=function(){this.slowPoll()},Lt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Lt.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Lt.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ur(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var l=n.value;if(l==i&&!t.somethingSelected())return!1;if(pe&&ke>=9&&this.hasSelection===l||m&&/[\uf700-\uf7ff]/.test(l))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=l.charCodeAt(0);if(8203==a&&!i&&(i="\u200b"),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var s=0,u=Math.min(i.length,l.length);s<u&&i.charCodeAt(s)==l.charCodeAt(s);)++s;return $e(t,function(){yl(t,l.slice(s),i.length-s,null,e.composing?"*compose":null),l.length>1e3||l.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=l,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Lt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Lt.prototype.onKeyPress=function(){pe&&ke>=9&&(this.hasSelection=null),this.fastPoll()},Lt.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,l=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=At(n,e),s=i.scroller.scrollTop;if(a&&!de){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(a)&&Oe(n,Gt)(n.doc,on(a),yt);var d,f=l.style.cssText,h=t.wrapper.style.cssText,c=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",l.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-c.top-5)+"px; left: "+(e.clientX-c.left-5)+"px;\n      z-index: 1000; background: "+(pe?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",qe&&(d=window.scrollY),i.input.focus(),qe&&window.scrollTo(null,d),i.input.reset(),n.somethingSelected()||(l.value=t.prevInput=" "),t.contextMenuPending=y,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),pe&&ke>=9&&g(),ne){Yr(e);var w=function(){We(window,"mouseup",w),setTimeout(y,20)};ie(window,"mouseup",w)}else setTimeout(y,50)}function g(){if(null!=l.selectionStart){var k=n.somethingSelected(),M="\u200b"+(k?l.value:"");l.value="\u21da",l.value=M,t.prevInput=k?"":"\u200b",l.selectionStart=1,l.selectionEnd=M.length,i.selForContextMenu=n.doc.sel}}function y(){if(t.contextMenuPending==y&&(t.contextMenuPending=!1,t.wrapper.style.cssText=h,l.style.cssText=f,pe&&ke<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=s),null!=l.selectionStart)){(!pe||pe&&ke<9)&&g();var k=0,M=function(){i.selForContextMenu==n.doc.sel&&0==l.selectionStart&&l.selectionEnd>0&&"\u200b"==t.prevInput?Oe(n,oi)(n):k++<10?i.detectingSelectAll=setTimeout(M,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(M,200)}}},Lt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},Lt.prototype.setUneditable=function(){},Lt.prototype.needsContentAttribute=!1,function iu(e){var t=e.optionHandlers;function n(i,l,a,s){e.defaults[i]=l,a&&(t[i]=s?function(u,f,h){h!=pn&&a(u,f,h)}:a)}e.defineOption=n,e.Init=pn,n("value","",function(i,l){return i.setValue(l)},!0),n("mode",null,function(i,l){i.doc.modeOption=l,al(i)},!0),n("indentUnit",2,al,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(i){ri(i),Ti(i),kt(i)},!0),n("lineSeparator",null,function(i,l){if(i.doc.lineSep=l,l){var a=[],s=i.doc.first;i.doc.iter(function(f){for(var h=0;;){var c=f.text.indexOf(l,h);if(-1==c)break;h=c+l.length,a.push(F(s,c))}s++});for(var u=a.length-1;u>=0;u--)li(i.doc,l,a[u],F(a[u].line,a[u].ch+l.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(i,l,a){i.state.specialChars=new RegExp(l.source+(l.test("\t")?"":"|\t"),"g"),a!=pn&&i.refresh()}),n("specialCharPlaceholder",Ws,function(i){return i.refresh()},!0),n("electricChars",!0),n("inputStyle",ot?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(i,l){return i.getInputField().spellcheck=l},!0),n("autocorrect",!1,function(i,l){return i.getInputField().autocorrect=l},!0),n("autocapitalize",!1,function(i,l){return i.getInputField().autocapitalize=l},!0),n("rtlMoveVisually",!V),n("wholeLineUpdateBefore",!0),n("theme","default",function(i){ya(i),Wn(i)},!0),n("keyMap","default",function(i,l,a){var s=_i(l),u=a!=pn&&_i(a);u&&u.detach&&u.detach(i,s),s.attach&&s.attach(i,u||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,ou,!0),n("gutters",[],function(i,l){i.display.gutterSpecs=ti(l,i.options.lineNumbers),Wn(i)},!0),n("fixedGutter",!0,function(i,l){i.display.gutters.style.left=l?ao(i.display)+"px":"0",i.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(i){return Qn(i)},!0),n("scrollbarStyle","native",function(i){En(i),Qn(i),i.display.scrollbars.setScrollTop(i.doc.scrollTop),i.display.scrollbars.setScrollLeft(i.doc.scrollLeft)},!0),n("lineNumbers",!1,function(i,l){i.display.gutterSpecs=ti(i.options.gutters,l),Wn(i)},!0),n("firstLineNumber",1,Wn,!0),n("lineNumberFormatter",function(i){return i},Wn,!0),n("showCursorWhenSelecting",!1,qn,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(i,l){"nocursor"==l&&(Yn(i),i.display.input.blur()),i.display.input.readOnlyChanged(l)}),n("screenReaderLabel",null,function(i,l){i.display.input.screenReaderLabelChanged(l=""===l?null:l)}),n("disableInput",!1,function(i,l){l||i.display.input.reset()},!0),n("dragDrop",!0,ct),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,qn,!0),n("singleCursorHeightPerLine",!0,qn,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,ri,!0),n("addModeClass",!1,ri,!0),n("pollInterval",100),n("undoDepth",200,function(i,l){return i.doc.history.undoDepth=l}),n("historyEventDelay",1250),n("viewportMargin",10,function(i){return i.refresh()},!0),n("maxHighlightLength",1e4,ri,!0),n("moveInputWithCursor",!0,function(i,l){l||i.display.input.resetPosition()}),n("tabindex",null,function(i,l){return i.display.input.getField().tabIndex=l||""}),n("autofocus",null),n("direction","ltr",function(i,l){return i.doc.setDirection(l)},!0),n("phrases",null)}(at),function As(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(i,l){var a=this.options,s=a[i];a[i]==l&&"mode"!=i||(a[i]=l,t.hasOwnProperty(i)&&Oe(this,t[i])(this,l,s),mt(this,"optionChange",this,i))},getOption:function(i){return this.options[i]},getDoc:function(){return this.doc},addKeyMap:function(i,l){this.state.keyMaps[l?"push":"unshift"](_i(i))},removeKeyMap:function(i){for(var l=this.state.keyMaps,a=0;a<l.length;++a)if(l[a]==i||l[a].name==i)return l.splice(a,1),!0},addOverlay:Et(function(i,l){var a=i.token?i:e.getMode(this.options,i);if(a.startState)throw new Error("Overlays may not be stateful.");(function fr(e,t,n){for(var i=0,l=n(t);i<e.length&&n(e[i])<=l;)i++;e.splice(i,0,t)})(this.state.overlays,{mode:a,modeSpec:i,opaque:l&&l.opaque,priority:l&&l.priority||0},function(s){return s.priority}),this.state.modeGen++,kt(this)}),removeOverlay:Et(function(i){for(var l=this.state.overlays,a=0;a<l.length;++a){var s=l[a].modeSpec;if(s==i||"string"==typeof i&&s.name==i)return l.splice(a,1),this.state.modeGen++,void kt(this)}}),indentLine:Et(function(i,l,a){"string"!=typeof l&&"number"!=typeof l&&(l=null==l?this.options.smartIndent?"smart":"prev":l?"add":"subtract"),C(this.doc,i)&&Rn(this,i,l,a)}),indentSelection:Et(function(i){for(var l=this.doc.sel.ranges,a=-1,s=0;s<l.length;s++){var u=l[s];if(u.empty())u.head.line>a&&(Rn(this,u.head.line,i,!0),a=u.head.line,s==this.doc.sel.primIndex&&Ni(this));else{var f=u.from(),h=u.to(),c=Math.max(a,f.line);a=Math.min(this.lastLine(),h.line-(h.ch?0:1))+1;for(var d=c;d<a;++d)Rn(this,d,i);var g=this.doc.sel.ranges;0==f.ch&&l.length==g.length&&g[s].from().ch>0&&ea(this.doc,s,new De(f,g[s].to()),yt)}}}),getTokenAt:function(i,l){return Tl(this,i,l)},getLineTokens:function(i,l){return Tl(this,F(i),l,!0)},getTokenTypeAt:function(i){i=ye(this.doc,i);var f,l=Po(this,le(this.doc,i.line)),a=0,s=(l.length-1)/2,u=i.ch;if(0==u)f=l[2];else for(;;){var h=a+s>>1;if((h?l[2*h-1]:0)>=u)s=h;else{if(!(l[2*h+1]<u)){f=l[2*h+2];break}a=h+1}}var c=f?f.indexOf("overlay "):-1;return c<0?f:0==c?null:f.slice(0,c-1)},getModeAt:function(i){var l=this.doc.mode;return l.innerMode?e.innerMode(l,this.getTokenAt(i).state).mode:l},getHelper:function(i,l){return this.getHelpers(i,l)[0]},getHelpers:function(i,l){var a=[];if(!n.hasOwnProperty(l))return a;var s=n[l],u=this.getModeAt(i);if("string"==typeof u[l])s[u[l]]&&a.push(s[u[l]]);else if(u[l])for(var f=0;f<u[l].length;f++){var h=s[u[l][f]];h&&a.push(h)}else u.helperType&&s[u.helperType]?a.push(s[u.helperType]):s[u.name]&&a.push(s[u.name]);for(var c=0;c<s._global.length;c++){var d=s._global[c];d.pred(u,this)&&-1==B(a,d.val)&&a.push(d.val)}return a},getStateAfter:function(i,l){var a=this.doc;return yi(this,(i=Ca(a,i??a.first+a.size-1))+1,l).state},cursorCoords:function(i,l){var s=this.doc.sel.primary();return dr(this,null==i?s.head:"object"==typeof i?ye(this.doc,i):i?s.from():s.to(),l||"page")},charCoords:function(i,l){return lo(this,ye(this.doc,i),l||"page")},coordsChar:function(i,l){return Qo(this,(i=Sr(this,i,l||"page")).left,i.top)},lineAtHeight:function(i,l){return i=Sr(this,{top:i,left:0},l||"page").top,b(this.doc,i+this.display.viewOffset)},heightAtLine:function(i,l,a){var u,s=!1;if("number"==typeof i){var f=this.doc.first+this.doc.size-1;i<this.doc.first?i=this.doc.first:i>f&&(i=f,s=!0),u=le(this.doc,i)}else u=i;return jn(this,u,{top:0,left:0},l||"page",a||s).top+(s?this.doc.height-Hr(u):0)},defaultTextHeight:function(){return kn(this.display)},defaultCharWidth:function(){return Ln(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(i,l,a,s,u){var f=this.display,h=(i=dr(this,ye(this.doc,i))).bottom,c=i.left;if(l.style.position="absolute",l.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(l),f.sizer.appendChild(l),"over"==s)h=i.top;else if("above"==s||"near"==s){var d=Math.max(f.wrapper.clientHeight,this.doc.height),g=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==s||i.bottom+l.offsetHeight>d)&&i.top>l.offsetHeight?h=i.top-l.offsetHeight:i.bottom+l.offsetHeight<=d&&(h=i.bottom),c+l.offsetWidth>g&&(c=g-l.offsetWidth)}l.style.top=h+"px",l.style.left=l.style.right="","right"==u?(c=f.sizer.clientWidth-l.offsetWidth,l.style.right="0px"):("left"==u?c=0:"middle"==u&&(c=(f.sizer.clientWidth-l.offsetWidth)/2),l.style.left=c+"px"),a&&function _l(e,t){var n=An(e,t);null!=n.scrollTop&&zr(e,n.scrollTop),null!=n.scrollLeft&&pr(e,n.scrollLeft)}(this,{left:c,top:h,right:c+l.offsetWidth,bottom:h+l.offsetHeight})},triggerOnKeyDown:Et(da),triggerOnKeyPress:Et(gl),triggerOnKeyUp:Cs,triggerOnMouseDown:Et(Ss),execCommand:function(i){if(Do.hasOwnProperty(i))return Do[i].call(null,this)},triggerElectric:Et(function(i){xl(this,i)}),findPosH:function(i,l,a,s){var u=1;l<0&&(u=-1,l=-l);for(var f=ye(this.doc,i),h=0;h<l&&!(f=je(this.doc,f,u,a,s)).hitSide;++h);return f},moveH:Et(function(i,l){var a=this;this.extendSelectionsBy(function(s){return a.display.shift||a.doc.extend||s.empty()?je(a.doc,s.head,i,l,a.options.rtlMoveVisually):i<0?s.from():s.to()},gt)}),deleteH:Et(function(i,l){var s=this.doc;this.doc.sel.somethingSelected()?s.replaceSelection("",null,"+delete"):Bn(this,function(u){var f=je(s,u.head,i,l,!1);return i<0?{from:f,to:u.head}:{from:u.head,to:f}})}),findPosV:function(i,l,a,s){var u=1,f=s;l<0&&(u=-1,l=-l);for(var h=ye(this.doc,i),c=0;c<l;++c){var d=dr(this,h,"div");if(null==f?f=d.left:d.left=f,(h=wa(this,d,u,a)).hitSide)break}return h},moveV:Et(function(i,l){var a=this,s=this.doc,u=[],f=!this.display.shift&&!s.extend&&s.sel.somethingSelected();if(s.extendSelectionsBy(function(c){if(f)return i<0?c.from():c.to();var d=dr(a,c.head,"div");null!=c.goalColumn&&(d.left=c.goalColumn),u.push(d.left);var g=wa(a,d,i,l);return"page"==l&&c==s.sel.primary()&&Jn(a,lo(a,g,"div").top-d.top),g},gt),u.length)for(var h=0;h<s.sel.ranges.length;h++)s.sel.ranges[h].goalColumn=u[h]}),findWordAt:function(i){var a=le(this.doc,i.line).text,s=i.ch,u=i.ch;if(a){var f=this.getHelper(i,"wordChars");"before"!=i.sticky&&u!=a.length||!s?++u:--s;for(var h=a.charAt(s),c=z(h,f)?function(d){return z(d,f)}:/\s/.test(h)?function(d){return/\s/.test(d)}:function(d){return!/\s/.test(d)&&!z(d)};s>0&&c(a.charAt(s-1));)--s;for(;u<a.length&&c(a.charAt(u));)++u}return new De(F(i.line,s),F(i.line,u))},toggleOverwrite:function(i){null!=i&&i==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ee(this.display.cursorDiv,"CodeMirror-overwrite"):K(this.display.cursorDiv,"CodeMirror-overwrite"),mt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==v()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Et(function(i,l){Nn(this,i,l)}),getScrollInfo:function(){var i=this.display.scroller;return{left:i.scrollLeft,top:i.scrollTop,height:i.scrollHeight-wr(this)-this.display.barHeight,width:i.scrollWidth-wr(this)-this.display.barWidth,clientHeight:Xo(this),clientWidth:Gn(this)}},scrollIntoView:Et(function(i,l){null==i?(i={from:this.doc.sel.primary().head,to:null},null==l&&(l=this.options.cursorScrollMargin)):"number"==typeof i?i={from:F(i,0),to:null}:null==i.from&&(i={from:i,to:null}),i.to||(i.to=i.from),i.margin=l||0,null!=i.from.line?function Ja(e,t){Fn(e),e.curOp.scrollToPos=t}(this,i):Gl(this,i.from,i.to,i.margin)}),setSize:Et(function(i,l){var a=this,s=function(f){return"number"==typeof f||/^\d+$/.test(String(f))?f+"px":f};null!=i&&(this.display.wrapper.style.width=s(i)),null!=l&&(this.display.wrapper.style.height=s(l)),this.options.lineWrapping&&Hl(this);var u=this.display.viewFrom;this.doc.iter(u,this.display.viewTo,function(f){if(f.widgets)for(var h=0;h<f.widgets.length;h++)if(f.widgets[h].noHScroll){Rr(a,u,"widget");break}++u}),this.curOp.forceUpdate=!0,mt(this,"refresh",this)}),operation:function(i){return $e(this,i)},startOperation:function(){return $n(this)},endOperation:function(){return ei(this)},refresh:Et(function(){var i=this.display.cachedTextHeight;kt(this),this.curOp.forceUpdate=!0,Ti(this),Nn(this,this.doc.scrollLeft,this.doc.scrollTop),nl(this.display),(null==i||Math.abs(i-kn(this.display))>.5||this.options.lineWrapping)&&en(this),mt(this,"refresh",this)}),swapDoc:Et(function(i){var l=this.doc;return l.cm=null,this.state.selectingText&&this.state.selectingText(),ts(this,i),Ti(this),this.display.input.reset(),Nn(this,i.scrollLeft,i.scrollTop),this.curOp.forceScroll=!0,Ft(this,"swapDoc",this,l),l}),phrase:function(i){var l=this.options.phrases;return l&&Object.prototype.hasOwnProperty.call(l,i)?l[i]:i},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},yr(e),e.registerHelper=function(i,l,a){n.hasOwnProperty(i)||(n[i]=e[i]={_global:[]}),n[i][l]=a},e.registerGlobalHelper=function(i,l,a,s){e.registerHelper(i,l,s),n[i]._global.push({pred:a,val:s})}}(at);var r="iter insert remove copy getEditor constructor".split(" ");for(var o in nr.prototype)nr.prototype.hasOwnProperty(o)&&B(r,o)<0&&(at.prototype[o]=function(e){return function(){return e.apply(this.doc,arguments)}}(nr.prototype[o]));return yr(nr),at.inputStyles={textarea:Lt,contenteditable:Je},at.defineMode=function(e){!at.defaults.mode&&"null"!=e&&(at.defaults.mode=e),lr.apply(this,arguments)},at.defineMIME=function Zr(e,t){Nr[e]=t},at.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),at.defineMIME("text/plain","null"),at.defineExtension=function(e,t){at.prototype[e]=t},at.defineDocExtension=function(e,t){nr.prototype[e]=t},at.fromTextArea=function uu(e,t){if((t=t?N(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=v();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=u.getValue()}var l;if(e.form&&(ie(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var a=e.form;l=a.submit;try{var s=a.submit=function(){i(),a.submit=l,a.submit(),a.submit=s}}catch{}}t.finishInit=function(f){f.save=i,f.getTextArea=function(){return e},f.toTextArea=function(){f.toTextArea=isNaN,i(),e.parentNode.removeChild(f.getWrapperElement()),e.style.display="",e.form&&(We(e.form,"submit",i),!t.leaveSubmitMethodAlone&&"function"==typeof e.form.submit&&(e.form.submit=l))}},e.style.display="none";var u=at(function(f){return e.parentNode.insertBefore(f,e.nextSibling)},t);return u},function wl(e){e.off=We,e.on=ie,e.wheelEventPixels=vr,e.Doc=nr,e.splitLines=xr,e.countColumn=A,e.findColumn=bt,e.isWordChar=L,e.Pass=Se,e.signal=mt,e.Line=wi,e.changeEnd=Xr,e.scrollbarModel=Qa,e.Pos=F,e.cmpPos=Z,e.modes=vi,e.mimeModes=Nr,e.resolveMode=Fr,e.getMode=gi,e.modeExtensions=ar,e.extendMode=wn,e.copyState=Er,e.startState=oe,e.innerMode=ht,e.commands=Do,e.keyMap=dn,e.keyName=ui,e.isModifierKey=ua,e.lookupKey=si,e.normalizeKeyMap=vs,e.StringStream=Ve,e.SharedTextMarker=Ri,e.TextMarker=Tr,e.LineWidget=So,e.e_preventDefault=Ot,e.e_stopPropagation=Gr,e.e_stop=Yr,e.addClass=ee,e.contains=S,e.rmClass=K,e.keyNames=_r}(at),at.version="5.65.0",at},"object"==typeof te&&typeof ue<"u"?ue.exports=P():void 0!==(Ke="function"==typeof(Q=P)?Q.call(te,ge,te,ue):Q)&&(ue.exports=Ke)},{}]},{},[1])},7380:(di,pt,ge)=>{"use strict";ge.r(pt),ge.d(pt,{Web3SandboxModule:()=>mn});var Q=ge(2200),Ke=ge(9417),U=ge(8132),ue=ge(7916),te=ge(5596),j=ge(3746),P=ge(8834),Te=ge(5416),ce=ge(467),Ge=ge(3246),Ce=ge(6123),pe=ge(4173),ke=ge(4048),qe=ge(7358),ft=ge(9293),ut=ge(4194),de=ge(4219);let Jt=0;const Qt=function(){var Y=(0,ce.A)(function*({version:Ae,contractBody:L,options:z}){const X=new Worker(URL.createObjectURL(new Blob([`(${de.V})()`],{type:"module"}))),we=((Y,Ae)=>{const L={language:"Solidity",sources:{Compiled_Contracts:{content:Y}},settings:{...Ae,outputSelection:{"*":{"*":["*"]}}}};return JSON.stringify(L)})(L,z),fe=Jt++;return new Promise(($t,wt)=>{const Ct=({data:lt})=>{const{id:Rt,result:R}=lt;Rt===fe&&(X.removeEventListener("message",Ct),X.removeEventListener("error",Bt),X.terminate(),$t(R))},Bt=lt=>{X.removeEventListener("message",Ct),X.removeEventListener("error",Bt),X.terminate(),wt(lt)};X.addEventListener("message",Ct),X.addEventListener("error",Bt),X.postMessage({id:fe,input:we,version:Ae})})});return function(L){return Y.apply(this,arguments)}}();var Kt=ge(1228),ot=ge(3955),m=ge(3664),Nt=ge(7705),V=ge(2615);const Ze=["ref"];function T(Y){return Y&&Y.replace(/\r\n|\r/g,"\n")}let ne=(()=>{class Y{constructor(L,z){this._differs=L,this._ngZone=z,this.className="",this.name="codemirror",this.autoFocus=!1,this.preserveScrollPosition=!1,this.cursorActivity=new m.bkB,this.focusChange=new m.bkB,this.scroll=new m.bkB,this.drop=new m.bkB,this.codeMirrorLoaded=new m.bkB,this.value="",this.disabled=!1,this.isFocused=!1,this.onChange=X=>{},this.onTouched=()=>{}}set options(L){this._options=L,!this._differ&&L&&(this._differ=this._differs.find(L).create())}get codeMirrorGlobal(){return this._codeMirror||(this._codeMirror=typeof CodeMirror<"u"?CodeMirror:Promise.resolve().then(ge.t.bind(ge,1382,19))),this._codeMirror}ngAfterViewInit(){var L=this;this._ngZone.runOutsideAngular((0,ce.A)(function*(){const z=yield L.codeMirrorGlobal;L.codeMirror=(z?.default?z.default:z).fromTextArea(L.ref.nativeElement,L._options),L.codeMirror.on("cursorActivity",we=>L._ngZone.run(()=>L.cursorActive(we))),L.codeMirror.on("scroll",L.scrollChanged.bind(L)),L.codeMirror.on("blur",()=>L._ngZone.run(()=>L.focusChanged(!1))),L.codeMirror.on("focus",()=>L._ngZone.run(()=>L.focusChanged(!0))),L.codeMirror.on("change",(we,fe)=>L._ngZone.run(()=>L.codemirrorValueChanged(we,fe))),L.codeMirror.on("drop",(we,fe)=>{L._ngZone.run(()=>L.dropFiles(we,fe))}),L.codeMirror.setValue(L.value),L.codeMirrorLoaded.emit(L)}))}ngDoCheck(){if(!this._differ)return;const L=this._differ.diff(this._options);L&&(L.forEachChangedItem(z=>this.setOptionIfChanged(z.key,z.currentValue)),L.forEachAddedItem(z=>this.setOptionIfChanged(z.key,z.currentValue)),L.forEachRemovedItem(z=>this.setOptionIfChanged(z.key,z.currentValue)))}ngOnDestroy(){this.codeMirror&&this.codeMirror.toTextArea()}codemirrorValueChanged(L,z){const X=L.getValue();this.value!==X&&(this.value=X,this.onChange(this.value))}setOptionIfChanged(L,z){this.codeMirror&&this.codeMirror.setOption(L,z)}focusChanged(L){this.onTouched(),this.isFocused=L,this.focusChange.emit(L)}scrollChanged(L){this.scroll.emit(L.getScrollInfo())}cursorActive(L){this.cursorActivity.emit(L)}dropFiles(L,z){this.drop.emit([L,z])}writeValue(L){if(null==L)return;if(!this.codeMirror)return void(this.value=L);const z=this.codeMirror.getValue();if(L!==z&&T(z)!==T(L))if(this.value=L,this.preserveScrollPosition){const X=this.codeMirror.getScrollInfo();this.codeMirror.setValue(this.value),this.codeMirror.scrollTo(X.left,X.top)}else this.codeMirror.setValue(this.value)}registerOnChange(L){this.onChange=L}registerOnTouched(L){this.onTouched=L}setDisabledState(L){this.disabled=L,this.setOptionIfChanged("readOnly",this.disabled)}}return Y.\u0275fac=function(L){return new(L||Y)(m.rXU(Nt.MKu),m.rXU(m.SKi))},Y.\u0275cmp=m.VBU({type:Y,selectors:[["ngx-codemirror"]],viewQuery:function(L,z){if(1&L&&m.GBs(Ze,5),2&L){let X;m.mGM(X=m.lsd())&&(z.ref=X.first)}},inputs:{className:"className",name:"name",autoFocus:"autoFocus",options:"options",preserveScrollPosition:"preserveScrollPosition"},outputs:{cursorActivity:"cursorActivity",focusChange:"focusChange",scroll:"scroll",drop:"drop",codeMirrorLoaded:"codeMirrorLoaded"},standalone:!1,features:[m.Jv_([{provide:Ke.kq,useExisting:(0,V.Rfq)(()=>Y),multi:!0}])],decls:3,vars:7,consts:[["ref",""],["autocomplete","off",3,"name","autofocus"]],template:function(L,z){1&L&&(m.j41(0,"textarea",1,0),m.EFF(2,"    "),m.k0s()),2&L&&(m.HbH(m.VkB("ngx-codemirror ",z.className)),m.AVh("ngx-codemirror--focused",z.isFocused),m.Y8G("name",z.name)("autofocus",z.autoFocus))},encapsulation:2,changeDetection:0}),Y})(),x=(()=>{class Y{}return Y.\u0275fac=function(L){return new(L||Y)},Y.\u0275mod=m.$C({type:Y}),Y.\u0275inj=V.G2t({}),Y})();var K=ge(2629),H=ge(8559),re=ge(9588);function J(Y,Ae){if(1&Y&&(m.j41(0,"span"),m.EFF(1),m.k0s()),2&Y){const L=m.XpG();m.R7$(),m.Lme("",L.userData.address.substring(0,6),"...",L.userData.address.slice(-6))}}function rt(Y,Ae){1&Y&&(m.j41(0,"span"),m.EFF(1),m.nI1(2,"translate"),m.k0s()),2&Y&&(m.R7$(),m.JRh(m.bMT(2,1,"BTN_CONNECT_METAMASK")))}function vt(Y,Ae){if(1&Y&&(m.j41(0,"option",12),m.EFF(1),m.k0s()),2&Y){const L=Ae.$implicit;m.Y8G("value",L),m.R7$(),m.SpI(" ",L," ")}}function S(Y,Ae){if(1&Y&&(m.j41(0,"li",18),m.EFF(1),m.k0s()),2&Y){const L=Ae.$implicit;m.R7$(),m.SpI(" ",L.formattedMessage," ")}}function v(Y,Ae){if(1&Y&&(m.j41(0,"div",14)(1,"h4"),m.EFF(2,"Compiler Errors:"),m.k0s(),m.j41(3,"ul"),m.Z7z(4,S,2,1,"li",18,m.fX1),m.k0s()()),2&Y){const L=m.XpG();m.R7$(4),m.Dyx(L.compilerErrors)}}function ee(Y,Ae){if(1&Y&&(m.j41(0,"option",12),m.EFF(1),m.k0s()),2&Y){const L=Ae.$implicit;m.Y8G("value",L),m.R7$(),m.SpI(" ",L," ")}}function xe(Y,Ae){if(1&Y){const L=m.RV6();m.j41(0,"div")(1,"h3",19),m.EFF(2),m.nI1(3,"translate"),m.k0s(),m.j41(4,"div",20)(5,"mat-form-field",21)(6,"mat-label"),m.EFF(7),m.nI1(8,"translate"),m.k0s(),m.j41(9,"select",11),m.mxI("ngModelChange",function(X){V.eBV(L);const we=m.XpG();return m.DH7(we.selectedContractName,X)||(we.selectedContractName=X),V.Njj(X)}),m.Z7z(10,ee,2,2,"option",12,m.fX1),m.k0s()(),m.j41(12,"mat-form-field",22)(13,"mat-label"),m.EFF(14),m.nI1(15,"translate"),m.k0s(),m.j41(16,"input",23),m.mxI("ngModelChange",function(X){V.eBV(L);const we=m.XpG();return m.DH7(we.commonGweiValue,X)||(we.commonGweiValue=X),V.Njj(X)}),m.k0s()()(),m.j41(17,"button",24),m.bIt("click",function(){V.eBV(L);const X=m.XpG();return V.Njj(X.deploySelectedContract())}),m.j41(18,"mat-icon"),m.EFF(19,"link"),m.k0s(),m.EFF(20),m.nI1(21,"translate"),m.k0s()()}if(2&Y){const L=m.XpG();m.R7$(2),m.JRh(m.bMT(3,6,"TITLE_CONTRACT_DEPLOYMENT")),m.R7$(5),m.JRh(m.bMT(8,8,"LABEL_COMPILED_CONTRACTS")),m.R7$(2),m.R50("ngModel",L.selectedContractName),m.R7$(),m.Dyx(L.contractNames),m.R7$(4),m.JRh(m.bMT(15,10,"GWEI_VALUE_FOR_SENDING_ETH")),m.R7$(2),m.R50("ngModel",L.commonGweiValue),m.R7$(4),m.SpI(" ",m.bMT(21,12,"BTN_DEPLOY_SELECTED_CONTRACT")," ")}}function G(Y,Ae){if(1&Y&&(m.j41(0,"div",15),m.EFF(1),m.nI1(2,"translate"),m.k0s()),2&Y){const L=m.XpG();m.R7$(),m.Lme(" ",m.bMT(2,2,"LABEL_CONTRACT_ADDRESS")," ",L.deployedContractAddress," ")}}function $(Y,Ae){if(1&Y&&(m.j41(0,"div",29),m.EFF(1),m.nI1(2,"translate"),m.k0s()),2&Y){const L=m.XpG(2).$implicit;m.R7$(),m.E5c(" ",m.bMT(2,3,"LABEL_OUTPUT_FOR")," ",L.name,": ",L.outputValue," ")}}function N(Y,Ae){if(1&Y){const L=m.RV6();m.j41(0,"div",27)(1,"button",24),m.bIt("click",function(){V.eBV(L);const X=m.XpG().$implicit,we=m.XpG(2);return V.Njj(we.invokeFunction(X))}),m.j41(2,"mat-icon"),m.EFF(3,"call_to_action"),m.k0s(),m.EFF(4),m.nI1(5,"translate"),m.k0s(),m.j41(6,"mat-form-field",10)(7,"textarea",28),m.mxI("ngModelChange",function(X){V.eBV(L);const we=m.XpG().$implicit;return m.DH7(we.inputValues,X)||(we.inputValues=X),V.Njj(X)}),m.k0s()()(),m.nVh(8,$,3,5,"div",29)}if(2&Y){const L=m.XpG().$implicit;m.R7$(4),m.Lme(" ",m.bMT(5,6,"BTN_INVOKE")," ",L.name," "),m.R7$(3),m.Y8G("placeholder",m.VkB("(",L.inputHints,")")),m.R50("ngModel",L.inputValues),m.R7$(),m.vxM(""!==L.outputValue?8:-1)}}function A(Y,Ae){if(1&Y&&(m.j41(0,"div",29),m.EFF(1),m.nI1(2,"translate"),m.k0s()),2&Y){const L=m.XpG(2).$implicit;m.R7$(),m.E5c(" ",m.bMT(2,3,"LABEL_OUTPUT_FOR")," ",L.name,": ",L.outputValue," ")}}function ae(Y,Ae){if(1&Y){const L=m.RV6();m.j41(0,"div")(1,"button",24),m.bIt("click",function(){V.eBV(L);const X=m.XpG().$implicit,we=m.XpG(2);return V.Njj(we.invokeFunction(X))}),m.j41(2,"mat-icon"),m.EFF(3,"call_to_action"),m.k0s(),m.EFF(4),m.nI1(5,"translate"),m.k0s(),m.nVh(6,A,3,5,"div",29),m.k0s()}if(2&Y){const L=m.XpG().$implicit;m.R7$(4),m.Lme(" ",m.bMT(5,3,"BTN_INVOKE")," ",L.name," "),m.R7$(2),m.vxM(""!==L.outputValue?6:-1)}}function B(Y,Ae){if(1&Y&&(m.j41(0,"div")(1,"div",26),m.nVh(2,N,9,8)(3,ae,7,5,"div"),m.k0s()()),2&Y){const L=Ae.$implicit;m.R7$(2),m.vxM(L.inputs.length>0?2:3)}}function se(Y,Ae){if(1&Y&&(m.j41(0,"div"),m.EFF(1),m.nI1(2,"translate"),m.k0s()),2&Y){const L=m.XpG(2);m.R7$(),m.Lme("",m.bMT(2,2,"LABEL_OUTPUT"),": ",L.invokeOutput)}}function Se(Y,Ae){if(1&Y&&(m.j41(0,"div",16)(1,"h3",9),m.EFF(2,"TITLE_INTERACT_WITH_CONTRACT"),m.k0s(),m.Z7z(3,B,4,1,"div",null,m.fX1),m.j41(5,"div",25),m.nVh(6,se,3,4,"div"),m.k0s()()),2&Y){const L=m.XpG();m.R7$(3),m.Dyx(L.contractFunctions),m.R7$(3),m.vxM(""!==L.invokeOutput?6:-1)}}(0,ft.j)({autoConnect:!0,provider:(0,Ce.xW)()});const{ethereum:Vt}=window,gt={"0.8.21":"soljson-v0.8.21+commit.d9974bed.js","0.8.9":"soljson-v0.8.9+commit.e5eed63a.js","0.7.6":"soljson-v0.7.6+commit.7338295f.js","0.6.12":"soljson-v0.6.12+commit.27d51765.js","0.5.17":"soljson-v0.5.17+commit.d19bba13.js","0.4.26":"soljson-v0.4.26+commit.4563c3fc.js","0.3.6":"soljson-v0.3.6+commit.3fc68da5.js","0.2.2":"soljson-v0.2.2+commit.ef92f566.js","0.1.7":"soljson-v0.1.7+commit.b4e666cc.js"};let bt=(()=>{class Y{keysService;snackBarHelperService;changeDetectorRef;constructor(L,z,X){this.keysService=L,this.snackBarHelperService=z,this.changeDetectorRef=X}ngOnInit(){this.handleAuth(),window.ethereum.on("chainChanged",this.handleChainChanged.bind(this))}userData;session=!1;metamaskAddress="";selectedContractName;compiledContracts=[];deployedContractAddress="";contractNames=[];commonGweiValue=0;contractFunctions=[];invokeOutput="";selectedCompilerVersion="0.8.21";compilerVersions=Object.keys(gt);compilerErrors=[];code="// SPDX-License-Identifier: MIT\npragma solidity ^0.8.14;\n\ncontract HelloWorld {\n    function get()public pure returns (string memory){\n        return 'Hello Contracts';\n    }\n}";editorOptions={mode:"text/x-solidity",theme:"dracula",lineNumbers:!0,lineWrapping:!0};compileAndFetchContracts(L){var z=this;return(0,ce.A)(function*(){try{z.deployedContractAddress="";const X=gt[z.selectedCompilerVersion];if(!X)return void console.error("Selected compiler version not found.");const we={version:`https://binaries.soliditylang.org/bin/${X}`,contractBody:L},fe=yield Qt(we);fe.errors&&fe.errors.length>0&&!fe.contracts?(z.compiledContracts=null,console.log(fe.errors),z.compilerErrors.push(...fe.errors)):(z.compilerErrors=[],console.log("output",fe),z.compiledContracts=fe.contracts.Compiled_Contracts,z.contractNames=Object.keys(z.compiledContracts),z.selectedContractName=z.contractNames[0])}catch(X){console.error("Error compiling contracts:",X)}})()}deploySelectedContract(){var L=this;return(0,ce.A)(function*(){if(L.session)try{const X=L.compiledContracts[L.selectedContractName];if(!X)return void console.error("Selected contract not found.");const fe=new pe.j(window.ethereum).getSigner(),wt=X.abi,Ct=new ke.PM(wt,X.evm.bytecode.object,fe),Bt={};L.commonGweiValue>0&&(Bt.value=qe.parseUnits(L.commonGweiValue.toString(),"gwei"));const lt=yield Ct.deploy(Bt);yield lt.deployed(),L.deployedContractAddress=lt.address,L.contractFunctions=wt.filter(Rt=>"function"===Rt.type).map(Rt=>{const R=Rt.inputs.length>0?L.getInputHints(Rt.inputs):"No inputs";return{...Rt,inputValues:"",outputValue:"",inputHints:R}}),console.log(L.contractFunctions)}catch(z){console.error("Error deploying contract:",z)}else L.snackBarHelperService.open("PLEASE_CONNECT_WEB3_WALLET","errorBar")})()}getInputHints(L){return L.map(z=>`${z.name}: ${z.type}`).join(", ")}parseInputValue(L,z){return"bool"===z?"true"===L.toLowerCase():L}invokeFunction(L){var z=this;return(0,ce.A)(function*(){if(z.session)try{const X=z.compiledContracts[z.selectedContractName],fe=new pe.j(window.ethereum).getSigner(),$t=new ke.NZ(z.deployedContractAddress,X.abi,fe),wt=""!==L.inputValues.trim()?L.inputValues.split(",").map((lt,Rt)=>{const R=L.inputs[Rt].type;return z.parseInputValue(lt.trim(),R)}):[],Ct={};z.commonGweiValue>0&&(Ct.value=qe.parseUnits(z.commonGweiValue.toString(),"gwei"));const Bt=yield $t.functions[L.name](...wt,Ct);if(console.log(Bt),L.outputs.length>0&&("view"===L.stateMutability||"pure"===L.stateMutability)){console.log("hello");const lt=Bt[0].toString(),Rt=z.contractFunctions.find(R=>R.name===L.name);if(Rt){Rt.outputValue=lt;const R=z.contractFunctions.indexOf(L);-1!==R&&(z.contractFunctions[R]=Rt)}console.log(L.outputValue)}console.log("Invoked:",Bt)}catch(X){console.error("Error invoking function",X);const we=z.contractFunctions.find(fe=>fe.name===L.name);if(we){we.outputValue=X.message;const fe=z.contractFunctions.indexOf(L);-1!==fe&&(z.contractFunctions[fe]=we)}}else z.snackBarHelperService.open("PLEASE_CONNECT_WEB3_WALLET","errorBar")})()}handleChainChanged(L){var z=this;return(0,ce.A)(function*(){yield z.handleAuth()})()}handleAuth(){var L=this;return(0,ce.A)(function*(){try{const{isConnected:z}=(0,ut.sU)();if(z&&(yield(0,ut.Zf)()),!window.ethereum)return void L.snackBarHelperService.open("PLEASE_INSTALL_WEB3_WALLET","errorBar");const X=yield(0,ut.Ng)({connector:new ft.I});L.metamaskAddress=X.account,L.userData={address:X.account,chain:X.chain.id,network:"evm"},yield Vt.request({method:"wallet_addEthereumChain",params:[{chainId:"0xaa36a7",chainName:"Sepolia Test Network",nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},rpcUrls:["https://ethereum-sepolia.blockpi.network/v1/rpc/public"],blockExplorerUrls:["https://sepolia.etherscan.io/"]}]});const we="11155111",fe=String(X.chain?.id);X&&fe!==we?(L.session=!1,L.snackBarHelperService.open("PLEASE_CONNECT_TO_SEPOLIA_NETWORK","errorBar")):(console.log("Should show ethereum chain now"),L.session=!0),console.log("session",L.session),L.changeDetectorRef.detectChanges()}catch{console.log("An error occurred")}})()}static \u0275fac=function(z){return new(z||Y)(m.rXU(Ge.o),m.rXU(H.r),m.rXU(Nt.gRc))};static \u0275cmp=m.VBU({type:Y,selectors:[["app-web3-sandbox"]],decls:37,vars:17,consts:[[1,"sandbox-container","mat-elevation-z6"],[1,"sandbox-container_body"],[1,"sandbox-container_body_left"],[1,"editor-title"],[3,"ngModelChange","ngModel","options"],[1,"sandbox-container_body_right"],[1,"playground-wallet"],[1,"metamask-button"],["mat-raised-button","","color","accent","type","button",3,"click"],["translate",""],["appearance","outline","color","accent"],["matNativeControl","",3,"ngModelChange","ngModel"],[3,"value"],["type","button","mat-raised-button","",3,"click"],[1,"error-container","mat-elevation-z6"],[1,"deployedaddresstext"],[1,"invokecontainer","mat-elevation-z6"],["src","assets/public/images/padding/11px.png"],[1,"error"],[1,"contracts-title"],[1,"form-fields-container"],["appearance","outline","color","accent",1,"contract-selector"],["appearance","outline","color","accent",1,"gwei-input"],["matInput","","type","number",3,"ngModelChange","ngModel"],["mat-raised-button","","type","button",3,"click"],[1,"output-container","mat-elevation-z6"],[1,"function-container"],[1,"functionwtext-container"],["matAutosizeMinRows","4","matAutosizeMaxRows","4","matTextareaAutosize","","matInput","",3,"ngModelChange","placeholder","ngModel"],[1,"invoke-output"]],template:function(z,X){1&z&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m.EFF(4),m.nI1(5,"translate"),m.k0s(),m.j41(6,"ngx-codemirror",4),m.mxI("ngModelChange",function(fe){return m.DH7(X.code,fe)||(X.code=fe),fe}),m.k0s()(),m.j41(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),m.bIt("click",function(){return X.handleAuth()}),m.nVh(11,J,2,2,"span")(12,rt,3,3,"span"),m.k0s()()(),m.j41(13,"h2",9),m.EFF(14,"TITLE_WEB3_SANDBOX"),m.k0s(),m.j41(15,"ul")(16,"li",9),m.EFF(17,"EXPLANATION_SMART_CONTRACT_DEPLOYMENT"),m.k0s(),m.j41(18,"li",9),m.EFF(19,"EXPLANATION_GWEI_VALUE_POST_COMPILATION"),m.k0s()(),m.j41(20,"mat-form-field",10)(21,"mat-label"),m.EFF(22),m.nI1(23,"translate"),m.k0s(),m.j41(24,"select",11),m.mxI("ngModelChange",function(fe){return m.DH7(X.selectedCompilerVersion,fe)||(X.selectedCompilerVersion=fe),fe}),m.Z7z(25,vt,2,2,"option",12,m.fX1),m.k0s()(),m.j41(27,"button",13),m.bIt("click",function(){return X.compileAndFetchContracts(X.code)}),m.j41(28,"mat-icon"),m.EFF(29,"build"),m.k0s(),m.EFF(30),m.nI1(31,"translate"),m.k0s(),m.nVh(32,v,6,0,"div",14),m.nVh(33,xe,22,14,"div"),m.nVh(34,G,3,4,"div",15),m.nVh(35,Se,7,1,"div",16),m.k0s()(),m.nrm(36,"img",17),m.k0s()),2&z&&(m.R7$(4),m.JRh(m.bMT(5,11,"TITLE_CONTRACT_EDITOR")),m.R7$(2),m.R50("ngModel",X.code),m.Y8G("options",X.editorOptions),m.R7$(5),m.vxM(X.session?11:12),m.R7$(11),m.JRh(m.bMT(23,13,"LABEL_SELECT_COMPILER_VERSION")),m.R7$(2),m.R50("ngModel",X.selectedCompilerVersion),m.R7$(),m.Dyx(X.compilerVersions),m.R7$(5),m.SpI(" ",m.bMT(31,15,"BTN_COMPILE_CONTRACT")," "),m.R7$(2),m.vxM(X.compilerErrors.length>0?32:-1),m.R7$(),m.vxM(X.compiledContracts?33:-1),m.R7$(),m.vxM(X.deployedContractAddress?34:-1),m.R7$(),m.vxM(X.deployedContractAddress?35:-1))},dependencies:[x,ne,Ke.YN,Ke.xH,Ke.y7,Ke.me,Ke.Q0,Ke.wz,Ke.BC,Ke.vS,P.Hl,P.$z,K.m_,K.An,ot.h,ot.Mm,Kt.R,re.rl,re.nJ,j.fS,j.fg,ot.D9],styles:[".playground-wallet[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:18px}.sandbox-container[_ngcontent-%COMP%]{margin:32px}.sandbox-container_body[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:32px;padding:40px}.sandbox-container_body_left[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:70%}.sandbox-container_body_right[_ngcontent-%COMP%]{align-items:flex-start;display:flex;flex-direction:column;width:30%}@media (max-width: 840px){.sandbox-container_body[_ngcontent-%COMP%]{flex-direction:column}.sandbox-container_body_left[_ngcontent-%COMP%], .sandbox-container_body_right[_ngcontent-%COMP%]{width:100%}}.deployedaddresstext[_ngcontent-%COMP%]{color:#2d972d;font-weight:600;margin:10px 0;word-break:break-all}.invokecontainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:16px;max-height:200px;overflow:scroll;padding:16px;width:100%}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:16px 0;max-height:300px;overflow:scroll;padding:16px}.error-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:12px;padding-left:16px}.editor-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;margin-bottom:16px;padding:0 8px;width:100%}.function-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:8px}.functionwtext-container[_ngcontent-%COMP%]{align-items:flex-start;display:flex;justify-content:space-between;margin-top:8px}.output-container[_ngcontent-%COMP%]{display:flex;width:100%;word-break:break-all}.invoke-btncontainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.invoke-output[_ngcontent-%COMP%]{font-size:12px;padding:4px}h2[_ngcontent-%COMP%]{margin:0}ul[_ngcontent-%COMP%]{padding-left:16px}.contracts-title[_ngcontent-%COMP%]{font-weight:500;margin-top:16px}.form-fields-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;margin-bottom:16px;width:100%}.contract-selector[_ngcontent-%COMP%]{flex:1 1 60%;min-width:200px}.gwei-input[_ngcontent-%COMP%]{flex:1 1 30%;min-width:150px}"]})}return Y})();ge(1471),ge(1167),ge(5071);var jt=ge(2833);const fr=[{path:"",component:bt}];let mn=(()=>{class Y{configurationService;overlayContainer;constructor(L,z){this.configurationService=L,this.overlayContainer=z,L.getApplicationConfiguration().subscribe(X=>{z.getContainerElement().classList.add(X.application.theme+"-theme")})}static \u0275fac=function(z){return new(z||Y)(V.KVO(ue.s),V.KVO(jt.Sf))};static \u0275mod=m.$C({type:Y});static \u0275inj=V.G2t({imports:[x,Q.MD,U.iI.forChild(fr),ot.h,Ke.YN,Ke.X1,P.Hl,te.Hu,j.fS,Te._T,bt]})}return Y})()},8039:(di,pt,ge)=>{!function(Q){"use strict";Q.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var Ke=0;Ke<Q.modeInfo.length;Ke++){var U=Q.modeInfo[Ke];U.mimes&&(U.mime=U.mimes[0])}Q.findModeByMIME=function(ue){ue=ue.toLowerCase();for(var te=0;te<Q.modeInfo.length;te++){var j=Q.modeInfo[te];if(j.mime==ue)return j;if(j.mimes)for(var P=0;P<j.mimes.length;P++)if(j.mimes[P]==ue)return j}return/\+xml$/.test(ue)?Q.findModeByMIME("application/xml"):/\+json$/.test(ue)?Q.findModeByMIME("application/json"):void 0},Q.findModeByExtension=function(ue){ue=ue.toLowerCase();for(var te=0;te<Q.modeInfo.length;te++){var j=Q.modeInfo[te];if(j.ext)for(var P=0;P<j.ext.length;P++)if(j.ext[P]==ue)return j}},Q.findModeByFileName=function(ue){for(var te=0;te<Q.modeInfo.length;te++){var j=Q.modeInfo[te];if(j.file&&j.file.test(ue))return j}var P=ue.lastIndexOf("."),Te=P>-1&&ue.substring(P+1,ue.length);if(Te)return Q.findModeByExtension(Te)},Q.findModeByName=function(ue){ue=ue.toLowerCase();for(var te=0;te<Q.modeInfo.length;te++){var j=Q.modeInfo[te];if(j.name.toLowerCase()==ue)return j;if(j.alias)for(var P=0;P<j.alias.length;P++)if(j.alias[P].toLowerCase()==ue)return j}}}(ge(1382))},8775:(di,pt,ge)=>{!function(Q){"use strict";var Ke={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},U={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};Q.defineMode("xml",function(ue,te){var Ge,Ce,j=ue.indentUnit,P={},Te=te.htmlMode?Ke:U;for(var ce in Te)P[ce]=Te[ce];for(var ce in te)P[ce]=te[ce];function pe(x,K){function H(rt){return K.tokenize=rt,rt(x,K)}var re=x.next();return"<"==re?x.eat("!")?x.eat("[")?x.match("CDATA[")?H(ft("atom","]]>")):null:x.match("--")?H(ft("comment","--\x3e")):x.match("DOCTYPE",!0,!0)?(x.eatWhile(/[\w\._\-]/),H(ut(1))):null:x.eat("?")?(x.eatWhile(/[\w\._\-]/),K.tokenize=ft("meta","?>"),"meta"):(Ge=x.eat("/")?"closeTag":"openTag",K.tokenize=ke,"tag bracket"):"&"==re?(x.eat("#")?x.eat("x")?x.eatWhile(/[a-fA-F\d]/)&&x.eat(";"):x.eatWhile(/[\d]/)&&x.eat(";"):x.eatWhile(/[\w\.\-:]/)&&x.eat(";"))?"atom":"error":(x.eatWhile(/[^&<]/),null)}function ke(x,K){var H=x.next();if(">"==H||"/"==H&&x.eat(">"))return K.tokenize=pe,Ge=">"==H?"endTag":"selfcloseTag","tag bracket";if("="==H)return Ge="equals",null;if("<"==H){K.tokenize=pe,K.state=tt,K.tagName=K.tagStart=null;var re=K.tokenize(x,K);return re?re+" tag error":"tag error"}return/[\'\"]/.test(H)?(K.tokenize=function qe(x){var K=function(H,re){for(;!H.eol();)if(H.next()==x){re.tokenize=ke;break}return"string"};return K.isInAttribute=!0,K}(H),K.stringStartCol=x.column(),K.tokenize(x,K)):(x.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function ft(x,K){return function(H,re){for(;!H.eol();){if(H.match(K)){re.tokenize=pe;break}H.next()}return x}}function ut(x){return function(K,H){for(var re;null!=(re=K.next());){if("<"==re)return H.tokenize=ut(x+1),H.tokenize(K,H);if(">"==re){if(1==x){H.tokenize=pe;break}return H.tokenize=ut(x-1),H.tokenize(K,H)}}return"meta"}}function de(x){return x&&x.toLowerCase()}function Ye(x,K,H){this.prev=x.context,this.tagName=K||"",this.indent=x.indented,this.startOfLine=H,(P.doNotIndent.hasOwnProperty(K)||x.context&&x.context.noIndent)&&(this.noIndent=!0)}function Jt(x){x.context&&(x.context=x.context.prev)}function Qt(x,K){for(var H;;){if(!x.context||!P.contextGrabbers.hasOwnProperty(de(H=x.context.tagName))||!P.contextGrabbers[de(H)].hasOwnProperty(de(K)))return;Jt(x)}}function tt(x,K,H){return"openTag"==x?(H.tagStart=K.column(),Kt):"closeTag"==x?ot:tt}function Kt(x,K,H){return"word"==x?(H.tagName=K.current(),Ce="tag",V):P.allowMissingTagName&&"endTag"==x?(Ce="tag bracket",V(x,0,H)):(Ce="error",Kt)}function ot(x,K,H){if("word"==x){var re=K.current();return H.context&&H.context.tagName!=re&&P.implicitlyClosed.hasOwnProperty(de(H.context.tagName))&&Jt(H),H.context&&H.context.tagName==re||!1===P.matchClosing?(Ce="tag",m):(Ce="tag error",Nt)}return P.allowMissingTagName&&"endTag"==x?(Ce="tag bracket",m(x,0,H)):(Ce="error",Nt)}function m(x,K,H){return"endTag"!=x?(Ce="error",m):(Jt(H),tt)}function Nt(x,K,H){return Ce="error",m(x,0,H)}function V(x,K,H){if("word"==x)return Ce="attribute",Ze;if("endTag"==x||"selfcloseTag"==x){var re=H.tagName,J=H.tagStart;return H.tagName=H.tagStart=null,"selfcloseTag"==x||P.autoSelfClosers.hasOwnProperty(de(re))?Qt(H,re):(Qt(H,re),H.context=new Ye(H,re,J==H.indented)),tt}return Ce="error",V}function Ze(x,K,H){return"equals"==x?T:(P.allowMissing||(Ce="error"),V(x,0,H))}function T(x,K,H){return"string"==x?ne:"word"==x&&P.allowUnquoted?(Ce="string",V):(Ce="error",V(x,0,H))}function ne(x,K,H){return"string"==x?ne:V(x,0,H)}return pe.isInText=!0,{startState:function(x){var K={tokenize:pe,state:tt,indented:x||0,tagName:null,tagStart:null,context:null};return null!=x&&(K.baseIndent=x),K},token:function(x,K){if(!K.tagName&&x.sol()&&(K.indented=x.indentation()),x.eatSpace())return null;Ge=null;var H=K.tokenize(x,K);return(H||Ge)&&"comment"!=H&&(Ce=null,K.state=K.state(Ge||H,x,K),Ce&&(H="error"==Ce?H+" error":Ce)),H},indent:function(x,K,H){var re=x.context;if(x.tokenize.isInAttribute)return x.tagStart==x.indented?x.stringStartCol+1:x.indented+j;if(re&&re.noIndent)return Q.Pass;if(x.tokenize!=ke&&x.tokenize!=pe)return H?H.match(/^(\s*)/)[0].length:0;if(x.tagName)return!1!==P.multilineTagIndentPastTag?x.tagStart+x.tagName.length+2:x.tagStart+j*(P.multilineTagIndentFactor||1);if(P.alignCDATA&&/<!\[CDATA\[/.test(K))return 0;var J=K&&/^<(\/)?([\w_:\.-]*)/.exec(K);if(J&&J[1])for(;re;){if(re.tagName==J[2]){re=re.prev;break}if(!P.implicitlyClosed.hasOwnProperty(de(re.tagName)))break;re=re.prev}else if(J)for(;re;){var rt=P.contextGrabbers[de(re.tagName)];if(!rt||!rt.hasOwnProperty(de(J[2])))break;re=re.prev}for(;re&&re.prev&&!re.startOfLine;)re=re.prev;return re?re.indent+j:x.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:P.htmlMode?"html":"xml",helperType:P.htmlMode?"html":"xml",skipAttribute:function(x){x.state==T&&(x.state=V)},xmlCurrentTag:function(x){return x.tagName?{name:x.tagName,close:"closeTag"==x.type}:null},xmlCurrentContext:function(x){for(var K=[],H=x.context;H;H=H.prev)K.push(H.tagName);return K.reverse()}}}),Q.defineMIME("text/xml","xml"),Q.defineMIME("application/xml","xml"),Q.mimeModes.hasOwnProperty("text/html")||Q.defineMIME("text/html",{name:"xml",htmlMode:!0})}(ge(1382))}}]);